(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=t(i);fetch(i.href,n)}})();var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ot(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}function _t(N){throw new Error('Could not dynamically require "'+N+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _r={exports:{}};var Ci;function os(){return Ci||(Ci=1,(function(N,e){(function(t){N.exports=t()})(function(){return(function t(r,i,n){function s(f,m){if(!i[f]){if(!r[f]){var d=typeof _t=="function"&&_t;if(!m&&d)return d(f,!0);if(a)return a(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var p=i[f]={exports:{}};r[f][0].call(p.exports,function(E){var v=r[f][1][E];return s(v||E)},p,p.exports,t,r,i,n)}return i[f].exports}for(var a=typeof _t=="function"&&_t,o=0;o<n.length;o++)s(n[o]);return s})({1:[function(t,r,i){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(o){for(var f,m,d,y,p,E,v,u=[],c=0,g=o.length,_=g,D=n.getTypeOf(o)!=="string";c<o.length;)_=g-c,d=D?(f=o[c++],m=c<g?o[c++]:0,c<g?o[c++]:0):(f=o.charCodeAt(c++),m=c<g?o.charCodeAt(c++):0,c<g?o.charCodeAt(c++):0),y=f>>2,p=(3&f)<<4|m>>4,E=1<_?(15&m)<<2|d>>6:64,v=2<_?63&d:64,u.push(a.charAt(y)+a.charAt(p)+a.charAt(E)+a.charAt(v));return u.join("")},i.decode=function(o){var f,m,d,y,p,E,v=0,u=0,c="data:";if(o.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var g,_=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===a.charAt(64)&&_--,o.charAt(o.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=s.uint8array?new Uint8Array(0|_):new Array(0|_);v<o.length;)f=a.indexOf(o.charAt(v++))<<2|(y=a.indexOf(o.charAt(v++)))>>4,m=(15&y)<<4|(p=a.indexOf(o.charAt(v++)))>>2,d=(3&p)<<6|(E=a.indexOf(o.charAt(v++))),g[u++]=f,p!==64&&(g[u++]=m),E!==64&&(g[u++]=d);return g}},{"./support":30,"./utils":32}],2:[function(t,r,i){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function f(m,d,y,p,E){this.compressedSize=m,this.uncompressedSize=d,this.crc32=y,this.compression=p,this.compressedContent=E}f.prototype={getContentWorker:function(){var m=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),d=this;return m.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,d,y){return m.pipe(new a).pipe(new o("uncompressedSize")).pipe(d.compressWorker(y)).pipe(new o("compressedSize")).withStreamInfo("compression",d)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var n=t("./utils"),s=(function(){for(var a,o=[],f=0;f<256;f++){a=f;for(var m=0;m<8;m++)a=1&a?3988292384^a>>>1:a>>>1;o[f]=a}return o})();r.exports=function(a,o){return a!==void 0&&a.length?n.getTypeOf(a)!=="string"?(function(f,m,d,y){var p=s,E=y+d;f^=-1;for(var v=y;v<E;v++)f=f>>>8^p[255&(f^m[v])];return-1^f})(0|o,a,a.length,0):(function(f,m,d,y){var p=s,E=y+d;f^=-1;for(var v=y;v<E;v++)f=f>>>8^p[255&(f^m.charCodeAt(v))];return-1^f})(0|o,a,a.length,0):0}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var n=null;n=typeof Promise<"u"?Promise:t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),o=t("./stream/GenericWorker"),f=n?"uint8array":"array";function m(d,y){o.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=y,this.meta={}}i.magic="\b\0",a.inherits(m,o),m.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,d.data),!1)},m.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(y){d.push({data:y,meta:d.meta})}},i.compressWorker=function(d){return new m("Deflate",d)},i.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){function n(p,E){var v,u="";for(v=0;v<E;v++)u+=String.fromCharCode(255&p),p>>>=8;return u}function s(p,E,v,u,c,g){var _,D,b=p.file,S=p.compression,I=g!==f.utf8encode,R=a.transformTo("string",g(b.name)),C=a.transformTo("string",f.utf8encode(b.name)),B=b.comment,Y=a.transformTo("string",g(B)),k=a.transformTo("string",f.utf8encode(B)),M=C.length!==b.name.length,x=k.length!==B.length,V="",ce="",$="",ae=b.dir,re=b.date,be={crc32:0,compressedSize:0,uncompressedSize:0};E&&!v||(be.crc32=p.crc32,be.compressedSize=p.compressedSize,be.uncompressedSize=p.uncompressedSize);var W=0;E&&(W|=8),I||!M&&!x||(W|=2048);var H=0,_e=0;ae&&(H|=16),c==="UNIX"?(_e=798,H|=(function(pe,ze){var Pe=pe;return pe||(Pe=ze?16893:33204),(65535&Pe)<<16})(b.unixPermissions,ae)):(_e=20,H|=(function(pe){return 63&(pe||0)})(b.dosPermissions)),_=re.getUTCHours(),_<<=6,_|=re.getUTCMinutes(),_<<=5,_|=re.getUTCSeconds()/2,D=re.getUTCFullYear()-1980,D<<=4,D|=re.getUTCMonth()+1,D<<=5,D|=re.getUTCDate(),M&&(ce=n(1,1)+n(m(R),4)+C,V+="up"+n(ce.length,2)+ce),x&&($=n(1,1)+n(m(Y),4)+k,V+="uc"+n($.length,2)+$);var fe="";return fe+=`
\0`,fe+=n(W,2),fe+=S.magic,fe+=n(_,2),fe+=n(D,2),fe+=n(be.crc32,4),fe+=n(be.compressedSize,4),fe+=n(be.uncompressedSize,4),fe+=n(R.length,2),fe+=n(V.length,2),{fileRecord:d.LOCAL_FILE_HEADER+fe+R+V,dirRecord:d.CENTRAL_FILE_HEADER+n(_e,2)+fe+n(Y.length,2)+"\0\0\0\0"+n(H,4)+n(u,4)+R+V+Y}}var a=t("../utils"),o=t("../stream/GenericWorker"),f=t("../utf8"),m=t("../crc32"),d=t("../signature");function y(p,E,v,u){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=v,this.encodeFileName=u,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(y,o),y.prototype.push=function(p){var E=p.meta.percent||0,v=this.entriesCount,u=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,o.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:v?(E+100*(v-u-1))/v:100}}))},y.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var E=this.streamFiles&&!p.file.dir;if(E){var v=s(p,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(p){this.accumulate=!1;var E=this.streamFiles&&!p.file.dir,v=s(p,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),E)this.push({data:(function(u){return d.DATA_DESCRIPTOR+n(u.crc32,4)+n(u.compressedSize,4)+n(u.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var p=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var v=this.bytesWritten-p,u=(function(c,g,_,D,b){var S=a.transformTo("string",b(D));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(c,2)+n(c,2)+n(g,4)+n(_,4)+n(S.length,2)+S})(this.dirRecords.length,v,p,this.zipComment,this.encodeFileName);this.push({data:u,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(p){this._sources.push(p);var E=this;return p.on("data",function(v){E.processChunk(v)}),p.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),p.on("error",function(v){E.error(v)}),this},y.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(p){var E=this._sources;if(!o.prototype.error.call(this,p))return!1;for(var v=0;v<E.length;v++)try{E[v].error(p)}catch{}return!0},y.prototype.lock=function(){o.prototype.lock.call(this);for(var p=this._sources,E=0;E<p.length;E++)p[E].lock()},r.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var n=t("../compressions"),s=t("./ZipFileWorker");i.generateWorker=function(a,o,f){var m=new s(o.streamFiles,f,o.platform,o.encodeFileName),d=0;try{a.forEach(function(y,p){d++;var E=(function(g,_){var D=g||_,b=n[D];if(!b)throw new Error(D+" is not a valid compression method !");return b})(p.options.compression,o.compression),v=p.options.compressionOptions||o.compressionOptions||{},u=p.dir,c=p.date;p._compressWorker(E,v).withStreamInfo("file",{name:y,dir:u,date:c,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(m)}),m.entriesCount=d}catch(y){m.error(y)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var n=t("./utils"),s=t("./external"),a=t("./utf8"),o=t("./zipEntries"),f=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function d(y){return new s.Promise(function(p,E){var v=y.decompressed.getContentWorker().pipe(new f);v.on("error",function(u){E(u)}).on("end",function(){v.streamInfo.crc32!==y.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(y,p){var E=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),m.isNode&&m.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",y,!0,p.optimizedBinaryString,p.base64).then(function(v){var u=new o(p);return u.load(v),u}).then(function(v){var u=[s.Promise.resolve(v)],c=v.files;if(p.checkCRC32)for(var g=0;g<c.length;g++)u.push(d(c[g]));return s.Promise.all(u)}).then(function(v){for(var u=v.shift(),c=u.files,g=0;g<c.length;g++){var _=c[g],D=_.fileNameStr,b=n.resolve(_.fileNameStr);E.file(b,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:p.createFolders}),_.dir||(E.file(b).unsafeOriginalName=D)}return u.zipComment.length&&(E.comment=u.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker");function a(o,f){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(f)}n.inherits(a,s),a.prototype._bindStream=function(o){var f=this;(this._stream=o).pause(),o.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var n=t("readable-stream").Readable;function s(a,o,f){n.call(this,o),this._helper=a;var m=this;a.on("data",function(d,y){m.push(d)||m._helper.pause(),f&&f(y)}).on("error",function(d){m.emit("error",d)}).on("end",function(){m.push(null)})}t("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,r,i){function n(b,S,I){var R,C=a.getTypeOf(S),B=a.extend(I||{},m);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(b=c(b)),B.createFolders&&(R=u(b))&&g.call(this,R,!0);var Y=C==="string"&&B.binary===!1&&B.base64===!1;I&&I.binary!==void 0||(B.binary=!Y),(S instanceof d&&S.uncompressedSize===0||B.dir||!S||S.length===0)&&(B.base64=!1,B.binary=!0,S="",B.compression="STORE",C="string");var k=null;k=S instanceof d||S instanceof o?S:E.isNode&&E.isStream(S)?new v(b,S):a.prepareContent(b,S,B.binary,B.optimizedBinaryString,B.base64);var M=new y(b,k,B);this.files[b]=M}var s=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),m=t("./defaults"),d=t("./compressedObject"),y=t("./zipObject"),p=t("./generate"),E=t("./nodejsUtils"),v=t("./nodejs/NodejsStreamInputAdapter"),u=function(b){b.slice(-1)==="/"&&(b=b.substring(0,b.length-1));var S=b.lastIndexOf("/");return 0<S?b.substring(0,S):""},c=function(b){return b.slice(-1)!=="/"&&(b+="/"),b},g=function(b,S){return S=S!==void 0?S:m.createFolders,b=c(b),this.files[b]||n.call(this,b,null,{dir:!0,createFolders:S}),this.files[b]};function _(b){return Object.prototype.toString.call(b)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(b){var S,I,R;for(S in this.files)R=this.files[S],(I=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&b(I,R)},filter:function(b){var S=[];return this.forEach(function(I,R){b(I,R)&&S.push(R)}),S},file:function(b,S,I){if(arguments.length!==1)return b=this.root+b,n.call(this,b,S,I),this;if(_(b)){var R=b;return this.filter(function(B,Y){return!Y.dir&&R.test(B)})}var C=this.files[this.root+b];return C&&!C.dir?C:null},folder:function(b){if(!b)return this;if(_(b))return this.filter(function(C,B){return B.dir&&b.test(C)});var S=this.root+b,I=g.call(this,S),R=this.clone();return R.root=I.name,R},remove:function(b){b=this.root+b;var S=this.files[b];if(S||(b.slice(-1)!=="/"&&(b+="/"),S=this.files[b]),S&&!S.dir)delete this.files[b];else for(var I=this.filter(function(C,B){return B.name.slice(0,b.length)===b}),R=0;R<I.length;R++)delete this.files[I[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(b){var S,I={};try{if((I=a.extend(b||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");a.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var R=I.comment||this.comment||"";S=p.generateWorker(this,I,R)}catch(C){(S=new o("error")).error(C)}return new f(S,I.type||"string",I.mimeType)},generateAsync:function(b,S){return this.generateInternalStream(b).accumulate(S)},generateNodeStream:function(b,S){return(b=b||{}).type||(b.type="nodebuffer"),this.generateInternalStream(b).toNodejsStream(S)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var n=t("./DataReader");function s(a){n.call(this,a);for(var o=0;o<this.data.length;o++)a[o]=255&a[o]}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var o=a.charCodeAt(0),f=a.charCodeAt(1),m=a.charCodeAt(2),d=a.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===o&&this.data[y+1]===f&&this.data[y+2]===m&&this.data[y+3]===d)return y-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var o=a.charCodeAt(0),f=a.charCodeAt(1),m=a.charCodeAt(2),d=a.charCodeAt(3),y=this.readData(4);return o===y[0]&&f===y[1]&&m===y[2]&&d===y[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var o,f=0;for(this.checkOffset(a),o=this.index+a-1;o>=this.index;o--)f=(f<<8)+this.byteAt(o);return this.index+=a,f},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var n=t("./Uint8ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var n=t("./DataReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var o=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var n=t("./ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,o},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),o=t("./StringReader"),f=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");r.exports=function(d){var y=n.getTypeOf(d);return n.checkSupport(y),y!=="string"||s.uint8array?y==="nodebuffer"?new f(d):s.uint8array?new m(n.transformTo("uint8array",d)):new a(n.transformTo("array",d)):new o(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var n=t("./GenericWorker"),s=t("../utils");function a(o){n.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(a,n),a.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var n=t("./GenericWorker"),s=t("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,n),a.prototype.processChunk=function(o){this.streamInfo.crc32=s(o.data,this.streamInfo.crc32||0),this.push(o)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}n.inherits(a,s),a.prototype.processChunk=function(o){if(o){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+o.data.length}s.prototype.processChunk.call(this,o)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(o){s.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=n.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}n.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,f);break;case"uint8array":o=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":o=this.data.slice(this.index,f)}return this.index=f,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(o){a.processChunk(o)}),s.on("end",function(){a.end()}),s.on("error",function(o){a.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=n},{}],29:[function(t,r,i){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),o=t("../base64"),f=t("../support"),m=t("../external"),d=null;if(f.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(E,v){return new m.Promise(function(u,c){var g=[],_=E._internalType,D=E._outputType,b=E._mimeType;E.on("data",function(S,I){g.push(S),v&&v(I)}).on("error",function(S){g=[],c(S)}).on("end",function(){try{var S=(function(I,R,C){switch(I){case"blob":return n.newBlob(n.transformTo("arraybuffer",R),C);case"base64":return o.encode(R);default:return n.transformTo(I,R)}})(D,(function(I,R){var C,B=0,Y=null,k=0;for(C=0;C<R.length;C++)k+=R[C].length;switch(I){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(Y=new Uint8Array(k),C=0;C<R.length;C++)Y.set(R[C],B),B+=R[C].length;return Y;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+I+"'")}})(_,g),b);u(S)}catch(I){c(I)}g=[]}).resume()})}function p(E,v,u){var c=v;switch(v){case"blob":case"arraybuffer":c="uint8array";break;case"base64":c="string"}try{this._internalType=c,this._outputType=v,this._mimeType=u,n.checkSupport(c),this._worker=E.pipe(new s(c)),E.lock()}catch(g){this._worker=new a("error"),this._worker.error(g)}}p.prototype={accumulate:function(E){return y(this,E)},on:function(E,v){var u=this;return E==="data"?this._worker.on(E,function(c){v.call(u,c.data,c.meta)}):this._worker.on(E,function(){n.delay(v,arguments,u)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},E)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),o=t("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function d(){o.call(this,"utf-8 decode"),this.leftOver=null}function y(){o.call(this,"utf-8 encode")}i.utf8encode=function(p){return s.nodebuffer?a.newBufferFrom(p,"utf-8"):(function(E){var v,u,c,g,_,D=E.length,b=0;for(g=0;g<D;g++)(64512&(u=E.charCodeAt(g)))==55296&&g+1<D&&(64512&(c=E.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(c-56320),g++),b+=u<128?1:u<2048?2:u<65536?3:4;for(v=s.uint8array?new Uint8Array(b):new Array(b),g=_=0;_<b;g++)(64512&(u=E.charCodeAt(g)))==55296&&g+1<D&&(64512&(c=E.charCodeAt(g+1)))==56320&&(u=65536+(u-55296<<10)+(c-56320),g++),u<128?v[_++]=u:(u<2048?v[_++]=192|u>>>6:(u<65536?v[_++]=224|u>>>12:(v[_++]=240|u>>>18,v[_++]=128|u>>>12&63),v[_++]=128|u>>>6&63),v[_++]=128|63&u);return v})(p)},i.utf8decode=function(p){return s.nodebuffer?n.transformTo("nodebuffer",p).toString("utf-8"):(function(E){var v,u,c,g,_=E.length,D=new Array(2*_);for(v=u=0;v<_;)if((c=E[v++])<128)D[u++]=c;else if(4<(g=f[c]))D[u++]=65533,v+=g-1;else{for(c&=g===2?31:g===3?15:7;1<g&&v<_;)c=c<<6|63&E[v++],g--;1<g?D[u++]=65533:c<65536?D[u++]=c:(c-=65536,D[u++]=55296|c>>10&1023,D[u++]=56320|1023&c)}return D.length!==u&&(D.subarray?D=D.subarray(0,u):D.length=u),n.applyFromCharCode(D)})(p=n.transformTo(s.uint8array?"uint8array":"array",p))},n.inherits(d,o),d.prototype.processChunk=function(p){var E=n.transformTo(s.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var v=E;(E=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),E.set(v,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var u=(function(g,_){var D;for((_=_||g.length)>g.length&&(_=g.length),D=_-1;0<=D&&(192&g[D])==128;)D--;return D<0||D===0?_:D+f[g[D]]>_?D:_})(E),c=E;u!==E.length&&(s.uint8array?(c=E.subarray(0,u),this.leftOver=E.subarray(u,E.length)):(c=E.slice(0,u),this.leftOver=E.slice(u,E.length))),this.push({data:i.utf8decode(c),meta:p.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,n.inherits(y,o),y.prototype.processChunk=function(p){this.push({data:i.utf8encode(p.data),meta:p.meta})},i.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),o=t("./external");function f(v){return v}function m(v,u){for(var c=0;c<v.length;++c)u[c]=255&v.charCodeAt(c);return u}t("setimmediate"),i.newBlob=function(v,u){i.checkSupport("blob");try{return new Blob([v],{type:u})}catch{try{var c=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return c.append(v),c.getBlob(u)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(v,u,c){var g=[],_=0,D=v.length;if(D<=c)return String.fromCharCode.apply(null,v);for(;_<D;)u==="array"||u==="nodebuffer"?g.push(String.fromCharCode.apply(null,v.slice(_,Math.min(_+c,D)))):g.push(String.fromCharCode.apply(null,v.subarray(_,Math.min(_+c,D)))),_+=c;return g.join("")},stringifyByChar:function(v){for(var u="",c=0;c<v.length;c++)u+=String.fromCharCode(v[c]);return u},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function y(v){var u=65536,c=i.getTypeOf(v),g=!0;if(c==="uint8array"?g=d.applyCanBeUsed.uint8array:c==="nodebuffer"&&(g=d.applyCanBeUsed.nodebuffer),g)for(;1<u;)try{return d.stringifyByChunk(v,c,u)}catch{u=Math.floor(u/2)}return d.stringifyByChar(v)}function p(v,u){for(var c=0;c<v.length;c++)u[c]=v[c];return u}i.applyFromCharCode=y;var E={};E.string={string:f,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return E.string.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:function(v){return m(v,a.allocBuffer(v.length))}},E.array={string:y,array:f,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(v)}},E.arraybuffer={string:function(v){return y(new Uint8Array(v))},array:function(v){return p(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:f,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return a.newBufferFrom(new Uint8Array(v))}},E.uint8array={string:y,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:f,nodebuffer:function(v){return a.newBufferFrom(v)}},E.nodebuffer={string:y,array:function(v){return p(v,new Array(v.length))},arraybuffer:function(v){return E.nodebuffer.uint8array(v).buffer},uint8array:function(v){return p(v,new Uint8Array(v.length))},nodebuffer:f},i.transformTo=function(v,u){if(u=u||"",!v)return u;i.checkSupport(v);var c=i.getTypeOf(u);return E[c][v](u)},i.resolve=function(v){for(var u=v.split("/"),c=[],g=0;g<u.length;g++){var _=u[g];_==="."||_===""&&g!==0&&g!==u.length-1||(_===".."?c.pop():c.push(_))}return c.join("/")},i.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":n.nodebuffer&&a.isBuffer(v)?"nodebuffer":n.uint8array&&v instanceof Uint8Array?"uint8array":n.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(v){if(!n[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(v){var u,c,g="";for(c=0;c<(v||"").length;c++)g+="\\x"+((u=v.charCodeAt(c))<16?"0":"")+u.toString(16).toUpperCase();return g},i.delay=function(v,u,c){setImmediate(function(){v.apply(c||null,u||[])})},i.inherits=function(v,u){function c(){}c.prototype=u.prototype,v.prototype=new c},i.extend=function(){var v,u,c={};for(v=0;v<arguments.length;v++)for(u in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],u)&&c[u]===void 0&&(c[u]=arguments[v][u]);return c},i.prepareContent=function(v,u,c,g,_){return o.Promise.resolve(u).then(function(D){return n.blob&&(D instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(D))!==-1)&&typeof FileReader<"u"?new o.Promise(function(b,S){var I=new FileReader;I.onload=function(R){b(R.target.result)},I.onerror=function(R){S(R.target.error)},I.readAsArrayBuffer(D)}):D}).then(function(D){var b=i.getTypeOf(D);return b?(b==="arraybuffer"?D=i.transformTo("uint8array",D):b==="string"&&(_?D=s.decode(D):c&&g!==!0&&(D=(function(S){return m(S,n.uint8array?new Uint8Array(S.length):new Array(S.length))})(D))),D):o.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),o=t("./zipEntry"),f=t("./support");function m(d){this.files=[],this.loadOptions=d}m.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(d)+")")}},isSignature:function(d,y){var p=this.reader.index;this.reader.setIndex(d);var E=this.reader.readString(4)===y;return this.reader.setIndex(p),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",p=s.transformTo(y,d);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,y,p,E=this.zip64EndOfCentralSize-44;0<E;)d=this.reader.readInt(2),y=this.reader.readInt(4),p=this.reader.readData(y),this.zip64ExtensibleData[d]={id:d,length:y,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,y;for(d=0;d<this.files.length;d++)y=this.files[d],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var y=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var E=y-p;if(0<E)this.isSignature(y,a.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(d){this.reader=n(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),o=t("./crc32"),f=t("./utf8"),m=t("./compressions"),d=t("./support");function y(p,E){this.options=p,this.loadOptions=E}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var E,v;if(p.skip(22),this.fileNameLength=p.readInt(2),v=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=(function(u){for(var c in m)if(Object.prototype.hasOwnProperty.call(m,c)&&m[c].magic===u)return m[c];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,E,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var E=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(E),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var E,v,u,c=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<c;)E=p.readInt(2),v=p.readInt(2),u=p.readData(v),this.extraFields[E]={id:E,length:v,value:u};p.setIndex(c)},handleUTF8:function(){var p=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var v=s.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var u=this.findExtraFieldUnicodeComment();if(u!==null)this.fileCommentStr=u;else{var c=s.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(c)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var E=n(p.value);return E.readInt(1)!==1||o(this.fileName)!==E.readInt(4)?null:f.utf8decode(E.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var E=n(p.value);return E.readInt(1)!==1||o(this.fileComment)!==E.readInt(4)?null:f.utf8decode(E.readData(p.length-5))}return null}},r.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){function n(E,v,u){this.name=E,this.dir=u.dir,this.date=u.date,this.comment=u.comment,this.unixPermissions=u.unixPermissions,this.dosPermissions=u.dosPermissions,this._data=v,this._dataBinary=u.binary,this.options={compression:u.compression,compressionOptions:u.compressionOptions}}var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),f=t("./compressedObject"),m=t("./stream/GenericWorker");n.prototype={internalStream:function(E){var v=null,u="string";try{if(!E)throw new Error("No output type specified.");var c=(u=E.toLowerCase())==="string"||u==="text";u!=="binarystring"&&u!=="text"||(u="string"),v=this._decompressWorker();var g=!this._dataBinary;g&&!c&&(v=v.pipe(new o.Utf8EncodeWorker)),!g&&c&&(v=v.pipe(new o.Utf8DecodeWorker))}catch(_){(v=new m("error")).error(_)}return new s(v,u,"")},async:function(E,v){return this.internalStream(E).accumulate(v)},nodeStream:function(E,v){return this.internalStream(E||"nodebuffer").toNodejsStream(v)},_compressWorker:function(E,v){if(this._data instanceof f&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var u=this._decompressWorker();return this._dataBinary||(u=u.pipe(new o.Utf8EncodeWorker)),f.createWorkerFrom(u,E,v)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)n.prototype[d[p]]=y;r.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(n){var s,a,o=n.MutationObserver||n.WebKitMutationObserver;if(o){var f=0,m=new o(E),d=n.document.createTextNode("");m.observe(d,{characterData:!0}),s=function(){d.data=f=++f%2}}else if(n.setImmediate||n.MessageChannel===void 0)s="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var v=n.document.createElement("script");v.onreadystatechange=function(){E(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},n.document.documentElement.appendChild(v)}:function(){setTimeout(E,0)};else{var y=new n.MessageChannel;y.port1.onmessage=E,s=function(){y.port2.postMessage(0)}}var p=[];function E(){var v,u;a=!0;for(var c=p.length;c;){for(u=p,p=[],v=-1;++v<c;)u[v]();c=p.length}a=!1}r.exports=function(v){p.push(v)!==1||a||s()}}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var n=t("immediate");function s(){}var a={},o=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function d(c){if(typeof c!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,c!==s&&v(this,c)}function y(c,g,_){this.promise=c,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function p(c,g,_){n(function(){var D;try{D=g(_)}catch(b){return a.reject(c,b)}D===c?a.reject(c,new TypeError("Cannot resolve promise with itself")):a.resolve(c,D)})}function E(c){var g=c&&c.then;if(c&&(typeof c=="object"||typeof c=="function")&&typeof g=="function")return function(){g.apply(c,arguments)}}function v(c,g){var _=!1;function D(I){_||(_=!0,a.reject(c,I))}function b(I){_||(_=!0,a.resolve(c,I))}var S=u(function(){g(b,D)});S.status==="error"&&D(S.value)}function u(c,g){var _={};try{_.value=c(g),_.status="success"}catch(D){_.status="error",_.value=D}return _}(r.exports=d).prototype.finally=function(c){if(typeof c!="function")return this;var g=this.constructor;return this.then(function(_){return g.resolve(c()).then(function(){return _})},function(_){return g.resolve(c()).then(function(){throw _})})},d.prototype.catch=function(c){return this.then(null,c)},d.prototype.then=function(c,g){if(typeof c!="function"&&this.state===f||typeof g!="function"&&this.state===o)return this;var _=new this.constructor(s);return this.state!==m?p(_,this.state===f?c:g,this.outcome):this.queue.push(new y(_,c,g)),_},y.prototype.callFulfilled=function(c){a.resolve(this.promise,c)},y.prototype.otherCallFulfilled=function(c){p(this.promise,this.onFulfilled,c)},y.prototype.callRejected=function(c){a.reject(this.promise,c)},y.prototype.otherCallRejected=function(c){p(this.promise,this.onRejected,c)},a.resolve=function(c,g){var _=u(E,g);if(_.status==="error")return a.reject(c,_.value);var D=_.value;if(D)v(c,D);else{c.state=f,c.outcome=g;for(var b=-1,S=c.queue.length;++b<S;)c.queue[b].callFulfilled(g)}return c},a.reject=function(c,g){c.state=o,c.outcome=g;for(var _=-1,D=c.queue.length;++_<D;)c.queue[_].callRejected(g);return c},d.resolve=function(c){return c instanceof this?c:a.resolve(new this(s),c)},d.reject=function(c){var g=new this(s);return a.reject(g,c)},d.all=function(c){var g=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=c.length,D=!1;if(!_)return this.resolve([]);for(var b=new Array(_),S=0,I=-1,R=new this(s);++I<_;)C(c[I],I);return R;function C(B,Y){g.resolve(B).then(function(k){b[Y]=k,++S!==_||D||(D=!0,a.resolve(R,b))},function(k){D||(D=!0,a.reject(R,k))})}},d.race=function(c){var g=this;if(Object.prototype.toString.call(c)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=c.length,D=!1;if(!_)return this.resolve([]);for(var b=-1,S=new this(s);++b<_;)I=c[b],g.resolve(I).then(function(R){D||(D=!0,a.resolve(S,R))},function(R){D||(D=!0,a.reject(S,R))});var I;return S}},{immediate:36}],38:[function(t,r,i){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),r.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),f=t("./zlib/zstream"),m=Object.prototype.toString,d=0,y=-1,p=0,E=8;function v(c){if(!(this instanceof v))return new v(c);this.options=s.assign({level:y,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},c||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var _=n.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(_!==d)throw new Error(o[_]);if(g.header&&n.deflateSetHeader(this.strm,g.header),g.dictionary){var D;if(D=typeof g.dictionary=="string"?a.string2buf(g.dictionary):m.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(_=n.deflateSetDictionary(this.strm,D))!==d)throw new Error(o[_]);this._dict_set=!0}}function u(c,g){var _=new v(g);if(_.push(c,!0),_.err)throw _.msg||o[_.err];return _.result}v.prototype.push=function(c,g){var _,D,b=this.strm,S=this.options.chunkSize;if(this.ended)return!1;D=g===~~g?g:g===!0?4:0,typeof c=="string"?b.input=a.string2buf(c):m.call(c)==="[object ArrayBuffer]"?b.input=new Uint8Array(c):b.input=c,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new s.Buf8(S),b.next_out=0,b.avail_out=S),(_=n.deflate(b,D))!==1&&_!==d)return this.onEnd(_),!(this.ended=!0);b.avail_out!==0&&(b.avail_in!==0||D!==4&&D!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(b.output,b.next_out))):this.onData(s.shrinkBuf(b.output,b.next_out)))}while((0<b.avail_in||b.avail_out===0)&&_!==1);return D===4?(_=n.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===d):D!==2||(this.onEnd(d),!(b.avail_out=0))},v.prototype.onData=function(c){this.chunks.push(c)},v.prototype.onEnd=function(c){c===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},i.Deflate=v,i.deflate=u,i.deflateRaw=function(c,g){return(g=g||{}).raw=!0,u(c,g)},i.gzip=function(c,g){return(g=g||{}).gzip=!0,u(c,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),f=t("./zlib/messages"),m=t("./zlib/zstream"),d=t("./zlib/gzheader"),y=Object.prototype.toString;function p(v){if(!(this instanceof p))return new p(v);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},v||{});var u=this.options;u.raw&&0<=u.windowBits&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),!(0<=u.windowBits&&u.windowBits<16)||v&&v.windowBits||(u.windowBits+=32),15<u.windowBits&&u.windowBits<48&&(15&u.windowBits)==0&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var c=n.inflateInit2(this.strm,u.windowBits);if(c!==o.Z_OK)throw new Error(f[c]);this.header=new d,n.inflateGetHeader(this.strm,this.header)}function E(v,u){var c=new p(u);if(c.push(v,!0),c.err)throw c.msg||f[c.err];return c.result}p.prototype.push=function(v,u){var c,g,_,D,b,S,I=this.strm,R=this.options.chunkSize,C=this.options.dictionary,B=!1;if(this.ended)return!1;g=u===~~u?u:u===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof v=="string"?I.input=a.binstring2buf(v):y.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new s.Buf8(R),I.next_out=0,I.avail_out=R),(c=n.inflate(I,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&C&&(S=typeof C=="string"?a.string2buf(C):y.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,c=n.inflateSetDictionary(this.strm,S)),c===o.Z_BUF_ERROR&&B===!0&&(c=o.Z_OK,B=!1),c!==o.Z_STREAM_END&&c!==o.Z_OK)return this.onEnd(c),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&c!==o.Z_STREAM_END&&(I.avail_in!==0||g!==o.Z_FINISH&&g!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(I.output,I.next_out),D=I.next_out-_,b=a.buf2string(I.output,_),I.next_out=D,I.avail_out=R-D,D&&s.arraySet(I.output,I.output,_,D,0),this.onData(b)):this.onData(s.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(B=!0)}while((0<I.avail_in||I.avail_out===0)&&c!==o.Z_STREAM_END);return c===o.Z_STREAM_END&&(g=o.Z_FINISH),g===o.Z_FINISH?(c=n.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===o.Z_OK):g!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(I.avail_out=0))},p.prototype.onData=function(v){this.chunks.push(v)},p.prototype.onEnd=function(v){v===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Inflate=p,i.inflate=E,i.inflateRaw=function(v,u){return(u=u||{}).raw=!0,E(v,u)},i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(o){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var d in m)m.hasOwnProperty(d)&&(o[d]=m[d])}}return o},i.shrinkBuf=function(o,f){return o.length===f?o:o.subarray?o.subarray(0,f):(o.length=f,o)};var s={arraySet:function(o,f,m,d,y){if(f.subarray&&o.subarray)o.set(f.subarray(m,m+d),y);else for(var p=0;p<d;p++)o[y+p]=f[m+p]},flattenChunks:function(o){var f,m,d,y,p,E;for(f=d=0,m=o.length;f<m;f++)d+=o[f].length;for(E=new Uint8Array(d),f=y=0,m=o.length;f<m;f++)p=o[f],E.set(p,y),y+=p.length;return E}},a={arraySet:function(o,f,m,d,y){for(var p=0;p<d;p++)o[y+p]=f[m+p]},flattenChunks:function(o){return[].concat.apply([],o)}};i.setTyped=function(o){o?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],42:[function(t,r,i){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var o=new n.Buf8(256),f=0;f<256;f++)o[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(d,y){if(y<65537&&(d.subarray&&a||!d.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(d,y));for(var p="",E=0;E<y;E++)p+=String.fromCharCode(d[E]);return p}o[254]=o[254]=1,i.string2buf=function(d){var y,p,E,v,u,c=d.length,g=0;for(v=0;v<c;v++)(64512&(p=d.charCodeAt(v)))==55296&&v+1<c&&(64512&(E=d.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),v++),g+=p<128?1:p<2048?2:p<65536?3:4;for(y=new n.Buf8(g),v=u=0;u<g;v++)(64512&(p=d.charCodeAt(v)))==55296&&v+1<c&&(64512&(E=d.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(E-56320),v++),p<128?y[u++]=p:(p<2048?y[u++]=192|p>>>6:(p<65536?y[u++]=224|p>>>12:(y[u++]=240|p>>>18,y[u++]=128|p>>>12&63),y[u++]=128|p>>>6&63),y[u++]=128|63&p);return y},i.buf2binstring=function(d){return m(d,d.length)},i.binstring2buf=function(d){for(var y=new n.Buf8(d.length),p=0,E=y.length;p<E;p++)y[p]=d.charCodeAt(p);return y},i.buf2string=function(d,y){var p,E,v,u,c=y||d.length,g=new Array(2*c);for(p=E=0;p<c;)if((v=d[p++])<128)g[E++]=v;else if(4<(u=o[v]))g[E++]=65533,p+=u-1;else{for(v&=u===2?31:u===3?15:7;1<u&&p<c;)v=v<<6|63&d[p++],u--;1<u?g[E++]=65533:v<65536?g[E++]=v:(v-=65536,g[E++]=55296|v>>10&1023,g[E++]=56320|1023&v)}return m(g,E)},i.utf8border=function(d,y){var p;for((y=y||d.length)>d.length&&(y=d.length),p=y-1;0<=p&&(192&d[p])==128;)p--;return p<0||p===0?y:p+o[d[p]]>y?p:y}},{"./common":41}],43:[function(t,r,i){r.exports=function(n,s,a,o){for(var f=65535&n|0,m=n>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;m=m+(f=f+s[o++]|0)|0,--d;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){var n=(function(){for(var s,a=[],o=0;o<256;o++){s=o;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;a[o]=s}return a})();r.exports=function(s,a,o,f){var m=n,d=f+o;s^=-1;for(var y=f;y<d;y++)s=s>>>8^m[255&(s^a[y])];return-1^s}},{}],46:[function(t,r,i){var n,s=t("../utils/common"),a=t("./trees"),o=t("./adler32"),f=t("./crc32"),m=t("./messages"),d=0,y=4,p=0,E=-2,v=-1,u=4,c=2,g=8,_=9,D=286,b=30,S=19,I=2*D+1,R=15,C=3,B=258,Y=B+C+1,k=42,M=113,x=1,V=2,ce=3,$=4;function ae(w,oe){return w.msg=m[oe],oe}function re(w){return(w<<1)-(4<w?9:0)}function be(w){for(var oe=w.length;0<=--oe;)w[oe]=0}function W(w){var oe=w.state,ie=oe.pending;ie>w.avail_out&&(ie=w.avail_out),ie!==0&&(s.arraySet(w.output,oe.pending_buf,oe.pending_out,ie,w.next_out),w.next_out+=ie,oe.pending_out+=ie,w.total_out+=ie,w.avail_out-=ie,oe.pending-=ie,oe.pending===0&&(oe.pending_out=0))}function H(w,oe){a._tr_flush_block(w,0<=w.block_start?w.block_start:-1,w.strstart-w.block_start,oe),w.block_start=w.strstart,W(w.strm)}function _e(w,oe){w.pending_buf[w.pending++]=oe}function fe(w,oe){w.pending_buf[w.pending++]=oe>>>8&255,w.pending_buf[w.pending++]=255&oe}function pe(w,oe){var ie,F,z=w.max_chain_length,X=w.strstart,he=w.prev_length,se=w.nice_match,K=w.strstart>w.w_size-Y?w.strstart-(w.w_size-Y):0,ue=w.window,Ae=w.w_mask,ye=w.prev,Re=w.strstart+B,Me=ue[X+he-1],qe=ue[X+he];w.prev_length>=w.good_match&&(z>>=2),se>w.lookahead&&(se=w.lookahead);do if(ue[(ie=oe)+he]===qe&&ue[ie+he-1]===Me&&ue[ie]===ue[X]&&ue[++ie]===ue[X+1]){X+=2,ie++;do;while(ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&ue[++X]===ue[++ie]&&X<Re);if(F=B-(Re-X),X=Re-B,he<F){if(w.match_start=oe,se<=(he=F))break;Me=ue[X+he-1],qe=ue[X+he]}}while((oe=ye[oe&Ae])>K&&--z!=0);return he<=w.lookahead?he:w.lookahead}function ze(w){var oe,ie,F,z,X,he,se,K,ue,Ae,ye=w.w_size;do{if(z=w.window_size-w.lookahead-w.strstart,w.strstart>=ye+(ye-Y)){for(s.arraySet(w.window,w.window,ye,ye,0),w.match_start-=ye,w.strstart-=ye,w.block_start-=ye,oe=ie=w.hash_size;F=w.head[--oe],w.head[oe]=ye<=F?F-ye:0,--ie;);for(oe=ie=ye;F=w.prev[--oe],w.prev[oe]=ye<=F?F-ye:0,--ie;);z+=ye}if(w.strm.avail_in===0)break;if(he=w.strm,se=w.window,K=w.strstart+w.lookahead,ue=z,Ae=void 0,Ae=he.avail_in,ue<Ae&&(Ae=ue),ie=Ae===0?0:(he.avail_in-=Ae,s.arraySet(se,he.input,he.next_in,Ae,K),he.state.wrap===1?he.adler=o(he.adler,se,Ae,K):he.state.wrap===2&&(he.adler=f(he.adler,se,Ae,K)),he.next_in+=Ae,he.total_in+=Ae,Ae),w.lookahead+=ie,w.lookahead+w.insert>=C)for(X=w.strstart-w.insert,w.ins_h=w.window[X],w.ins_h=(w.ins_h<<w.hash_shift^w.window[X+1])&w.hash_mask;w.insert&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[X+C-1])&w.hash_mask,w.prev[X&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=X,X++,w.insert--,!(w.lookahead+w.insert<C)););}while(w.lookahead<Y&&w.strm.avail_in!==0)}function Pe(w,oe){for(var ie,F;;){if(w.lookahead<Y){if(ze(w),w.lookahead<Y&&oe===d)return x;if(w.lookahead===0)break}if(ie=0,w.lookahead>=C&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+C-1])&w.hash_mask,ie=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),ie!==0&&w.strstart-ie<=w.w_size-Y&&(w.match_length=pe(w,ie)),w.match_length>=C)if(F=a._tr_tally(w,w.strstart-w.match_start,w.match_length-C),w.lookahead-=w.match_length,w.match_length<=w.max_lazy_match&&w.lookahead>=C){for(w.match_length--;w.strstart++,w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+C-1])&w.hash_mask,ie=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart,--w.match_length!=0;);w.strstart++}else w.strstart+=w.match_length,w.match_length=0,w.ins_h=w.window[w.strstart],w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+1])&w.hash_mask;else F=a._tr_tally(w,0,w.window[w.strstart]),w.lookahead--,w.strstart++;if(F&&(H(w,!1),w.strm.avail_out===0))return x}return w.insert=w.strstart<C-1?w.strstart:C-1,oe===y?(H(w,!0),w.strm.avail_out===0?ce:$):w.last_lit&&(H(w,!1),w.strm.avail_out===0)?x:V}function xe(w,oe){for(var ie,F,z;;){if(w.lookahead<Y){if(ze(w),w.lookahead<Y&&oe===d)return x;if(w.lookahead===0)break}if(ie=0,w.lookahead>=C&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+C-1])&w.hash_mask,ie=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),w.prev_length=w.match_length,w.prev_match=w.match_start,w.match_length=C-1,ie!==0&&w.prev_length<w.max_lazy_match&&w.strstart-ie<=w.w_size-Y&&(w.match_length=pe(w,ie),w.match_length<=5&&(w.strategy===1||w.match_length===C&&4096<w.strstart-w.match_start)&&(w.match_length=C-1)),w.prev_length>=C&&w.match_length<=w.prev_length){for(z=w.strstart+w.lookahead-C,F=a._tr_tally(w,w.strstart-1-w.prev_match,w.prev_length-C),w.lookahead-=w.prev_length-1,w.prev_length-=2;++w.strstart<=z&&(w.ins_h=(w.ins_h<<w.hash_shift^w.window[w.strstart+C-1])&w.hash_mask,ie=w.prev[w.strstart&w.w_mask]=w.head[w.ins_h],w.head[w.ins_h]=w.strstart),--w.prev_length!=0;);if(w.match_available=0,w.match_length=C-1,w.strstart++,F&&(H(w,!1),w.strm.avail_out===0))return x}else if(w.match_available){if((F=a._tr_tally(w,0,w.window[w.strstart-1]))&&H(w,!1),w.strstart++,w.lookahead--,w.strm.avail_out===0)return x}else w.match_available=1,w.strstart++,w.lookahead--}return w.match_available&&(F=a._tr_tally(w,0,w.window[w.strstart-1]),w.match_available=0),w.insert=w.strstart<C-1?w.strstart:C-1,oe===y?(H(w,!0),w.strm.avail_out===0?ce:$):w.last_lit&&(H(w,!1),w.strm.avail_out===0)?x:V}function Oe(w,oe,ie,F,z){this.good_length=w,this.max_lazy=oe,this.nice_length=ie,this.max_chain=F,this.func=z}function Ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*I),this.dyn_dtree=new s.Buf16(2*(2*b+1)),this.bl_tree=new s.Buf16(2*(2*S+1)),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(R+1),this.heap=new s.Buf16(2*D+1),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*D+1),be(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ne(w){var oe;return w&&w.state?(w.total_in=w.total_out=0,w.data_type=c,(oe=w.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?k:M,w.adler=oe.wrap===2?0:1,oe.last_flush=d,a._tr_init(oe),p):ae(w,E)}function Fe(w){var oe=Ne(w);return oe===p&&(function(ie){ie.window_size=2*ie.w_size,be(ie.head),ie.max_lazy_match=n[ie.level].max_lazy,ie.good_match=n[ie.level].good_length,ie.nice_match=n[ie.level].nice_length,ie.max_chain_length=n[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=C-1,ie.match_available=0,ie.ins_h=0})(w.state),oe}function Le(w,oe,ie,F,z,X){if(!w)return E;var he=1;if(oe===v&&(oe=6),F<0?(he=0,F=-F):15<F&&(he=2,F-=16),z<1||_<z||ie!==g||F<8||15<F||oe<0||9<oe||X<0||u<X)return ae(w,E);F===8&&(F=9);var se=new Ue;return(w.state=se).strm=w,se.wrap=he,se.gzhead=null,se.w_bits=F,se.w_size=1<<se.w_bits,se.w_mask=se.w_size-1,se.hash_bits=z+7,se.hash_size=1<<se.hash_bits,se.hash_mask=se.hash_size-1,se.hash_shift=~~((se.hash_bits+C-1)/C),se.window=new s.Buf8(2*se.w_size),se.head=new s.Buf16(se.hash_size),se.prev=new s.Buf16(se.w_size),se.lit_bufsize=1<<z+6,se.pending_buf_size=4*se.lit_bufsize,se.pending_buf=new s.Buf8(se.pending_buf_size),se.d_buf=1*se.lit_bufsize,se.l_buf=3*se.lit_bufsize,se.level=oe,se.strategy=X,se.method=ie,Fe(w)}n=[new Oe(0,0,0,0,function(w,oe){var ie=65535;for(ie>w.pending_buf_size-5&&(ie=w.pending_buf_size-5);;){if(w.lookahead<=1){if(ze(w),w.lookahead===0&&oe===d)return x;if(w.lookahead===0)break}w.strstart+=w.lookahead,w.lookahead=0;var F=w.block_start+ie;if((w.strstart===0||w.strstart>=F)&&(w.lookahead=w.strstart-F,w.strstart=F,H(w,!1),w.strm.avail_out===0)||w.strstart-w.block_start>=w.w_size-Y&&(H(w,!1),w.strm.avail_out===0))return x}return w.insert=0,oe===y?(H(w,!0),w.strm.avail_out===0?ce:$):(w.strstart>w.block_start&&(H(w,!1),w.strm.avail_out),x)}),new Oe(4,4,8,4,Pe),new Oe(4,5,16,8,Pe),new Oe(4,6,32,32,Pe),new Oe(4,4,16,16,xe),new Oe(8,16,32,32,xe),new Oe(8,16,128,128,xe),new Oe(8,32,128,256,xe),new Oe(32,128,258,1024,xe),new Oe(32,258,258,4096,xe)],i.deflateInit=function(w,oe){return Le(w,oe,g,15,8,0)},i.deflateInit2=Le,i.deflateReset=Fe,i.deflateResetKeep=Ne,i.deflateSetHeader=function(w,oe){return w&&w.state?w.state.wrap!==2?E:(w.state.gzhead=oe,p):E},i.deflate=function(w,oe){var ie,F,z,X;if(!w||!w.state||5<oe||oe<0)return w?ae(w,E):E;if(F=w.state,!w.output||!w.input&&w.avail_in!==0||F.status===666&&oe!==y)return ae(w,w.avail_out===0?-5:E);if(F.strm=w,ie=F.last_flush,F.last_flush=oe,F.status===k)if(F.wrap===2)w.adler=0,_e(F,31),_e(F,139),_e(F,8),F.gzhead?(_e(F,(F.gzhead.text?1:0)+(F.gzhead.hcrc?2:0)+(F.gzhead.extra?4:0)+(F.gzhead.name?8:0)+(F.gzhead.comment?16:0)),_e(F,255&F.gzhead.time),_e(F,F.gzhead.time>>8&255),_e(F,F.gzhead.time>>16&255),_e(F,F.gzhead.time>>24&255),_e(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),_e(F,255&F.gzhead.os),F.gzhead.extra&&F.gzhead.extra.length&&(_e(F,255&F.gzhead.extra.length),_e(F,F.gzhead.extra.length>>8&255)),F.gzhead.hcrc&&(w.adler=f(w.adler,F.pending_buf,F.pending,0)),F.gzindex=0,F.status=69):(_e(F,0),_e(F,0),_e(F,0),_e(F,0),_e(F,0),_e(F,F.level===9?2:2<=F.strategy||F.level<2?4:0),_e(F,3),F.status=M);else{var he=g+(F.w_bits-8<<4)<<8;he|=(2<=F.strategy||F.level<2?0:F.level<6?1:F.level===6?2:3)<<6,F.strstart!==0&&(he|=32),he+=31-he%31,F.status=M,fe(F,he),F.strstart!==0&&(fe(F,w.adler>>>16),fe(F,65535&w.adler)),w.adler=1}if(F.status===69)if(F.gzhead.extra){for(z=F.pending;F.gzindex<(65535&F.gzhead.extra.length)&&(F.pending!==F.pending_buf_size||(F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),W(w),z=F.pending,F.pending!==F.pending_buf_size));)_e(F,255&F.gzhead.extra[F.gzindex]),F.gzindex++;F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),F.gzindex===F.gzhead.extra.length&&(F.gzindex=0,F.status=73)}else F.status=73;if(F.status===73)if(F.gzhead.name){z=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),W(w),z=F.pending,F.pending===F.pending_buf_size)){X=1;break}X=F.gzindex<F.gzhead.name.length?255&F.gzhead.name.charCodeAt(F.gzindex++):0,_e(F,X)}while(X!==0);F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),X===0&&(F.gzindex=0,F.status=91)}else F.status=91;if(F.status===91)if(F.gzhead.comment){z=F.pending;do{if(F.pending===F.pending_buf_size&&(F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),W(w),z=F.pending,F.pending===F.pending_buf_size)){X=1;break}X=F.gzindex<F.gzhead.comment.length?255&F.gzhead.comment.charCodeAt(F.gzindex++):0,_e(F,X)}while(X!==0);F.gzhead.hcrc&&F.pending>z&&(w.adler=f(w.adler,F.pending_buf,F.pending-z,z)),X===0&&(F.status=103)}else F.status=103;if(F.status===103&&(F.gzhead.hcrc?(F.pending+2>F.pending_buf_size&&W(w),F.pending+2<=F.pending_buf_size&&(_e(F,255&w.adler),_e(F,w.adler>>8&255),w.adler=0,F.status=M)):F.status=M),F.pending!==0){if(W(w),w.avail_out===0)return F.last_flush=-1,p}else if(w.avail_in===0&&re(oe)<=re(ie)&&oe!==y)return ae(w,-5);if(F.status===666&&w.avail_in!==0)return ae(w,-5);if(w.avail_in!==0||F.lookahead!==0||oe!==d&&F.status!==666){var se=F.strategy===2?(function(K,ue){for(var Ae;;){if(K.lookahead===0&&(ze(K),K.lookahead===0)){if(ue===d)return x;break}if(K.match_length=0,Ae=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++,Ae&&(H(K,!1),K.strm.avail_out===0))return x}return K.insert=0,ue===y?(H(K,!0),K.strm.avail_out===0?ce:$):K.last_lit&&(H(K,!1),K.strm.avail_out===0)?x:V})(F,oe):F.strategy===3?(function(K,ue){for(var Ae,ye,Re,Me,qe=K.window;;){if(K.lookahead<=B){if(ze(K),K.lookahead<=B&&ue===d)return x;if(K.lookahead===0)break}if(K.match_length=0,K.lookahead>=C&&0<K.strstart&&(ye=qe[Re=K.strstart-1])===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]){Me=K.strstart+B;do;while(ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&ye===qe[++Re]&&Re<Me);K.match_length=B-(Me-Re),K.match_length>K.lookahead&&(K.match_length=K.lookahead)}if(K.match_length>=C?(Ae=a._tr_tally(K,1,K.match_length-C),K.lookahead-=K.match_length,K.strstart+=K.match_length,K.match_length=0):(Ae=a._tr_tally(K,0,K.window[K.strstart]),K.lookahead--,K.strstart++),Ae&&(H(K,!1),K.strm.avail_out===0))return x}return K.insert=0,ue===y?(H(K,!0),K.strm.avail_out===0?ce:$):K.last_lit&&(H(K,!1),K.strm.avail_out===0)?x:V})(F,oe):n[F.level].func(F,oe);if(se!==ce&&se!==$||(F.status=666),se===x||se===ce)return w.avail_out===0&&(F.last_flush=-1),p;if(se===V&&(oe===1?a._tr_align(F):oe!==5&&(a._tr_stored_block(F,0,0,!1),oe===3&&(be(F.head),F.lookahead===0&&(F.strstart=0,F.block_start=0,F.insert=0))),W(w),w.avail_out===0))return F.last_flush=-1,p}return oe!==y?p:F.wrap<=0?1:(F.wrap===2?(_e(F,255&w.adler),_e(F,w.adler>>8&255),_e(F,w.adler>>16&255),_e(F,w.adler>>24&255),_e(F,255&w.total_in),_e(F,w.total_in>>8&255),_e(F,w.total_in>>16&255),_e(F,w.total_in>>24&255)):(fe(F,w.adler>>>16),fe(F,65535&w.adler)),W(w),0<F.wrap&&(F.wrap=-F.wrap),F.pending!==0?p:1)},i.deflateEnd=function(w){var oe;return w&&w.state?(oe=w.state.status)!==k&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==M&&oe!==666?ae(w,E):(w.state=null,oe===M?ae(w,-3):p):E},i.deflateSetDictionary=function(w,oe){var ie,F,z,X,he,se,K,ue,Ae=oe.length;if(!w||!w.state||(X=(ie=w.state).wrap)===2||X===1&&ie.status!==k||ie.lookahead)return E;for(X===1&&(w.adler=o(w.adler,oe,Ae,0)),ie.wrap=0,Ae>=ie.w_size&&(X===0&&(be(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0),ue=new s.Buf8(ie.w_size),s.arraySet(ue,oe,Ae-ie.w_size,ie.w_size,0),oe=ue,Ae=ie.w_size),he=w.avail_in,se=w.next_in,K=w.input,w.avail_in=Ae,w.next_in=0,w.input=oe,ze(ie);ie.lookahead>=C;){for(F=ie.strstart,z=ie.lookahead-(C-1);ie.ins_h=(ie.ins_h<<ie.hash_shift^ie.window[F+C-1])&ie.hash_mask,ie.prev[F&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=F,F++,--z;);ie.strstart=F,ie.lookahead=C-1,ze(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=C-1,ie.match_available=0,w.next_in=se,w.input=K,w.avail_in=he,ie.wrap=X,p},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,r,i){r.exports=function(n,s){var a,o,f,m,d,y,p,E,v,u,c,g,_,D,b,S,I,R,C,B,Y,k,M,x,V;a=n.state,o=n.next_in,x=n.input,f=o+(n.avail_in-5),m=n.next_out,V=n.output,d=m-(s-n.avail_out),y=m+(n.avail_out-257),p=a.dmax,E=a.wsize,v=a.whave,u=a.wnext,c=a.window,g=a.hold,_=a.bits,D=a.lencode,b=a.distcode,S=(1<<a.lenbits)-1,I=(1<<a.distbits)-1;e:do{_<15&&(g+=x[o++]<<_,_+=8,g+=x[o++]<<_,_+=8),R=D[g&S];t:for(;;){if(g>>>=C=R>>>24,_-=C,(C=R>>>16&255)===0)V[m++]=65535&R;else{if(!(16&C)){if((64&C)==0){R=D[(65535&R)+(g&(1<<C)-1)];continue t}if(32&C){a.mode=12;break e}n.msg="invalid literal/length code",a.mode=30;break e}B=65535&R,(C&=15)&&(_<C&&(g+=x[o++]<<_,_+=8),B+=g&(1<<C)-1,g>>>=C,_-=C),_<15&&(g+=x[o++]<<_,_+=8,g+=x[o++]<<_,_+=8),R=b[g&I];r:for(;;){if(g>>>=C=R>>>24,_-=C,!(16&(C=R>>>16&255))){if((64&C)==0){R=b[(65535&R)+(g&(1<<C)-1)];continue r}n.msg="invalid distance code",a.mode=30;break e}if(Y=65535&R,_<(C&=15)&&(g+=x[o++]<<_,(_+=8)<C&&(g+=x[o++]<<_,_+=8)),p<(Y+=g&(1<<C)-1)){n.msg="invalid distance too far back",a.mode=30;break e}if(g>>>=C,_-=C,(C=m-d)<Y){if(v<(C=Y-C)&&a.sane){n.msg="invalid distance too far back",a.mode=30;break e}if(M=c,(k=0)===u){if(k+=E-C,C<B){for(B-=C;V[m++]=c[k++],--C;);k=m-Y,M=V}}else if(u<C){if(k+=E+u-C,(C-=u)<B){for(B-=C;V[m++]=c[k++],--C;);if(k=0,u<B){for(B-=C=u;V[m++]=c[k++],--C;);k=m-Y,M=V}}}else if(k+=u-C,C<B){for(B-=C;V[m++]=c[k++],--C;);k=m-Y,M=V}for(;2<B;)V[m++]=M[k++],V[m++]=M[k++],V[m++]=M[k++],B-=3;B&&(V[m++]=M[k++],1<B&&(V[m++]=M[k++]))}else{for(k=m-Y;V[m++]=V[k++],V[m++]=V[k++],V[m++]=V[k++],2<(B-=3););B&&(V[m++]=V[k++],1<B&&(V[m++]=V[k++]))}break}}break}}while(o<f&&m<y);o-=B=_>>3,g&=(1<<(_-=B<<3))-1,n.next_in=o,n.next_out=m,n.avail_in=o<f?f-o+5:5-(o-f),n.avail_out=m<y?y-m+257:257-(m-y),a.hold=g,a.bits=_}},{}],49:[function(t,r,i){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),o=t("./inffast"),f=t("./inftrees"),m=1,d=2,y=0,p=-2,E=1,v=852,u=592;function c(k){return(k>>>24&255)+(k>>>8&65280)+((65280&k)<<8)+((255&k)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(k){var M;return k&&k.state?(M=k.state,k.total_in=k.total_out=M.total=0,k.msg="",M.wrap&&(k.adler=1&M.wrap),M.mode=E,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new n.Buf32(v),M.distcode=M.distdyn=new n.Buf32(u),M.sane=1,M.back=-1,y):p}function D(k){var M;return k&&k.state?((M=k.state).wsize=0,M.whave=0,M.wnext=0,_(k)):p}function b(k,M){var x,V;return k&&k.state?(V=k.state,M<0?(x=0,M=-M):(x=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?p:(V.window!==null&&V.wbits!==M&&(V.window=null),V.wrap=x,V.wbits=M,D(k))):p}function S(k,M){var x,V;return k?(V=new g,(k.state=V).window=null,(x=b(k,M))!==y&&(k.state=null),x):p}var I,R,C=!0;function B(k){if(C){var M;for(I=new n.Buf32(512),R=new n.Buf32(32),M=0;M<144;)k.lens[M++]=8;for(;M<256;)k.lens[M++]=9;for(;M<280;)k.lens[M++]=7;for(;M<288;)k.lens[M++]=8;for(f(m,k.lens,0,288,I,0,k.work,{bits:9}),M=0;M<32;)k.lens[M++]=5;f(d,k.lens,0,32,R,0,k.work,{bits:5}),C=!1}k.lencode=I,k.lenbits=9,k.distcode=R,k.distbits=5}function Y(k,M,x,V){var ce,$=k.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new n.Buf8($.wsize)),V>=$.wsize?(n.arraySet($.window,M,x-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(V<(ce=$.wsize-$.wnext)&&(ce=V),n.arraySet($.window,M,x-V,ce,$.wnext),(V-=ce)?(n.arraySet($.window,M,x-V,V,0),$.wnext=V,$.whave=$.wsize):($.wnext+=ce,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=ce))),0}i.inflateReset=D,i.inflateReset2=b,i.inflateResetKeep=_,i.inflateInit=function(k){return S(k,15)},i.inflateInit2=S,i.inflate=function(k,M){var x,V,ce,$,ae,re,be,W,H,_e,fe,pe,ze,Pe,xe,Oe,Ue,Ne,Fe,Le,w,oe,ie,F,z=0,X=new n.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&k.avail_in!==0)return p;(x=k.state).mode===12&&(x.mode=13),ae=k.next_out,ce=k.output,be=k.avail_out,$=k.next_in,V=k.input,re=k.avail_in,W=x.hold,H=x.bits,_e=re,fe=be,oe=y;e:for(;;)switch(x.mode){case E:if(x.wrap===0){x.mode=13;break}for(;H<16;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(2&x.wrap&&W===35615){X[x.check=0]=255&W,X[1]=W>>>8&255,x.check=a(x.check,X,2,0),H=W=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&W)<<8)+(W>>8))%31){k.msg="incorrect header check",x.mode=30;break}if((15&W)!=8){k.msg="unknown compression method",x.mode=30;break}if(H-=4,w=8+(15&(W>>>=4)),x.wbits===0)x.wbits=w;else if(w>x.wbits){k.msg="invalid window size",x.mode=30;break}x.dmax=1<<w,k.adler=x.check=1,x.mode=512&W?10:12,H=W=0;break;case 2:for(;H<16;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(x.flags=W,(255&x.flags)!=8){k.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){k.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=W>>8&1),512&x.flags&&(X[0]=255&W,X[1]=W>>>8&255,x.check=a(x.check,X,2,0)),H=W=0,x.mode=3;case 3:for(;H<32;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.head&&(x.head.time=W),512&x.flags&&(X[0]=255&W,X[1]=W>>>8&255,X[2]=W>>>16&255,X[3]=W>>>24&255,x.check=a(x.check,X,4,0)),H=W=0,x.mode=4;case 4:for(;H<16;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.head&&(x.head.xflags=255&W,x.head.os=W>>8),512&x.flags&&(X[0]=255&W,X[1]=W>>>8&255,x.check=a(x.check,X,2,0)),H=W=0,x.mode=5;case 5:if(1024&x.flags){for(;H<16;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.length=W,x.head&&(x.head.extra_len=W),512&x.flags&&(X[0]=255&W,X[1]=W>>>8&255,x.check=a(x.check,X,2,0)),H=W=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(re<(pe=x.length)&&(pe=re),pe&&(x.head&&(w=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),n.arraySet(x.head.extra,V,$,pe,w)),512&x.flags&&(x.check=a(x.check,V,pe,$)),re-=pe,$+=pe,x.length-=pe),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(re===0)break e;for(pe=0;w=V[$+pe++],x.head&&w&&x.length<65536&&(x.head.name+=String.fromCharCode(w)),w&&pe<re;);if(512&x.flags&&(x.check=a(x.check,V,pe,$)),re-=pe,$+=pe,w)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(re===0)break e;for(pe=0;w=V[$+pe++],x.head&&w&&x.length<65536&&(x.head.comment+=String.fromCharCode(w)),w&&pe<re;);if(512&x.flags&&(x.check=a(x.check,V,pe,$)),re-=pe,$+=pe,w)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;H<16;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(W!==(65535&x.check)){k.msg="header crc mismatch",x.mode=30;break}H=W=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),k.adler=x.check=0,x.mode=12;break;case 10:for(;H<32;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}k.adler=x.check=c(W),H=W=0,x.mode=11;case 11:if(x.havedict===0)return k.next_out=ae,k.avail_out=be,k.next_in=$,k.avail_in=re,x.hold=W,x.bits=H,2;k.adler=x.check=1,x.mode=12;case 12:if(M===5||M===6)break e;case 13:if(x.last){W>>>=7&H,H-=7&H,x.mode=27;break}for(;H<3;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}switch(x.last=1&W,H-=1,3&(W>>>=1)){case 0:x.mode=14;break;case 1:if(B(x),x.mode=20,M!==6)break;W>>>=2,H-=2;break e;case 2:x.mode=17;break;case 3:k.msg="invalid block type",x.mode=30}W>>>=2,H-=2;break;case 14:for(W>>>=7&H,H-=7&H;H<32;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if((65535&W)!=(W>>>16^65535)){k.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&W,H=W=0,x.mode=15,M===6)break e;case 15:x.mode=16;case 16:if(pe=x.length){if(re<pe&&(pe=re),be<pe&&(pe=be),pe===0)break e;n.arraySet(ce,V,$,pe,ae),re-=pe,$+=pe,be-=pe,ae+=pe,x.length-=pe;break}x.mode=12;break;case 17:for(;H<14;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(x.nlen=257+(31&W),W>>>=5,H-=5,x.ndist=1+(31&W),W>>>=5,H-=5,x.ncode=4+(15&W),W>>>=4,H-=4,286<x.nlen||30<x.ndist){k.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;H<3;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.lens[he[x.have++]]=7&W,W>>>=3,H-=3}for(;x.have<19;)x.lens[he[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,ie={bits:x.lenbits},oe=f(0,x.lens,0,19,x.lencode,0,x.work,ie),x.lenbits=ie.bits,oe){k.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;Oe=(z=x.lencode[W&(1<<x.lenbits)-1])>>>16&255,Ue=65535&z,!((xe=z>>>24)<=H);){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(Ue<16)W>>>=xe,H-=xe,x.lens[x.have++]=Ue;else{if(Ue===16){for(F=xe+2;H<F;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(W>>>=xe,H-=xe,x.have===0){k.msg="invalid bit length repeat",x.mode=30;break}w=x.lens[x.have-1],pe=3+(3&W),W>>>=2,H-=2}else if(Ue===17){for(F=xe+3;H<F;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}H-=xe,w=0,pe=3+(7&(W>>>=xe)),W>>>=3,H-=3}else{for(F=xe+7;H<F;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}H-=xe,w=0,pe=11+(127&(W>>>=xe)),W>>>=7,H-=7}if(x.have+pe>x.nlen+x.ndist){k.msg="invalid bit length repeat",x.mode=30;break}for(;pe--;)x.lens[x.have++]=w}}if(x.mode===30)break;if(x.lens[256]===0){k.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,ie={bits:x.lenbits},oe=f(m,x.lens,0,x.nlen,x.lencode,0,x.work,ie),x.lenbits=ie.bits,oe){k.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,ie={bits:x.distbits},oe=f(d,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,ie),x.distbits=ie.bits,oe){k.msg="invalid distances set",x.mode=30;break}if(x.mode=20,M===6)break e;case 20:x.mode=21;case 21:if(6<=re&&258<=be){k.next_out=ae,k.avail_out=be,k.next_in=$,k.avail_in=re,x.hold=W,x.bits=H,o(k,fe),ae=k.next_out,ce=k.output,be=k.avail_out,$=k.next_in,V=k.input,re=k.avail_in,W=x.hold,H=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;Oe=(z=x.lencode[W&(1<<x.lenbits)-1])>>>16&255,Ue=65535&z,!((xe=z>>>24)<=H);){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(Oe&&(240&Oe)==0){for(Ne=xe,Fe=Oe,Le=Ue;Oe=(z=x.lencode[Le+((W&(1<<Ne+Fe)-1)>>Ne)])>>>16&255,Ue=65535&z,!(Ne+(xe=z>>>24)<=H);){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}W>>>=Ne,H-=Ne,x.back+=Ne}if(W>>>=xe,H-=xe,x.back+=xe,x.length=Ue,Oe===0){x.mode=26;break}if(32&Oe){x.back=-1,x.mode=12;break}if(64&Oe){k.msg="invalid literal/length code",x.mode=30;break}x.extra=15&Oe,x.mode=22;case 22:if(x.extra){for(F=x.extra;H<F;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.length+=W&(1<<x.extra)-1,W>>>=x.extra,H-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;Oe=(z=x.distcode[W&(1<<x.distbits)-1])>>>16&255,Ue=65535&z,!((xe=z>>>24)<=H);){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if((240&Oe)==0){for(Ne=xe,Fe=Oe,Le=Ue;Oe=(z=x.distcode[Le+((W&(1<<Ne+Fe)-1)>>Ne)])>>>16&255,Ue=65535&z,!(Ne+(xe=z>>>24)<=H);){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}W>>>=Ne,H-=Ne,x.back+=Ne}if(W>>>=xe,H-=xe,x.back+=xe,64&Oe){k.msg="invalid distance code",x.mode=30;break}x.offset=Ue,x.extra=15&Oe,x.mode=24;case 24:if(x.extra){for(F=x.extra;H<F;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}x.offset+=W&(1<<x.extra)-1,W>>>=x.extra,H-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){k.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(be===0)break e;if(pe=fe-be,x.offset>pe){if((pe=x.offset-pe)>x.whave&&x.sane){k.msg="invalid distance too far back",x.mode=30;break}ze=pe>x.wnext?(pe-=x.wnext,x.wsize-pe):x.wnext-pe,pe>x.length&&(pe=x.length),Pe=x.window}else Pe=ce,ze=ae-x.offset,pe=x.length;for(be<pe&&(pe=be),be-=pe,x.length-=pe;ce[ae++]=Pe[ze++],--pe;);x.length===0&&(x.mode=21);break;case 26:if(be===0)break e;ce[ae++]=x.length,be--,x.mode=21;break;case 27:if(x.wrap){for(;H<32;){if(re===0)break e;re--,W|=V[$++]<<H,H+=8}if(fe-=be,k.total_out+=fe,x.total+=fe,fe&&(k.adler=x.check=x.flags?a(x.check,ce,fe,ae-fe):s(x.check,ce,fe,ae-fe)),fe=be,(x.flags?W:c(W))!==x.check){k.msg="incorrect data check",x.mode=30;break}H=W=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;H<32;){if(re===0)break e;re--,W+=V[$++]<<H,H+=8}if(W!==(4294967295&x.total)){k.msg="incorrect length check",x.mode=30;break}H=W=0}x.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;default:return p}return k.next_out=ae,k.avail_out=be,k.next_in=$,k.avail_in=re,x.hold=W,x.bits=H,(x.wsize||fe!==k.avail_out&&x.mode<30&&(x.mode<27||M!==4))&&Y(k,k.output,k.next_out,fe-k.avail_out)?(x.mode=31,-4):(_e-=k.avail_in,fe-=k.avail_out,k.total_in+=_e,k.total_out+=fe,x.total+=fe,x.wrap&&fe&&(k.adler=x.check=x.flags?a(x.check,ce,fe,k.next_out-fe):s(x.check,ce,fe,k.next_out-fe)),k.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(_e==0&&fe===0||M===4)&&oe===y&&(oe=-5),oe)},i.inflateEnd=function(k){if(!k||!k.state)return p;var M=k.state;return M.window&&(M.window=null),k.state=null,y},i.inflateGetHeader=function(k,M){var x;return k&&k.state?(2&(x=k.state).wrap)==0?p:((x.head=M).done=!1,y):p},i.inflateSetDictionary=function(k,M){var x,V=M.length;return k&&k.state?(x=k.state).wrap!==0&&x.mode!==11?p:x.mode===11&&s(1,M,V,0)!==x.check?-3:Y(k,M,V,V)?(x.mode=31,-4):(x.havedict=1,y):p},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var n=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(m,d,y,p,E,v,u,c){var g,_,D,b,S,I,R,C,B,Y=c.bits,k=0,M=0,x=0,V=0,ce=0,$=0,ae=0,re=0,be=0,W=0,H=null,_e=0,fe=new n.Buf16(16),pe=new n.Buf16(16),ze=null,Pe=0;for(k=0;k<=15;k++)fe[k]=0;for(M=0;M<p;M++)fe[d[y+M]]++;for(ce=Y,V=15;1<=V&&fe[V]===0;V--);if(V<ce&&(ce=V),V===0)return E[v++]=20971520,E[v++]=20971520,c.bits=1,0;for(x=1;x<V&&fe[x]===0;x++);for(ce<x&&(ce=x),k=re=1;k<=15;k++)if(re<<=1,(re-=fe[k])<0)return-1;if(0<re&&(m===0||V!==1))return-1;for(pe[1]=0,k=1;k<15;k++)pe[k+1]=pe[k]+fe[k];for(M=0;M<p;M++)d[y+M]!==0&&(u[pe[d[y+M]]++]=M);if(I=m===0?(H=ze=u,19):m===1?(H=s,_e-=257,ze=a,Pe-=257,256):(H=o,ze=f,-1),k=x,S=v,ae=M=W=0,D=-1,b=(be=1<<($=ce))-1,m===1&&852<be||m===2&&592<be)return 1;for(;;){for(R=k-ae,B=u[M]<I?(C=0,u[M]):u[M]>I?(C=ze[Pe+u[M]],H[_e+u[M]]):(C=96,0),g=1<<k-ae,x=_=1<<$;E[S+(W>>ae)+(_-=g)]=R<<24|C<<16|B|0,_!==0;);for(g=1<<k-1;W&g;)g>>=1;if(g!==0?(W&=g-1,W+=g):W=0,M++,--fe[k]==0){if(k===V)break;k=d[y+u[M]]}if(ce<k&&(W&b)!==D){for(ae===0&&(ae=ce),S+=x,re=1<<($=k-ae);$+ae<V&&!((re-=fe[$+ae])<=0);)$++,re<<=1;if(be+=1<<$,m===1&&852<be||m===2&&592<be)return 1;E[D=W&b]=ce<<24|$<<16|S-v|0}}return W!==0&&(E[S+W]=k-ae<<24|64<<16|0),c.bits=ce,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var n=t("../utils/common"),s=0,a=1;function o(z){for(var X=z.length;0<=--X;)z[X]=0}var f=0,m=29,d=256,y=d+1+m,p=30,E=19,v=2*y+1,u=15,c=16,g=7,_=256,D=16,b=17,S=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(y+2));o(Y);var k=new Array(2*p);o(k);var M=new Array(512);o(M);var x=new Array(256);o(x);var V=new Array(m);o(V);var ce,$,ae,re=new Array(p);function be(z,X,he,se,K){this.static_tree=z,this.extra_bits=X,this.extra_base=he,this.elems=se,this.max_length=K,this.has_stree=z&&z.length}function W(z,X){this.dyn_tree=z,this.max_code=0,this.stat_desc=X}function H(z){return z<256?M[z]:M[256+(z>>>7)]}function _e(z,X){z.pending_buf[z.pending++]=255&X,z.pending_buf[z.pending++]=X>>>8&255}function fe(z,X,he){z.bi_valid>c-he?(z.bi_buf|=X<<z.bi_valid&65535,_e(z,z.bi_buf),z.bi_buf=X>>c-z.bi_valid,z.bi_valid+=he-c):(z.bi_buf|=X<<z.bi_valid&65535,z.bi_valid+=he)}function pe(z,X,he){fe(z,he[2*X],he[2*X+1])}function ze(z,X){for(var he=0;he|=1&z,z>>>=1,he<<=1,0<--X;);return he>>>1}function Pe(z,X,he){var se,K,ue=new Array(u+1),Ae=0;for(se=1;se<=u;se++)ue[se]=Ae=Ae+he[se-1]<<1;for(K=0;K<=X;K++){var ye=z[2*K+1];ye!==0&&(z[2*K]=ze(ue[ye]++,ye))}}function xe(z){var X;for(X=0;X<y;X++)z.dyn_ltree[2*X]=0;for(X=0;X<p;X++)z.dyn_dtree[2*X]=0;for(X=0;X<E;X++)z.bl_tree[2*X]=0;z.dyn_ltree[2*_]=1,z.opt_len=z.static_len=0,z.last_lit=z.matches=0}function Oe(z){8<z.bi_valid?_e(z,z.bi_buf):0<z.bi_valid&&(z.pending_buf[z.pending++]=z.bi_buf),z.bi_buf=0,z.bi_valid=0}function Ue(z,X,he,se){var K=2*X,ue=2*he;return z[K]<z[ue]||z[K]===z[ue]&&se[X]<=se[he]}function Ne(z,X,he){for(var se=z.heap[he],K=he<<1;K<=z.heap_len&&(K<z.heap_len&&Ue(X,z.heap[K+1],z.heap[K],z.depth)&&K++,!Ue(X,se,z.heap[K],z.depth));)z.heap[he]=z.heap[K],he=K,K<<=1;z.heap[he]=se}function Fe(z,X,he){var se,K,ue,Ae,ye=0;if(z.last_lit!==0)for(;se=z.pending_buf[z.d_buf+2*ye]<<8|z.pending_buf[z.d_buf+2*ye+1],K=z.pending_buf[z.l_buf+ye],ye++,se===0?pe(z,K,X):(pe(z,(ue=x[K])+d+1,X),(Ae=I[ue])!==0&&fe(z,K-=V[ue],Ae),pe(z,ue=H(--se),he),(Ae=R[ue])!==0&&fe(z,se-=re[ue],Ae)),ye<z.last_lit;);pe(z,_,X)}function Le(z,X){var he,se,K,ue=X.dyn_tree,Ae=X.stat_desc.static_tree,ye=X.stat_desc.has_stree,Re=X.stat_desc.elems,Me=-1;for(z.heap_len=0,z.heap_max=v,he=0;he<Re;he++)ue[2*he]!==0?(z.heap[++z.heap_len]=Me=he,z.depth[he]=0):ue[2*he+1]=0;for(;z.heap_len<2;)ue[2*(K=z.heap[++z.heap_len]=Me<2?++Me:0)]=1,z.depth[K]=0,z.opt_len--,ye&&(z.static_len-=Ae[2*K+1]);for(X.max_code=Me,he=z.heap_len>>1;1<=he;he--)Ne(z,ue,he);for(K=Re;he=z.heap[1],z.heap[1]=z.heap[z.heap_len--],Ne(z,ue,1),se=z.heap[1],z.heap[--z.heap_max]=he,z.heap[--z.heap_max]=se,ue[2*K]=ue[2*he]+ue[2*se],z.depth[K]=(z.depth[he]>=z.depth[se]?z.depth[he]:z.depth[se])+1,ue[2*he+1]=ue[2*se+1]=K,z.heap[1]=K++,Ne(z,ue,1),2<=z.heap_len;);z.heap[--z.heap_max]=z.heap[1],(function(qe,$e){var rt,tt,at,We,it,pt,L=$e.dyn_tree,me=$e.max_code,ge=$e.stat_desc.static_tree,Te=$e.stat_desc.has_stree,G=$e.stat_desc.extra_bits,le=$e.stat_desc.extra_base,l=$e.stat_desc.max_length,A=0;for(We=0;We<=u;We++)qe.bl_count[We]=0;for(L[2*qe.heap[qe.heap_max]+1]=0,rt=qe.heap_max+1;rt<v;rt++)l<(We=L[2*L[2*(tt=qe.heap[rt])+1]+1]+1)&&(We=l,A++),L[2*tt+1]=We,me<tt||(qe.bl_count[We]++,it=0,le<=tt&&(it=G[tt-le]),pt=L[2*tt],qe.opt_len+=pt*(We+it),Te&&(qe.static_len+=pt*(ge[2*tt+1]+it)));if(A!==0){do{for(We=l-1;qe.bl_count[We]===0;)We--;qe.bl_count[We]--,qe.bl_count[We+1]+=2,qe.bl_count[l]--,A-=2}while(0<A);for(We=l;We!==0;We--)for(tt=qe.bl_count[We];tt!==0;)me<(at=qe.heap[--rt])||(L[2*at+1]!==We&&(qe.opt_len+=(We-L[2*at+1])*L[2*at],L[2*at+1]=We),tt--)}})(z,X),Pe(ue,Me,z.bl_count)}function w(z,X,he){var se,K,ue=-1,Ae=X[1],ye=0,Re=7,Me=4;for(Ae===0&&(Re=138,Me=3),X[2*(he+1)+1]=65535,se=0;se<=he;se++)K=Ae,Ae=X[2*(se+1)+1],++ye<Re&&K===Ae||(ye<Me?z.bl_tree[2*K]+=ye:K!==0?(K!==ue&&z.bl_tree[2*K]++,z.bl_tree[2*D]++):ye<=10?z.bl_tree[2*b]++:z.bl_tree[2*S]++,ue=K,Me=(ye=0)===Ae?(Re=138,3):K===Ae?(Re=6,3):(Re=7,4))}function oe(z,X,he){var se,K,ue=-1,Ae=X[1],ye=0,Re=7,Me=4;for(Ae===0&&(Re=138,Me=3),se=0;se<=he;se++)if(K=Ae,Ae=X[2*(se+1)+1],!(++ye<Re&&K===Ae)){if(ye<Me)for(;pe(z,K,z.bl_tree),--ye!=0;);else K!==0?(K!==ue&&(pe(z,K,z.bl_tree),ye--),pe(z,D,z.bl_tree),fe(z,ye-3,2)):ye<=10?(pe(z,b,z.bl_tree),fe(z,ye-3,3)):(pe(z,S,z.bl_tree),fe(z,ye-11,7));ue=K,Me=(ye=0)===Ae?(Re=138,3):K===Ae?(Re=6,3):(Re=7,4)}}o(re);var ie=!1;function F(z,X,he,se){fe(z,(f<<1)+(se?1:0),3),(function(K,ue,Ae,ye){Oe(K),_e(K,Ae),_e(K,~Ae),n.arraySet(K.pending_buf,K.window,ue,Ae,K.pending),K.pending+=Ae})(z,X,he)}i._tr_init=function(z){ie||((function(){var X,he,se,K,ue,Ae=new Array(u+1);for(K=se=0;K<m-1;K++)for(V[K]=se,X=0;X<1<<I[K];X++)x[se++]=K;for(x[se-1]=K,K=ue=0;K<16;K++)for(re[K]=ue,X=0;X<1<<R[K];X++)M[ue++]=K;for(ue>>=7;K<p;K++)for(re[K]=ue<<7,X=0;X<1<<R[K]-7;X++)M[256+ue++]=K;for(he=0;he<=u;he++)Ae[he]=0;for(X=0;X<=143;)Y[2*X+1]=8,X++,Ae[8]++;for(;X<=255;)Y[2*X+1]=9,X++,Ae[9]++;for(;X<=279;)Y[2*X+1]=7,X++,Ae[7]++;for(;X<=287;)Y[2*X+1]=8,X++,Ae[8]++;for(Pe(Y,y+1,Ae),X=0;X<p;X++)k[2*X+1]=5,k[2*X]=ze(X,5);ce=new be(Y,I,d+1,y,u),$=new be(k,R,0,p,u),ae=new be(new Array(0),C,0,E,g)})(),ie=!0),z.l_desc=new W(z.dyn_ltree,ce),z.d_desc=new W(z.dyn_dtree,$),z.bl_desc=new W(z.bl_tree,ae),z.bi_buf=0,z.bi_valid=0,xe(z)},i._tr_stored_block=F,i._tr_flush_block=function(z,X,he,se){var K,ue,Ae=0;0<z.level?(z.strm.data_type===2&&(z.strm.data_type=(function(ye){var Re,Me=4093624447;for(Re=0;Re<=31;Re++,Me>>>=1)if(1&Me&&ye.dyn_ltree[2*Re]!==0)return s;if(ye.dyn_ltree[18]!==0||ye.dyn_ltree[20]!==0||ye.dyn_ltree[26]!==0)return a;for(Re=32;Re<d;Re++)if(ye.dyn_ltree[2*Re]!==0)return a;return s})(z)),Le(z,z.l_desc),Le(z,z.d_desc),Ae=(function(ye){var Re;for(w(ye,ye.dyn_ltree,ye.l_desc.max_code),w(ye,ye.dyn_dtree,ye.d_desc.max_code),Le(ye,ye.bl_desc),Re=E-1;3<=Re&&ye.bl_tree[2*B[Re]+1]===0;Re--);return ye.opt_len+=3*(Re+1)+5+5+4,Re})(z),K=z.opt_len+3+7>>>3,(ue=z.static_len+3+7>>>3)<=K&&(K=ue)):K=ue=he+5,he+4<=K&&X!==-1?F(z,X,he,se):z.strategy===4||ue===K?(fe(z,2+(se?1:0),3),Fe(z,Y,k)):(fe(z,4+(se?1:0),3),(function(ye,Re,Me,qe){var $e;for(fe(ye,Re-257,5),fe(ye,Me-1,5),fe(ye,qe-4,4),$e=0;$e<qe;$e++)fe(ye,ye.bl_tree[2*B[$e]+1],3);oe(ye,ye.dyn_ltree,Re-1),oe(ye,ye.dyn_dtree,Me-1)})(z,z.l_desc.max_code+1,z.d_desc.max_code+1,Ae+1),Fe(z,z.dyn_ltree,z.dyn_dtree)),xe(z),se&&Oe(z)},i._tr_tally=function(z,X,he){return z.pending_buf[z.d_buf+2*z.last_lit]=X>>>8&255,z.pending_buf[z.d_buf+2*z.last_lit+1]=255&X,z.pending_buf[z.l_buf+z.last_lit]=255&he,z.last_lit++,X===0?z.dyn_ltree[2*he]++:(z.matches++,X--,z.dyn_ltree[2*(x[he]+d+1)]++,z.dyn_dtree[2*H(X)]++),z.last_lit===z.lit_bufsize-1},i._tr_align=function(z){fe(z,2,3),pe(z,_,Y),(function(X){X.bi_valid===16?(_e(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)})(z)}},{"../utils/common":41}],53:[function(t,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,r,i){(function(n){(function(s,a){if(!s.setImmediate){var o,f,m,d,y=1,p={},E=!1,v=s.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(s);u=u&&u.setTimeout?u:s,o={}.toString.call(s.process)==="[object process]"?function(D){process.nextTick(function(){g(D)})}:(function(){if(s.postMessage&&!s.importScripts){var D=!0,b=s.onmessage;return s.onmessage=function(){D=!1},s.postMessage("","*"),s.onmessage=b,D}})()?(d="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",_,!1):s.attachEvent("onmessage",_),function(D){s.postMessage(d+D,"*")}):s.MessageChannel?((m=new MessageChannel).port1.onmessage=function(D){g(D.data)},function(D){m.port2.postMessage(D)}):v&&"onreadystatechange"in v.createElement("script")?(f=v.documentElement,function(D){var b=v.createElement("script");b.onreadystatechange=function(){g(D),b.onreadystatechange=null,f.removeChild(b),b=null},f.appendChild(b)}):function(D){setTimeout(g,0,D)},u.setImmediate=function(D){typeof D!="function"&&(D=new Function(""+D));for(var b=new Array(arguments.length-1),S=0;S<b.length;S++)b[S]=arguments[S+1];var I={callback:D,args:b};return p[y]=I,o(y),y++},u.clearImmediate=c}function c(D){delete p[D]}function g(D){if(E)setTimeout(g,0,D);else{var b=p[D];if(b){E=!0;try{(function(S){var I=S.callback,R=S.args;switch(R.length){case 0:I();break;case 1:I(R[0]);break;case 2:I(R[0],R[1]);break;case 3:I(R[0],R[1],R[2]);break;default:I.apply(a,R)}})(b)}finally{c(D),E=!1}}}}function _(D){D.source===s&&typeof D.data=="string"&&D.data.indexOf(d)===0&&g(+D.data.slice(d.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(_r)),_r.exports}var us=os();const ls=Ot(us);var er={exports:{}},wr={exports:{}},Er,ki;function kn(){if(ki)return Er;ki=1;var N=void 0;return Er=function(e){return e!==N&&e!==null},Er}var xr,Si;function hs(){if(Si)return xr;Si=1;var N=kn(),e={object:!0,function:!0,undefined:!0};return xr=function(t){return N(t)?hasOwnProperty.call(e,typeof t):!1},xr}var Ar,Ti;function fs(){if(Ti)return Ar;Ti=1;var N=hs();return Ar=function(e){if(!N(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch{return!1}},Ar}var Dr,Ii;function cs(){if(Ii)return Dr;Ii=1;var N=fs();return Dr=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch{return!1}return!N(e)},Dr}var Cr,Ri;function ds(){if(Ri)return Cr;Ri=1;var N=cs(),e=/^\s*class[\s{/}]/,t=Function.prototype.toString;return Cr=function(r){return!(!N(r)||e.test(t.call(r)))},Cr}var kr,Ni;function ps(){return Ni||(Ni=1,kr=function(){var N=Object.assign,e;return typeof N!="function"?!1:(e={foo:"raz"},N(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}),kr}var Sr,Oi;function ms(){return Oi||(Oi=1,Sr=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Sr}var Tr,Bi;function gs(){return Bi||(Bi=1,Tr=function(){}),Tr}var Ir,Li;function pi(){if(Li)return Ir;Li=1;var N=gs()();return Ir=function(e){return e!==N&&e!==null},Ir}var Rr,zi;function vs(){if(zi)return Rr;zi=1;var N=pi(),e=Object.keys;return Rr=function(t){return e(N(t)?Object(t):t)},Rr}var Nr,Fi;function ys(){return Fi||(Fi=1,Nr=ms()()?Object.keys:vs()),Nr}var Or,Pi;function bs(){if(Pi)return Or;Pi=1;var N=pi();return Or=function(e){if(!N(e))throw new TypeError("Cannot use null or undefined");return e},Or}var Br,Ui;function _s(){if(Ui)return Br;Ui=1;var N=ys(),e=bs(),t=Math.max;return Br=function(r,i){var n,s,a=t(arguments.length,2),o;for(r=Object(e(r)),o=function(f){try{r[f]=i[f]}catch(m){n||(n=m)}},s=1;s<a;++s)i=arguments[s],N(i).forEach(o);if(n!==void 0)throw n;return r},Br}var Lr,Mi;function ws(){return Mi||(Mi=1,Lr=ps()()?Object.assign:_s()),Lr}var zr,qi;function Es(){if(qi)return zr;qi=1;var N=pi(),e=Array.prototype.forEach,t=Object.create,r=function(i,n){var s;for(s in i)n[s]=i[s]};return zr=function(i){var n=t(null);return e.call(arguments,function(s){N(s)&&r(Object(s),n)}),n},zr}var Fr,ji;function xs(){if(ji)return Fr;ji=1;var N="razdwatrzy";return Fr=function(){return typeof N.contains!="function"?!1:N.contains("dwa")===!0&&N.contains("foo")===!1},Fr}var Pr,Wi;function As(){if(Wi)return Pr;Wi=1;var N=String.prototype.indexOf;return Pr=function(e){return N.call(this,e,arguments[1])>-1},Pr}var Ur,Hi;function Ds(){return Hi||(Hi=1,Ur=xs()()?String.prototype.contains:As()),Ur}var Zi;function Cs(){if(Zi)return wr.exports;Zi=1;var N=kn(),e=ds(),t=ws(),r=Es(),i=Ds(),n=wr.exports=function(s,a){var o,f,m,d,y;return arguments.length<2||typeof s!="string"?(d=a,a=s,s=null):d=arguments[2],N(s)?(o=i.call(s,"c"),f=i.call(s,"e"),m=i.call(s,"w")):(o=m=!0,f=!1),y={value:a,configurable:o,enumerable:f,writable:m},d?t(r(d),y):y};return n.gs=function(s,a,o){var f,m,d,y;return typeof s!="string"?(d=o,o=a,a=s,s=null):d=arguments[3],N(a)?e(a)?N(o)?e(o)||(d=o,o=void 0):o=void 0:(d=a,a=o=void 0):a=void 0,N(s)?(f=i.call(s,"c"),m=i.call(s,"e")):(f=!0,m=!1),y={get:a,set:o,configurable:f,enumerable:m},d?t(r(d),y):y},wr.exports}var Mr,Vi;function ks(){return Vi||(Vi=1,Mr=function(N){if(typeof N!="function")throw new TypeError(N+" is not a function");return N}),Mr}var Gi;function Ss(){return Gi||(Gi=1,(function(N,e){var t=Cs(),r=ks(),i=Function.prototype.apply,n=Function.prototype.call,s=Object.create,a=Object.defineProperty,o=Object.defineProperties,f=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0},d,y,p,E,v,u,c;d=function(g,_){var D;return r(_),f.call(this,"__ee__")?D=this.__ee__:(D=m.value=s(null),a(this,"__ee__",m),m.value=null),D[g]?typeof D[g]=="object"?D[g].push(_):D[g]=[D[g],_]:D[g]=_,this},y=function(g,_){var D,b;return r(_),b=this,d.call(this,g,D=function(){p.call(b,g,D),i.call(_,this,arguments)}),D.__eeOnceListener__=_,this},p=function(g,_){var D,b,S,I;if(r(_),!f.call(this,"__ee__"))return this;if(D=this.__ee__,!D[g])return this;if(b=D[g],typeof b=="object")for(I=0;S=b[I];++I)(S===_||S.__eeOnceListener__===_)&&(b.length===2?D[g]=b[I?0:1]:b.splice(I,1));else(b===_||b.__eeOnceListener__===_)&&delete D[g];return this},E=function(g){var _,D,b,S,I;if(f.call(this,"__ee__")&&(S=this.__ee__[g],!!S))if(typeof S=="object"){for(D=arguments.length,I=new Array(D-1),_=1;_<D;++_)I[_-1]=arguments[_];for(S=S.slice(),_=0;b=S[_];++_)i.call(b,this,I)}else switch(arguments.length){case 1:n.call(S,this);break;case 2:n.call(S,this,arguments[1]);break;case 3:n.call(S,this,arguments[1],arguments[2]);break;default:for(D=arguments.length,I=new Array(D-1),_=1;_<D;++_)I[_-1]=arguments[_];i.call(S,this,I)}},v={on:d,once:y,off:p,emit:E},u={on:t(d),once:t(y),off:t(p),emit:t(E)},c=o({},u),N.exports=e=function(g){return g==null?s(c):o(Object(g),u)},e.methods=v})(er,er.exports)),er.exports}var Ts=Ss();const kt=Ot(Ts);var Gt={},Tt={},zt={},Yi;function dr(){if(Yi)return zt;Yi=1;function N(i,n,s){if(s===void 0&&(s=Array.prototype),i&&typeof s.find=="function")return s.find.call(i,n);for(var a=0;a<i.length;a++)if(Object.prototype.hasOwnProperty.call(i,a)){var o=i[a];if(n.call(void 0,o,a,i))return o}}function e(i,n){return n===void 0&&(n=Object),n&&typeof n.freeze=="function"?n.freeze(i):i}var t=e({HTML:"text/html",isHTML:function(i){return i===t.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return zt.find=N,zt.freeze=e,zt.MIME_TYPE=t,zt.NAMESPACE=r,zt}var Xi;function Sn(){if(Xi)return Tt;Xi=1;var N=dr(),e=N.find,t=N.NAMESPACE;function r(l){return l!==""}function i(l){return l?l.split(/[\t\n\f\r ]+/).filter(r):[]}function n(l,A){return l.hasOwnProperty(A)||(l[A]=!0),l}function s(l){if(!l)return[];var A=i(l);return Object.keys(A.reduce(n,{}))}function a(l){return function(A){return l&&l.indexOf(A)!==-1}}function o(l,A){for(var U in l)Object.prototype.hasOwnProperty.call(l,U)&&(A[U]=l[U])}function f(l,A){var U=l.prototype;if(!(U instanceof A)){let q=function(){};var h=q;q.prototype=A.prototype,q=new q,o(U,q),l.prototype=U=q}U.constructor!=l&&(typeof l!="function"&&console.error("unknown Class:"+l),U.constructor=l)}var m={},d=m.ELEMENT_NODE=1,y=m.ATTRIBUTE_NODE=2,p=m.TEXT_NODE=3,E=m.CDATA_SECTION_NODE=4,v=m.ENTITY_REFERENCE_NODE=5,u=m.ENTITY_NODE=6,c=m.PROCESSING_INSTRUCTION_NODE=7,g=m.COMMENT_NODE=8,_=m.DOCUMENT_NODE=9,D=m.DOCUMENT_TYPE_NODE=10,b=m.DOCUMENT_FRAGMENT_NODE=11,S=m.NOTATION_NODE=12,I={},R={};I.INDEX_SIZE_ERR=(R[1]="Index size error",1),I.DOMSTRING_SIZE_ERR=(R[2]="DOMString size error",2);var C=I.HIERARCHY_REQUEST_ERR=(R[3]="Hierarchy request error",3);I.WRONG_DOCUMENT_ERR=(R[4]="Wrong document",4),I.INVALID_CHARACTER_ERR=(R[5]="Invalid character",5),I.NO_DATA_ALLOWED_ERR=(R[6]="No data allowed",6),I.NO_MODIFICATION_ALLOWED_ERR=(R[7]="No modification allowed",7);var B=I.NOT_FOUND_ERR=(R[8]="Not found",8);I.NOT_SUPPORTED_ERR=(R[9]="Not supported",9);var Y=I.INUSE_ATTRIBUTE_ERR=(R[10]="Attribute in use",10);I.INVALID_STATE_ERR=(R[11]="Invalid state",11),I.SYNTAX_ERR=(R[12]="Syntax error",12),I.INVALID_MODIFICATION_ERR=(R[13]="Invalid modification",13),I.NAMESPACE_ERR=(R[14]="Invalid namespace",14),I.INVALID_ACCESS_ERR=(R[15]="Invalid access",15);function k(l,A){if(A instanceof Error)var U=A;else U=this,Error.call(this,R[l]),this.message=R[l],Error.captureStackTrace&&Error.captureStackTrace(this,k);return U.code=l,A&&(this.message=this.message+": "+A),U}k.prototype=Error.prototype,o(I,k);function M(){}M.prototype={length:0,item:function(l){return l>=0&&l<this.length?this[l]:null},toString:function(l,A){for(var U=[],h=0;h<this.length;h++)me(this[h],U,l,A);return U.join("")},filter:function(l){return Array.prototype.filter.call(this,l)},indexOf:function(l){return Array.prototype.indexOf.call(this,l)}};function x(l,A){this._node=l,this._refresh=A,V(this)}function V(l){var A=l._node._inc||l._node.ownerDocument._inc;if(l._inc!==A){var U=l._refresh(l._node);if(G(l,"length",U.length),!l.$$length||U.length<l.$$length)for(var h=U.length;h in l;h++)Object.prototype.hasOwnProperty.call(l,h)&&delete l[h];o(U,l),l._inc=A}}x.prototype.item=function(l){return V(this),this[l]||null},f(x,M);function ce(){}function $(l,A){for(var U=l.length;U--;)if(l[U]===A)return U}function ae(l,A,U,h){if(h?A[$(A,h)]=U:A[A.length++]=U,l){U.ownerElement=l;var q=l.ownerDocument;q&&(h&&ze(q,l,h),pe(q,l,U))}}function re(l,A,U){var h=$(A,U);if(h>=0){for(var q=A.length-1;h<q;)A[h]=A[++h];if(A.length=q,l){var Q=l.ownerDocument;Q&&(ze(Q,l,U),U.ownerElement=null)}}else throw new k(B,new Error(l.tagName+"@"+U))}ce.prototype={length:0,item:M.prototype.item,getNamedItem:function(l){for(var A=this.length;A--;){var U=this[A];if(U.nodeName==l)return U}},setNamedItem:function(l){var A=l.ownerElement;if(A&&A!=this._ownerElement)throw new k(Y);var U=this.getNamedItem(l.nodeName);return ae(this._ownerElement,this,l,U),U},setNamedItemNS:function(l){var A=l.ownerElement,U;if(A&&A!=this._ownerElement)throw new k(Y);return U=this.getNamedItemNS(l.namespaceURI,l.localName),ae(this._ownerElement,this,l,U),U},removeNamedItem:function(l){var A=this.getNamedItem(l);return re(this._ownerElement,this,A),A},removeNamedItemNS:function(l,A){var U=this.getNamedItemNS(l,A);return re(this._ownerElement,this,U),U},getNamedItemNS:function(l,A){for(var U=this.length;U--;){var h=this[U];if(h.localName==A&&h.namespaceURI==l)return h}return null}};function be(){}be.prototype={hasFeature:function(l,A){return!0},createDocument:function(l,A,U){var h=new fe;if(h.implementation=this,h.childNodes=new M,h.doctype=U||null,U&&h.appendChild(U),A){var q=h.createElementNS(l,A);h.appendChild(q)}return h},createDocumentType:function(l,A,U){var h=new Me;return h.name=l,h.nodeName=l,h.publicId=A||"",h.systemId=U||"",h}};function W(){}W.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(l,A){return X(this,l,A)},replaceChild:function(l,A){X(this,l,A,z),A&&this.removeChild(A)},removeChild:function(l){return xe(this,l)},appendChild:function(l){return this.insertBefore(l,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(l){return Te(this.ownerDocument||this,this,l)},normalize:function(){for(var l=this.firstChild;l;){var A=l.nextSibling;A&&A.nodeType==p&&l.nodeType==p?(this.removeChild(A),l.appendData(A.data)):(l.normalize(),l=A)}},isSupported:function(l,A){return this.ownerDocument.implementation.hasFeature(l,A)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(l){for(var A=this;A;){var U=A._nsMap;if(U){for(var h in U)if(Object.prototype.hasOwnProperty.call(U,h)&&U[h]===l)return h}A=A.nodeType==y?A.ownerDocument:A.parentNode}return null},lookupNamespaceURI:function(l){for(var A=this;A;){var U=A._nsMap;if(U&&l in U&&Object.prototype.hasOwnProperty.call(U,l))return U[l];A=A.nodeType==y?A.ownerDocument:A.parentNode}return null},isDefaultNamespace:function(l){var A=this.lookupPrefix(l);return A==null}};function H(l){return l=="<"&&"&lt;"||l==">"&&"&gt;"||l=="&"&&"&amp;"||l=='"'&&"&quot;"||"&#"+l.charCodeAt()+";"}o(m,W),o(m,W.prototype);function _e(l,A){if(A(l))return!0;if(l=l.firstChild)do if(_e(l,A))return!0;while(l=l.nextSibling)}function fe(){this.ownerDocument=this}function pe(l,A,U){l&&l._inc++;var h=U.namespaceURI;h===t.XMLNS&&(A._nsMap[U.prefix?U.localName:""]=U.value)}function ze(l,A,U,h){l&&l._inc++;var q=U.namespaceURI;q===t.XMLNS&&delete A._nsMap[U.prefix?U.localName:""]}function Pe(l,A,U){if(l&&l._inc){l._inc++;var h=A.childNodes;if(U)h[h.length++]=U;else{for(var q=A.firstChild,Q=0;q;)h[Q++]=q,q=q.nextSibling;h.length=Q,delete h[h.length]}}}function xe(l,A){var U=A.previousSibling,h=A.nextSibling;return U?U.nextSibling=h:l.firstChild=h,h?h.previousSibling=U:l.lastChild=U,A.parentNode=null,A.previousSibling=null,A.nextSibling=null,Pe(l.ownerDocument,l),A}function Oe(l){return l&&(l.nodeType===W.DOCUMENT_NODE||l.nodeType===W.DOCUMENT_FRAGMENT_NODE||l.nodeType===W.ELEMENT_NODE)}function Ue(l){return l&&(Fe(l)||Le(l)||Ne(l)||l.nodeType===W.DOCUMENT_FRAGMENT_NODE||l.nodeType===W.COMMENT_NODE||l.nodeType===W.PROCESSING_INSTRUCTION_NODE)}function Ne(l){return l&&l.nodeType===W.DOCUMENT_TYPE_NODE}function Fe(l){return l&&l.nodeType===W.ELEMENT_NODE}function Le(l){return l&&l.nodeType===W.TEXT_NODE}function w(l,A){var U=l.childNodes||[];if(e(U,Fe)||Ne(A))return!1;var h=e(U,Ne);return!(A&&h&&U.indexOf(h)>U.indexOf(A))}function oe(l,A){var U=l.childNodes||[];function h(Q){return Fe(Q)&&Q!==A}if(e(U,h))return!1;var q=e(U,Ne);return!(A&&q&&U.indexOf(q)>U.indexOf(A))}function ie(l,A,U){if(!Oe(l))throw new k(C,"Unexpected parent node type "+l.nodeType);if(U&&U.parentNode!==l)throw new k(B,"child not in parent");if(!Ue(A)||Ne(A)&&l.nodeType!==W.DOCUMENT_NODE)throw new k(C,"Unexpected node type "+A.nodeType+" for parent node type "+l.nodeType)}function F(l,A,U){var h=l.childNodes||[],q=A.childNodes||[];if(A.nodeType===W.DOCUMENT_FRAGMENT_NODE){var Q=q.filter(Fe);if(Q.length>1||e(q,Le))throw new k(C,"More than one element or text in fragment");if(Q.length===1&&!w(l,U))throw new k(C,"Element in fragment can not be inserted before doctype")}if(Fe(A)&&!w(l,U))throw new k(C,"Only one element can be added and only after doctype");if(Ne(A)){if(e(h,Ne))throw new k(C,"Only one doctype is allowed");var T=e(h,Fe);if(U&&h.indexOf(T)<h.indexOf(U))throw new k(C,"Doctype can only be inserted before an element");if(!U&&T)throw new k(C,"Doctype can not be appended since element is present")}}function z(l,A,U){var h=l.childNodes||[],q=A.childNodes||[];if(A.nodeType===W.DOCUMENT_FRAGMENT_NODE){var Q=q.filter(Fe);if(Q.length>1||e(q,Le))throw new k(C,"More than one element or text in fragment");if(Q.length===1&&!oe(l,U))throw new k(C,"Element in fragment can not be inserted before doctype")}if(Fe(A)&&!oe(l,U))throw new k(C,"Only one element can be added and only after doctype");if(Ne(A)){let ne=function(Ie){return Ne(Ie)&&Ie!==U};var j=ne;if(e(h,ne))throw new k(C,"Only one doctype is allowed");var T=e(h,Fe);if(U&&h.indexOf(T)<h.indexOf(U))throw new k(C,"Doctype can only be inserted before an element")}}function X(l,A,U,h){ie(l,A,U),l.nodeType===W.DOCUMENT_NODE&&(h||F)(l,A,U);var q=A.parentNode;if(q&&q.removeChild(A),A.nodeType===b){var Q=A.firstChild;if(Q==null)return A;var T=A.lastChild}else Q=T=A;var j=U?U.previousSibling:l.lastChild;Q.previousSibling=j,T.nextSibling=U,j?j.nextSibling=Q:l.firstChild=Q,U==null?l.lastChild=T:U.previousSibling=T;do Q.parentNode=l;while(Q!==T&&(Q=Q.nextSibling));return Pe(l.ownerDocument||l,l),A.nodeType==b&&(A.firstChild=A.lastChild=null),A}function he(l,A){return A.parentNode&&A.parentNode.removeChild(A),A.parentNode=l,A.previousSibling=l.lastChild,A.nextSibling=null,A.previousSibling?A.previousSibling.nextSibling=A:l.firstChild=A,l.lastChild=A,Pe(l.ownerDocument,l,A),A}fe.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(l,A){if(l.nodeType==b){for(var U=l.firstChild;U;){var h=U.nextSibling;this.insertBefore(U,A),U=h}return l}return X(this,l,A),l.ownerDocument=this,this.documentElement===null&&l.nodeType===d&&(this.documentElement=l),l},removeChild:function(l){return this.documentElement==l&&(this.documentElement=null),xe(this,l)},replaceChild:function(l,A){X(this,l,A,z),l.ownerDocument=this,A&&this.removeChild(A),Fe(l)&&(this.documentElement=l)},importNode:function(l,A){return ge(this,l,A)},getElementById:function(l){var A=null;return _e(this.documentElement,function(U){if(U.nodeType==d&&U.getAttribute("id")==l)return A=U,!0}),A},getElementsByClassName:function(l){var A=s(l);return new x(this,function(U){var h=[];return A.length>0&&_e(U.documentElement,function(q){if(q!==U&&q.nodeType===d){var Q=q.getAttribute("class");if(Q){var T=l===Q;if(!T){var j=s(Q);T=A.every(a(j))}T&&h.push(q)}}}),h})},createElement:function(l){var A=new se;A.ownerDocument=this,A.nodeName=l,A.tagName=l,A.localName=l,A.childNodes=new M;var U=A.attributes=new ce;return U._ownerElement=A,A},createDocumentFragment:function(){var l=new tt;return l.ownerDocument=this,l.childNodes=new M,l},createTextNode:function(l){var A=new Ae;return A.ownerDocument=this,A.appendData(l),A},createComment:function(l){var A=new ye;return A.ownerDocument=this,A.appendData(l),A},createCDATASection:function(l){var A=new Re;return A.ownerDocument=this,A.appendData(l),A},createProcessingInstruction:function(l,A){var U=new at;return U.ownerDocument=this,U.tagName=U.nodeName=U.target=l,U.nodeValue=U.data=A,U},createAttribute:function(l){var A=new K;return A.ownerDocument=this,A.name=l,A.nodeName=l,A.localName=l,A.specified=!0,A},createEntityReference:function(l){var A=new rt;return A.ownerDocument=this,A.nodeName=l,A},createElementNS:function(l,A){var U=new se,h=A.split(":"),q=U.attributes=new ce;return U.childNodes=new M,U.ownerDocument=this,U.nodeName=A,U.tagName=A,U.namespaceURI=l,h.length==2?(U.prefix=h[0],U.localName=h[1]):U.localName=A,q._ownerElement=U,U},createAttributeNS:function(l,A){var U=new K,h=A.split(":");return U.ownerDocument=this,U.nodeName=A,U.name=A,U.namespaceURI=l,U.specified=!0,h.length==2?(U.prefix=h[0],U.localName=h[1]):U.localName=A,U}},f(fe,W);function se(){this._nsMap={}}se.prototype={nodeType:d,hasAttribute:function(l){return this.getAttributeNode(l)!=null},getAttribute:function(l){var A=this.getAttributeNode(l);return A&&A.value||""},getAttributeNode:function(l){return this.attributes.getNamedItem(l)},setAttribute:function(l,A){var U=this.ownerDocument.createAttribute(l);U.value=U.nodeValue=""+A,this.setAttributeNode(U)},removeAttribute:function(l){var A=this.getAttributeNode(l);A&&this.removeAttributeNode(A)},appendChild:function(l){return l.nodeType===b?this.insertBefore(l,null):he(this,l)},setAttributeNode:function(l){return this.attributes.setNamedItem(l)},setAttributeNodeNS:function(l){return this.attributes.setNamedItemNS(l)},removeAttributeNode:function(l){return this.attributes.removeNamedItem(l.nodeName)},removeAttributeNS:function(l,A){var U=this.getAttributeNodeNS(l,A);U&&this.removeAttributeNode(U)},hasAttributeNS:function(l,A){return this.getAttributeNodeNS(l,A)!=null},getAttributeNS:function(l,A){var U=this.getAttributeNodeNS(l,A);return U&&U.value||""},setAttributeNS:function(l,A,U){var h=this.ownerDocument.createAttributeNS(l,A);h.value=h.nodeValue=""+U,this.setAttributeNode(h)},getAttributeNodeNS:function(l,A){return this.attributes.getNamedItemNS(l,A)},getElementsByTagName:function(l){return new x(this,function(A){var U=[];return _e(A,function(h){h!==A&&h.nodeType==d&&(l==="*"||h.tagName==l)&&U.push(h)}),U})},getElementsByTagNameNS:function(l,A){return new x(this,function(U){var h=[];return _e(U,function(q){q!==U&&q.nodeType===d&&(l==="*"||q.namespaceURI===l)&&(A==="*"||q.localName==A)&&h.push(q)}),h})}},fe.prototype.getElementsByTagName=se.prototype.getElementsByTagName,fe.prototype.getElementsByTagNameNS=se.prototype.getElementsByTagNameNS,f(se,W);function K(){}K.prototype.nodeType=y,f(K,W);function ue(){}ue.prototype={data:"",substringData:function(l,A){return this.data.substring(l,l+A)},appendData:function(l){l=this.data+l,this.nodeValue=this.data=l,this.length=l.length},insertData:function(l,A){this.replaceData(l,0,A)},appendChild:function(l){throw new Error(R[C])},deleteData:function(l,A){this.replaceData(l,A,"")},replaceData:function(l,A,U){var h=this.data.substring(0,l),q=this.data.substring(l+A);U=h+U+q,this.nodeValue=this.data=U,this.length=U.length}},f(ue,W);function Ae(){}Ae.prototype={nodeName:"#text",nodeType:p,splitText:function(l){var A=this.data,U=A.substring(l);A=A.substring(0,l),this.data=this.nodeValue=A,this.length=A.length;var h=this.ownerDocument.createTextNode(U);return this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling),h}},f(Ae,ue);function ye(){}ye.prototype={nodeName:"#comment",nodeType:g},f(ye,ue);function Re(){}Re.prototype={nodeName:"#cdata-section",nodeType:E},f(Re,ue);function Me(){}Me.prototype.nodeType=D,f(Me,W);function qe(){}qe.prototype.nodeType=S,f(qe,W);function $e(){}$e.prototype.nodeType=u,f($e,W);function rt(){}rt.prototype.nodeType=v,f(rt,W);function tt(){}tt.prototype.nodeName="#document-fragment",tt.prototype.nodeType=b,f(tt,W);function at(){}at.prototype.nodeType=c,f(at,W);function We(){}We.prototype.serializeToString=function(l,A,U){return it.call(l,A,U)},W.prototype.toString=it;function it(l,A){var U=[],h=this.nodeType==9&&this.documentElement||this,q=h.prefix,Q=h.namespaceURI;if(Q&&q==null){var q=h.lookupPrefix(Q);if(q==null)var T=[{namespace:Q,prefix:null}]}return me(this,U,l,A,T),U.join("")}function pt(l,A,U){var h=l.prefix||"",q=l.namespaceURI;if(!q||h==="xml"&&q===t.XML||q===t.XMLNS)return!1;for(var Q=U.length;Q--;){var T=U[Q];if(T.prefix===h)return T.namespace!==q}return!0}function L(l,A,U){l.push(" ",A,'="',U.replace(/[<&"]/g,H),'"')}function me(l,A,U,h,q){if(q||(q=[]),h)if(l=h(l),l){if(typeof l=="string"){A.push(l);return}}else return;switch(l.nodeType){case d:var Q=l.attributes,T=Q.length,Ge=l.firstChild,j=l.tagName;U=t.isHTML(l.namespaceURI)||U;var ne=j;if(!U&&!l.prefix&&l.namespaceURI){for(var Ie,De=0;De<Q.length;De++)if(Q.item(De).name==="xmlns"){Ie=Q.item(De).value;break}if(!Ie)for(var ke=q.length-1;ke>=0;ke--){var je=q[ke];if(je.prefix===""&&je.namespace===l.namespaceURI){Ie=je.namespace;break}}if(Ie!==l.namespaceURI)for(var ke=q.length-1;ke>=0;ke--){var je=q[ke];if(je.namespace===l.namespaceURI){je.prefix&&(ne=je.prefix+":"+j);break}}}A.push("<",ne);for(var lt=0;lt<T;lt++){var Ve=Q.item(lt);Ve.prefix=="xmlns"?q.push({prefix:Ve.localName,namespace:Ve.value}):Ve.nodeName=="xmlns"&&q.push({prefix:"",namespace:Ve.value})}for(var lt=0;lt<T;lt++){var Ve=Q.item(lt);if(pt(Ve,U,q)){var He=Ve.prefix||"",Qe=Ve.namespaceURI;L(A,He?"xmlns:"+He:"xmlns",Qe),q.push({prefix:He,namespace:Qe})}me(Ve,A,U,h,q)}if(j===ne&&pt(l,U,q)){var He=l.prefix||"",Qe=l.namespaceURI;L(A,He?"xmlns:"+He:"xmlns",Qe),q.push({prefix:He,namespace:Qe})}if(Ge||U&&!/^(?:meta|link|img|br|hr|input)$/i.test(j)){if(A.push(">"),U&&/^script$/i.test(j))for(;Ge;)Ge.data?A.push(Ge.data):me(Ge,A,U,h,q.slice()),Ge=Ge.nextSibling;else for(;Ge;)me(Ge,A,U,h,q.slice()),Ge=Ge.nextSibling;A.push("</",ne,">")}else A.push("/>");return;case _:case b:for(var Ge=l.firstChild;Ge;)me(Ge,A,U,h,q.slice()),Ge=Ge.nextSibling;return;case y:return L(A,l.name,l.value);case p:return A.push(l.data.replace(/[<&]/g,H).replace(/]]>/g,"]]&gt;"));case E:return A.push("<![CDATA[",l.data,"]]>");case g:return A.push("<!--",l.data,"-->");case D:var ht=l.publicId,gt=l.systemId;if(A.push("<!DOCTYPE ",l.name),ht)A.push(" PUBLIC ",ht),gt&&gt!="."&&A.push(" ",gt),A.push(">");else if(gt&&gt!=".")A.push(" SYSTEM ",gt,">");else{var St=l.internalSubset;St&&A.push(" [",St,"]"),A.push(">")}return;case c:return A.push("<?",l.target," ",l.data,"?>");case v:return A.push("&",l.nodeName,";");default:A.push("??",l.nodeName)}}function ge(l,A,U){var h;switch(A.nodeType){case d:h=A.cloneNode(!1),h.ownerDocument=l;case b:break;case y:U=!0;break}if(h||(h=A.cloneNode(!1)),h.ownerDocument=l,h.parentNode=null,U)for(var q=A.firstChild;q;)h.appendChild(ge(l,q,U)),q=q.nextSibling;return h}function Te(l,A,U){var h=new A.constructor;for(var q in A)if(Object.prototype.hasOwnProperty.call(A,q)){var Q=A[q];typeof Q!="object"&&Q!=h[q]&&(h[q]=Q)}switch(A.childNodes&&(h.childNodes=new M),h.ownerDocument=l,h.nodeType){case d:var T=A.attributes,j=h.attributes=new ce,ne=T.length;j._ownerElement=h;for(var Ie=0;Ie<ne;Ie++)h.setAttributeNode(Te(l,T.item(Ie),!0));break;case y:U=!0}if(U)for(var De=A.firstChild;De;)h.appendChild(Te(l,De,U)),De=De.nextSibling;return h}function G(l,A,U){l[A]=U}try{if(Object.defineProperty){let l=function(A){switch(A.nodeType){case d:case b:var U=[];for(A=A.firstChild;A;)A.nodeType!==7&&A.nodeType!==8&&U.push(l(A)),A=A.nextSibling;return U.join("");default:return A.nodeValue}};var le=l;Object.defineProperty(x.prototype,"length",{get:function(){return V(this),this.$$length}}),Object.defineProperty(W.prototype,"textContent",{get:function(){return l(this)},set:function(A){switch(this.nodeType){case d:case b:for(;this.firstChild;)this.removeChild(this.firstChild);(A||String(A))&&this.appendChild(this.ownerDocument.createTextNode(A));break;default:this.data=A,this.value=A,this.nodeValue=A}}}),G=function(A,U,h){A["$$"+U]=h}}}catch{}return Tt.DocumentType=Me,Tt.DOMException=k,Tt.DOMImplementation=be,Tt.Element=se,Tt.Node=W,Tt.NodeList=M,Tt.XMLSerializer=We,Tt}var Ft={},qr={},Ki;function Is(){return Ki||(Ki=1,(function(N){var e=dr().freeze;N.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),N.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),N.entityMap=N.HTML_ENTITIES})(qr)),qr}var tr={},Ji;function Rs(){if(Ji)return tr;Ji=1;var N=dr().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),i=0,n=1,s=2,a=3,o=4,f=5,m=6,d=7;function y(C,B){this.message=C,this.locator=B,Error.captureStackTrace&&Error.captureStackTrace(this,y)}y.prototype=new Error,y.prototype.name=y.name;function p(){}p.prototype={parse:function(C,B,Y){var k=this.domBuilder;k.startDocument(),D(B,B={}),E(C,B,Y,k,this.errorHandler),k.endDocument()}};function E(C,B,Y,k,M){function x(se){if(se>65535){se-=65536;var K=55296+(se>>10),ue=56320+(se&1023);return String.fromCharCode(K,ue)}else return String.fromCharCode(se)}function V(se){var K=se.slice(1,-1);return K in Y?Y[K]:K.charAt(0)==="#"?x(parseInt(K.substr(1).replace("x","0x"))):(M.error("entity not found:"+se),se)}function ce(se){if(se>fe){var K=C.substring(fe,se).replace(/&#?\w+;/g,V);W&&$(fe),k.characters(K,0,se-fe),fe=se}}function $(se,K){for(;se>=re&&(K=be.exec(C));)ae=K.index,re=ae+K[0].length,W.lineNumber++;W.columnNumber=se-ae+1}for(var ae=0,re=0,be=/.*(?:\r\n?|\n)|.*$/g,W=k.locator,H=[{currentNSMap:B}],_e={},fe=0;;){try{var pe=C.indexOf("<",fe);if(pe<0){if(!C.substr(fe).match(/^\s*$/)){var ze=k.doc,Pe=ze.createTextNode(C.substr(fe));ze.appendChild(Pe),k.currentElement=Pe}return}switch(pe>fe&&ce(pe),C.charAt(pe+1)){case"/":var ie=C.indexOf(">",pe+3),xe=C.substring(pe+2,ie).replace(/[ \t\n\r]+$/g,""),Oe=H.pop();ie<0?(xe=C.substring(pe+2).replace(/[\s<].*/,""),M.error("end tag name: "+xe+" is not complete:"+Oe.tagName),ie=pe+1+xe.length):xe.match(/\s</)&&(xe=xe.replace(/[\s<].*/,""),M.error("end tag name: "+xe+" maybe not complete"),ie=pe+1+xe.length);var Ue=Oe.localNSMap,Ne=Oe.tagName==xe,Fe=Ne||Oe.tagName&&Oe.tagName.toLowerCase()==xe.toLowerCase();if(Fe){if(k.endElement(Oe.uri,Oe.localName,xe),Ue)for(var Le in Ue)Object.prototype.hasOwnProperty.call(Ue,Le)&&k.endPrefixMapping(Le);Ne||M.fatalError("end tag name: "+xe+" is not match the current start tagName:"+Oe.tagName)}else H.push(Oe);ie++;break;case"?":W&&$(pe),ie=S(C,pe,k);break;case"!":W&&$(pe),ie=b(C,pe,k,M);break;default:W&&$(pe);var w=new I,oe=H[H.length-1].currentNSMap,ie=u(C,pe,w,oe,V,M),F=w.length;if(!w.closed&&_(C,ie,w.tagName,_e)&&(w.closed=!0,Y.nbsp||M.warning("unclosed xml attribute")),W&&F){for(var z=v(W,{}),X=0;X<F;X++){var he=w[X];$(he.offset),he.locator=v(W,{})}k.locator=z,c(w,k,oe)&&H.push(w),k.locator=W}else c(w,k,oe)&&H.push(w);N.isHTML(w.uri)&&!w.closed?ie=g(C,ie,w.tagName,V,k):ie++}}catch(se){if(se instanceof y)throw se;M.error("element parse error: "+se),ie=-1}ie>fe?fe=ie:ce(Math.max(pe,fe)+1)}}function v(C,B){return B.lineNumber=C.lineNumber,B.columnNumber=C.columnNumber,B}function u(C,B,Y,k,M,x){function V(W,H,_e){Y.attributeNames.hasOwnProperty(W)&&x.fatalError("Attribute "+W+" redefined"),Y.addValue(W,H,_e)}for(var ce,$,ae=++B,re=i;;){var be=C.charAt(ae);switch(be){case"=":if(re===n)ce=C.slice(B,ae),re=a;else if(re===s)re=a;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(re===a||re===n)if(re===n&&(x.warning('attribute value must after "="'),ce=C.slice(B,ae)),B=ae+1,ae=C.indexOf(be,B),ae>0)$=C.slice(B,ae).replace(/&#?\w+;/g,M),V(ce,$,B-1),re=f;else throw new Error("attribute value no end '"+be+"' match");else if(re==o)$=C.slice(B,ae).replace(/&#?\w+;/g,M),V(ce,$,B),x.warning('attribute "'+ce+'" missed start quot('+be+")!!"),B=ae+1,re=f;else throw new Error('attribute value must after "="');break;case"/":switch(re){case i:Y.setTagName(C.slice(B,ae));case f:case m:case d:re=d,Y.closed=!0;case o:case n:break;case s:Y.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return x.error("unexpected end of input"),re==i&&Y.setTagName(C.slice(B,ae)),ae;case">":switch(re){case i:Y.setTagName(C.slice(B,ae));case f:case m:case d:break;case o:case n:$=C.slice(B,ae),$.slice(-1)==="/"&&(Y.closed=!0,$=$.slice(0,-1));case s:re===s&&($=ce),re==o?(x.warning('attribute "'+$+'" missed quot(")!'),V(ce,$.replace(/&#?\w+;/g,M),B)):((!N.isHTML(k[""])||!$.match(/^(?:disabled|checked|selected)$/i))&&x.warning('attribute "'+$+'" missed value!! "'+$+'" instead!!'),V($,$,B));break;case a:throw new Error("attribute value missed!!")}return ae;case"":be=" ";default:if(be<=" ")switch(re){case i:Y.setTagName(C.slice(B,ae)),re=m;break;case n:ce=C.slice(B,ae),re=s;break;case o:var $=C.slice(B,ae).replace(/&#?\w+;/g,M);x.warning('attribute "'+$+'" missed quot(")!!'),V(ce,$,B);case f:re=m;break}else switch(re){case s:Y.tagName,(!N.isHTML(k[""])||!ce.match(/^(?:disabled|checked|selected)$/i))&&x.warning('attribute "'+ce+'" missed value!! "'+ce+'" instead2!!'),V(ce,ce,B),B=ae,re=n;break;case f:x.warning('attribute space is required"'+ce+'"!!');case m:re=n,B=ae;break;case a:re=o,B=ae;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}ae++}}function c(C,B,Y){for(var k=C.tagName,M=null,be=C.length;be--;){var x=C[be],V=x.qName,ce=x.value,W=V.indexOf(":");if(W>0)var $=x.prefix=V.slice(0,W),ae=V.slice(W+1),re=$==="xmlns"&&ae;else ae=V,$=null,re=V==="xmlns"&&"";x.localName=ae,re!==!1&&(M==null&&(M={},D(Y,Y={})),Y[re]=M[re]=ce,x.uri=N.XMLNS,B.startPrefixMapping(re,ce))}for(var be=C.length;be--;){x=C[be];var $=x.prefix;$&&($==="xml"&&(x.uri=N.XML),$!=="xmlns"&&(x.uri=Y[$||""]))}var W=k.indexOf(":");W>0?($=C.prefix=k.slice(0,W),ae=C.localName=k.slice(W+1)):($=null,ae=C.localName=k);var H=C.uri=Y[$||""];if(B.startElement(H,ae,k,C),C.closed){if(B.endElement(H,ae,k),M)for($ in M)Object.prototype.hasOwnProperty.call(M,$)&&B.endPrefixMapping($)}else return C.currentNSMap=Y,C.localNSMap=M,!0}function g(C,B,Y,k,M){if(/^(?:script|textarea)$/i.test(Y)){var x=C.indexOf("</"+Y+">",B),V=C.substring(B+1,x);if(/[&<]/.test(V))return/^script$/i.test(Y)?(M.characters(V,0,V.length),x):(V=V.replace(/&#?\w+;/g,k),M.characters(V,0,V.length),x)}return B+1}function _(C,B,Y,k){var M=k[Y];return M==null&&(M=C.lastIndexOf("</"+Y+">"),M<B&&(M=C.lastIndexOf("</"+Y)),k[Y]=M),M<B}function D(C,B){for(var Y in C)Object.prototype.hasOwnProperty.call(C,Y)&&(B[Y]=C[Y])}function b(C,B,Y,k){var M=C.charAt(B+2);switch(M){case"-":if(C.charAt(B+3)==="-"){var x=C.indexOf("-->",B+4);return x>B?(Y.comment(C,B+4,x-B-4),x+3):(k.error("Unclosed comment"),-1)}else return-1;default:if(C.substr(B+3,6)=="CDATA["){var x=C.indexOf("]]>",B+9);return Y.startCDATA(),Y.characters(C,B+9,x-B-9),Y.endCDATA(),x+3}var V=R(C,B),ce=V.length;if(ce>1&&/!doctype/i.test(V[0][0])){var $=V[1][0],ae=!1,re=!1;ce>3&&(/^public$/i.test(V[2][0])?(ae=V[3][0],re=ce>4&&V[4][0]):/^system$/i.test(V[2][0])&&(re=V[3][0]));var be=V[ce-1];return Y.startDTD($,ae,re),Y.endDTD(),be.index+be[0].length}}return-1}function S(C,B,Y){var k=C.indexOf("?>",B);if(k){var M=C.substring(B,k).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return M?(M[0].length,Y.processingInstruction(M[1],M[2]),k+2):-1}return-1}function I(){this.attributeNames={}}I.prototype={setTagName:function(C){if(!r.test(C))throw new Error("invalid tagName:"+C);this.tagName=C},addValue:function(C,B,Y){if(!r.test(C))throw new Error("invalid attribute:"+C);this.attributeNames[C]=this.length,this[this.length++]={qName:C,value:B,offset:Y}},length:0,getLocalName:function(C){return this[C].localName},getLocator:function(C){return this[C].locator},getQName:function(C){return this[C].qName},getURI:function(C){return this[C].uri},getValue:function(C){return this[C].value}};function R(C,B){var Y,k=[],M=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(M.lastIndex=B,M.exec(C);Y=M.exec(C);)if(k.push(Y),Y[1])return k}return tr.XMLReader=p,tr.ParseError=y,tr}var $i;function Ns(){if($i)return Ft;$i=1;var N=dr(),e=Sn(),t=Is(),r=Rs(),i=e.DOMImplementation,n=N.NAMESPACE,s=r.ParseError,a=r.XMLReader;function o(v){this.options=v||{locator:{}}}o.prototype.parseFromString=function(v,u){var c=this.options,g=new a,_=c.domBuilder||new m,D=c.errorHandler,b=c.locator,S=c.xmlns||{},I=/\/x?html?$/.test(u),R=I?t.HTML_ENTITIES:t.XML_ENTITIES;return b&&_.setDocumentLocator(b),g.errorHandler=f(D,_,b),g.domBuilder=c.domBuilder||_,I&&(S[""]=n.HTML),S.xml=S.xml||n.XML,v&&typeof v=="string"?g.parse(v,S,R):g.errorHandler.error("invalid doc source"),_.doc};function f(v,u,c){if(!v){if(u instanceof m)return u;v=u}var g={},_=v instanceof Function;c=c||{};function D(b){var S=v[b];!S&&_&&(S=v.length==2?function(I){v(b,I)}:v),g[b]=S&&function(I){S("[xmldom "+b+"]	"+I+y(c))}||function(){}}return D("warning"),D("error"),D("fatalError"),g}function m(){this.cdata=!1}function d(v,u){u.lineNumber=v.lineNumber,u.columnNumber=v.columnNumber}m.prototype={startDocument:function(){this.doc=new i().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(v,u,c,g){var _=this.doc,D=_.createElementNS(v,c||u),b=g.length;E(this,D),this.currentElement=D,this.locator&&d(this.locator,D);for(var S=0;S<b;S++){var v=g.getURI(S),I=g.getValue(S),c=g.getQName(S),R=_.createAttributeNS(v,c);this.locator&&d(g.getLocator(S),R),R.value=R.nodeValue=I,D.setAttributeNode(R)}},endElement:function(v,u,c){var g=this.currentElement;g.tagName,this.currentElement=g.parentNode},startPrefixMapping:function(v,u){},endPrefixMapping:function(v){},processingInstruction:function(v,u){var c=this.doc.createProcessingInstruction(v,u);this.locator&&d(this.locator,c),E(this,c)},ignorableWhitespace:function(v,u,c){},characters:function(v,u,c){if(v=p.apply(this,arguments),v){if(this.cdata)var g=this.doc.createCDATASection(v);else var g=this.doc.createTextNode(v);this.currentElement?this.currentElement.appendChild(g):/^\s*$/.test(v)&&this.doc.appendChild(g),this.locator&&d(this.locator,g)}},skippedEntity:function(v){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(v){(this.locator=v)&&(v.lineNumber=0)},comment:function(v,u,c){v=p.apply(this,arguments);var g=this.doc.createComment(v);this.locator&&d(this.locator,g),E(this,g)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(v,u,c){var g=this.doc.implementation;if(g&&g.createDocumentType){var _=g.createDocumentType(v,u,c);this.locator&&d(this.locator,_),E(this,_),this.doc.doctype=_}},warning:function(v){console.warn("[xmldom warning]	"+v,y(this.locator))},error:function(v){console.error("[xmldom error]	"+v,y(this.locator))},fatalError:function(v){throw new s(v,this.locator)}};function y(v){if(v)return`
@`+(v.systemId||"")+"#[line:"+v.lineNumber+",col:"+v.columnNumber+"]"}function p(v,u,c){return typeof v=="string"?v.substr(u,c):v.length>=u+c||u?new java.lang.String(v,u,c)+"":v}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(v){m.prototype[v]=function(){return null}});function E(v,u){v.currentElement?v.currentElement.appendChild(u):v.doc.appendChild(u)}return Ft.__DOMHandler=m,Ft.DOMParser=o,Ft.DOMImplementation=e.DOMImplementation,Ft.XMLSerializer=e.XMLSerializer,Ft}var Qi;function Os(){if(Qi)return Gt;Qi=1;var N=Sn();return Gt.DOMImplementation=N.DOMImplementation,Gt.XMLSerializer=N.XMLSerializer,Gt.DOMParser=Ns().DOMParser,Gt}var Tn=Os();const mi=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,Bs=1,Ls=3,In=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function pr(){var N=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(N+Math.random()*16)%16|0;return N=Math.floor(N/16),(t=="x"?r:r&7|8).toString(16)});return e}function zs(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function Rn(N){return!!(N&&N.nodeType==1)}function st(N){return!isNaN(parseFloat(N))&&isFinite(N)}function Nn(N){let e=parseFloat(N);return st(N)===!1?!1:typeof N=="string"&&N.indexOf(".")>-1?!0:Math.floor(e)!==e}function Mt(N){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],r=N.toLowerCase(),i=e.length;if(typeof document>"u"||typeof document.body.style[r]<"u")return N;for(var n=0;n<i;n++)if(typeof document.body.style[t[n]+r]<"u")return t[n]+r;return N}function On(N){for(var e=1,t=arguments.length;e<t;e++){var r=arguments[e];for(var i in r)N[i]===void 0&&(N[i]=r[i])}return N}function ct(N){var e=[].slice.call(arguments,1);return e.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(N,r,Object.getOwnPropertyDescriptor(t,r))})}),N}function Fs(N,e,t){var r=Ht(N,e,t);return e.splice(r,0,N),r}function Ht(N,e,t,r,i){var n=r||0,s=i||e.length,a=parseInt(n+(s-n)/2),o;return t||(t=function(f,m){if(f>m)return 1;if(f<m)return-1;if(f==m)return 0}),s-n<=0?a:(o=t(e[a],N),s-n===1?o>=0?a:a+1:o===0?a:o===-1?Ht(N,e,t,a,s):Ht(N,e,t,n,a))}function sr(N,e,t,r,i){var n=r||0,s=i||e.length,a=parseInt(n+(s-n)/2),o;return t||(t=function(f,m){if(f>m)return 1;if(f<m)return-1;if(f==m)return 0}),s-n<=0?-1:(o=t(e[a],N),s-n===1?o===0?a:-1:o===0?a:o===-1?sr(N,e,t,a,s):sr(N,e,t,n,a))}function ir(N){var e=window.getComputedStyle(N),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,n=0;return t.forEach(function(s){i+=parseFloat(e[s])||0}),r.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:i}}function ar(N){var e=window.getComputedStyle(N),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],r=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],i=0,n=0;return t.forEach(function(s){i+=parseFloat(e[s])||0}),r.forEach(function(s){n+=parseFloat(e[s])||0}),{height:n,width:i}}function li(N){let e,t=N.ownerDocument;if(N.nodeType==Node.TEXT_NODE){let r=t.createRange();r.selectNodeContents(N),e=r.getBoundingClientRect()}else e=N.getBoundingClientRect();return e}function or(){var N=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:N,bottom:e,width:N,height:e}}function gi(N,e){for(var t=N.parentNode,r=t.childNodes,i,n=-1,s=0;s<r.length&&(i=r[s],i.nodeType===e&&n++,i!=N);s++);return n}function Ps(N){return gi(N,Ls)}function Bn(N){return gi(N,Bs)}function Kt(N){return["xml","opf","ncx"].indexOf(N)>-1}function Ln(N,e){return new Blob([N],{type:e})}function ur(N,e){var t,r=Ln(N,e);return t=In.createObjectURL(r),t}function zn(N){return In.revokeObjectURL(N)}function hi(N,e){var t,r;if(typeof N=="string")return t=btoa(N),r="data:"+e+";base64,"+t,r}function Fn(N){return Object.prototype.toString.call(N).slice(8,-1)}function Ct(N,e,t){var r,i;return typeof DOMParser>"u"||t?i=Tn.DOMParser:i=DOMParser,N.charCodeAt(0)===65279&&(N=N.slice(1)),r=new i().parseFromString(N,e),r}function et(N,e){var t;if(!N)throw new Error("No Element Provided");if(typeof N.querySelector<"u")return N.querySelector(e);if(t=N.getElementsByTagName(e),t.length)return t[0]}function It(N,e){return typeof N.querySelector<"u"?N.querySelectorAll(e):N.getElementsByTagName(e)}function qt(N,e,t){var r,i;if(typeof N.querySelector<"u"){e+="[";for(var n in t)e+=n+"~='"+t[n]+"'";return e+="]",N.querySelector(e)}else if(r=N.getElementsByTagName(e),i=Array.prototype.slice.call(r,0).filter(function(s){for(var a in t)if(s.getAttribute(a)===t[a])return!0;return!1}),i)return i[0]}function lr(N,e){var t=N.ownerDocument||N;typeof t.createTreeWalker<"u"?Pn(N,e,NodeFilter.SHOW_TEXT):vi(N,function(r){r&&r.nodeType===3&&e(r)})}function Pn(N,e,t){var r=document.createTreeWalker(N,t,null,!1);let i;for(;i=r.nextNode();)e(i)}function vi(N,e){if(e(N))return!0;if(N=N.firstChild,N)do{if(vi(N,e))return!0;N=N.nextSibling}while(N)}function Un(N){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(N),r.onloadend=function(){e(r.result)}})}function Ye(){this.resolve=null,this.reject=null,this.id=pr(),this.promise=new Promise((N,e)=>{this.resolve=N,this.reject=e}),Object.freeze(this)}function hr(N,e,t){var r;if(typeof N.querySelector<"u"&&(r=N.querySelector(`${e}[*|type="${t}"]`)),!r||r.length===0){r=It(N,e);for(var i=0;i<r.length;i++)if(r[i].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||r[i].getAttribute("epub:type")===t)return r[i]}else return r}function fi(N){for(var e=[],t=N.childNodes,r=0;r<t.length;r++){let i=t[r];i.nodeType===1&&e.push(i)}return e}function ci(N){for(var e=[N];N;N=N.parentNode)e.unshift(N);return e}function jt(N,e,t){for(var r=[],i=N.childNodes,n=0;n<i.length;n++){let s=i[n];if(s.nodeType===1&&s.nodeName.toLowerCase()===e){if(t)return s;r.push(s)}}if(!t)return r}function Us(N,e){let t;if(!(N===null||e===""))for(t=N.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class Mn{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,r=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,r),this.setEnd(t,r+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var r=ci(e||this.startContainer),i=ci(t||this.endContainer);if(r[0]==i[0]){for(var n=0;n<r.length;n++)if(r[n]!=i[n])return r[n-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const Ms=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:Mn,blob2base64:Un,borders:ar,bounds:ir,createBase64Url:hi,createBlob:Ln,createBlobUrl:ur,defaults:On,defer:Ye,documentHeight:zs,extend:ct,filterChildren:jt,findChildren:fi,getParentByTagName:Us,indexOfElementNode:Bn,indexOfNode:gi,indexOfSorted:sr,indexOfTextNode:Ps,insert:Fs,isElement:Rn,isFloat:Nn,isNumber:st,isXml:Kt,locationOf:Ht,nodeBounds:li,parents:ci,parse:Ct,prefixed:Mt,qs:et,qsa:It,qsp:qt,querySelectorByType:hr,requestAnimationFrame:mi,revokeBlobUrl:zn,sprint:lr,treeWalker:Pn,type:Fn,uuid:pr,walk:vi,windowBounds:or},Symbol.toStringTag,{value:"Module"}));var jr,en;function qs(){if(en)return jr;if(en=1,!N)var N={cwd:function(){return"/"}};function e(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+n)}function t(n,s){for(var a="",o=-1,f=0,m,d=0;d<=n.length;++d){if(d<n.length)m=n.charCodeAt(d);else{if(m===47)break;m=47}if(m===47){if(!(o===d-1||f===1))if(o!==d-1&&f===2){if(a.length<2||a.charCodeAt(a.length-1)!==46||a.charCodeAt(a.length-2)!==46){if(a.length>2){for(var y=a.length-1,p=y;p>=0&&a.charCodeAt(p)!==47;--p);if(p!==y){p===-1?a="":a=a.slice(0,p),o=d,f=0;continue}}else if(a.length===2||a.length===1){a="",o=d,f=0;continue}}s&&(a.length>0?a+="/..":a="..")}else a.length>0?a+="/"+n.slice(o+1,d):a=n.slice(o+1,d);o=d,f=0}else m===46&&f!==-1?++f:f=-1}return a}function r(n,s){var a=s.dir||s.root,o=s.base||(s.name||"")+(s.ext||"");return a?a===s.root?a+o:a+n+o:o}var i={resolve:function(){for(var s="",a=!1,o,f=arguments.length-1;f>=-1&&!a;f--){var m;f>=0?m=arguments[f]:(o===void 0&&(o=N.cwd()),m=o),e(m),m.length!==0&&(s=m+"/"+s,a=m.charCodeAt(0)===47)}return s=t(s,!a),a?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(s){if(e(s),s.length===0)return".";var a=s.charCodeAt(0)===47,o=s.charCodeAt(s.length-1)===47;return s=t(s,!a),s.length===0&&!a&&(s="."),s.length>0&&o&&(s+="/"),a?"/"+s:s},isAbsolute:function(s){return e(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,a=0;a<arguments.length;++a){var o=arguments[a];e(o),o.length>0&&(s===void 0?s=o:s+="/"+o)}return s===void 0?".":i.normalize(s)},relative:function(s,a){if(e(s),e(a),s===a||(s=i.resolve(s),a=i.resolve(a),s===a))return"";for(var o=1;o<s.length&&s.charCodeAt(o)===47;++o);for(var f=s.length,m=f-o,d=1;d<a.length&&a.charCodeAt(d)===47;++d);for(var y=a.length,p=y-d,E=m<p?m:p,v=-1,u=0;u<=E;++u){if(u===E){if(p>E){if(a.charCodeAt(d+u)===47)return a.slice(d+u+1);if(u===0)return a.slice(d+u)}else m>E&&(s.charCodeAt(o+u)===47?v=u:u===0&&(v=0));break}var c=s.charCodeAt(o+u),g=a.charCodeAt(d+u);if(c!==g)break;c===47&&(v=u)}var _="";for(u=o+v+1;u<=f;++u)(u===f||s.charCodeAt(u)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+a.slice(d+v):(d+=v,a.charCodeAt(d)===47&&++d,a.slice(d))},_makeLong:function(s){return s},dirname:function(s){if(e(s),s.length===0)return".";for(var a=s.charCodeAt(0),o=a===47,f=-1,m=!0,d=s.length-1;d>=1;--d)if(a=s.charCodeAt(d),a===47){if(!m){f=d;break}}else m=!1;return f===-1?o?"/":".":o&&f===1?"//":s.slice(0,f)},basename:function(s,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');e(s);var o=0,f=-1,m=!0,d;if(a!==void 0&&a.length>0&&a.length<=s.length){if(a.length===s.length&&a===s)return"";var y=a.length-1,p=-1;for(d=s.length-1;d>=0;--d){var E=s.charCodeAt(d);if(E===47){if(!m){o=d+1;break}}else p===-1&&(m=!1,p=d+1),y>=0&&(E===a.charCodeAt(y)?--y===-1&&(f=d):(y=-1,f=p))}return o===f?f=p:f===-1&&(f=s.length),s.slice(o,f)}else{for(d=s.length-1;d>=0;--d)if(s.charCodeAt(d)===47){if(!m){o=d+1;break}}else f===-1&&(m=!1,f=d+1);return f===-1?"":s.slice(o,f)}},extname:function(s){e(s);for(var a=-1,o=0,f=-1,m=!0,d=0,y=s.length-1;y>=0;--y){var p=s.charCodeAt(y);if(p===47){if(!m){o=y+1;break}continue}f===-1&&(m=!1,f=y+1),p===46?a===-1?a=y:d!==1&&(d=1):a!==-1&&(d=-1)}return a===-1||f===-1||d===0||d===1&&a===f-1&&a===o+1?"":s.slice(a,f)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof s);return r("/",s)},parse:function(s){e(s);var a={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return a;var o=s.charCodeAt(0),f=o===47,m;f?(a.root="/",m=1):m=0;for(var d=-1,y=0,p=-1,E=!0,v=s.length-1,u=0;v>=m;--v){if(o=s.charCodeAt(v),o===47){if(!E){y=v+1;break}continue}p===-1&&(E=!1,p=v+1),o===46?d===-1?d=v:u!==1&&(u=1):d!==-1&&(u=-1)}return d===-1||p===-1||u===0||u===1&&d===p-1&&d===y+1?p!==-1&&(y===0&&f?a.base=a.name=s.slice(1,p):a.base=a.name=s.slice(y,p)):(y===0&&f?(a.name=s.slice(1,d),a.base=s.slice(1,p)):(a.name=s.slice(y,d),a.base=s.slice(y,p)),a.ext=s.slice(d,p)),y>0?a.dir=s.slice(0,y-1):f&&(a.dir="/"),a},sep:"/",delimiter:":",posix:null};return jr=i,jr}var js=qs();const Nt=Ot(js);class Rt{constructor(e){var t,r;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),r=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=r.dir+"/",this.filename=r.base,this.extension=r.ext.slice(1)}parse(e){return Nt.parse(e)}isAbsolute(e){return Nt.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Nt.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Nt.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class At{constructor(e,t){var r=e.indexOf("://")>-1,i=e,n;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!r&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),r||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,i=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(n=new Rt(this.base),i=n.resolve(i))}this.Path=new Rt(i),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,r;return t?e:(r=Nt.resolve(this.directory,e),this.origin+r)}relative(e){return Nt.relative(e,this.directory)}toString(){return this.href}}const Pt=1,bt=3,Ws=9;class Xe{constructor(e,t,r){var i;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Xe))return new Xe(e,t,r);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),i=this.checkType(e),i==="string")return this.str=e,ct(this,this.parse(e));if(i==="range")return ct(this,this.fromRange(e,this.base,r));if(i==="node")return ct(this,this.fromNode(e,this.base,r));if(i==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(Fn(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof Xe?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},r,i,n;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),r=this.getChapterComponent(e),r?(t.base=this.parseComponent(r),i=this.getPathComponent(e),t.path=this.parseComponent(i),n=this.getRange(e),n&&(t.range=!0,t.start=this.parseComponent(n[0]),t.end=this.parseComponent(n[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},r=e.split(":"),i=r[0].split("/"),n;return r.length>1&&(n=r[1],t.terminal=this.parseTerminal(n)),i[0]===""&&i.shift(),t.steps=i.map((function(s){return this.parseStep(s)}).bind(this)),t}parseStep(e){var t,r,i,n,s;if(n=e.match(/\[(.*)\]/),n&&n[1]&&(s=n[1]),r=parseInt(e),!isNaN(r))return r%2===0?(t="element",i=r/2-1):(t="text",i=(r-1)/2),{type:t,index:i,id:s||null}}parseTerminal(e){var t,r,i=e.match(/\[(.*)\]/);return i&&i[1]?(t=parseInt(e.split("[")[0]),r=i[1]):t=parseInt(e),st(t)||(t=null),{offset:t,assertion:r}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var r="";return t.type==="element"&&(r+=(t.index+1)*2),t.type==="text"&&(r+=1+2*t.index),t.id&&(r+="["+t.id+"]"),r}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var r,i,n,s;if(typeof e=="string"&&(e=new Xe(e)),typeof t=="string"&&(t=new Xe(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(r=e.path.steps.concat(e.start.steps),n=e.start.terminal):(r=e.path.steps,n=e.path.terminal),t.range?(i=t.path.steps.concat(t.start.steps),s=t.start.terminal):(i=t.path.steps,s=t.path.terminal);for(var a=0;a<r.length;a++){if(!r[a])return-1;if(!i[a]||r[a].index>i[a].index)return 1;if(r[a].index<i[a].index)return-1}return r.length<i.length?-1:n.offset>s.offset?1:n.offset<s.offset?-1:0}step(e){var t=e.nodeType===bt?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var r=this.filter(e,t),i;if(r)return i=r.nodeType===bt?"text":"element",{id:r.id,tagName:r.tagName,type:i,index:this.filteredPosition(r,t)}}pathTo(e,t,r){for(var i={steps:[],terminal:{offset:null,assertion:null}},n=e,s;n&&n.parentNode&&n.parentNode.nodeType!=Ws;)r?s=this.filteredStep(n,r):s=this.step(n),s&&i.steps.unshift(s),n=n.parentNode;return t!=null&&t>=0&&(i.terminal.offset=t,i.steps[i.steps.length-1].type!="text"&&i.steps.push({type:"text",index:0})),i}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null},n=e.startContainer,s=e.endContainer,a=e.startOffset,o=e.endOffset,f=!1;if(r&&(f=n.ownerDocument.querySelector("."+r)!=null),typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),e.collapsed)f&&(a=this.patchOffset(n,a,r)),i.path=this.pathTo(n,a,r);else{i.range=!0,f&&(a=this.patchOffset(n,a,r)),i.start=this.pathTo(n,a,r),f&&(o=this.patchOffset(s,o,r)),i.end=this.pathTo(s,o,r),i.path={steps:[],terminal:null};var m=i.start.steps.length,d;for(d=0;d<m&&this.equalStep(i.start.steps[d],i.end.steps[d]);d++)d===m-1?i.start.terminal===i.end.terminal&&(i.path.steps.push(i.start.steps[d]),i.range=!1):i.path.steps.push(i.start.steps[d]);i.start.steps=i.start.steps.slice(i.path.steps.length),i.end.steps=i.end.steps.slice(i.path.steps.length)}return i}fromNode(e,t,r){var i={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(i.base=this.parseComponent(t),i.spinePos=i.base.steps[1].index):typeof t=="object"&&(i.base=t),i.path=this.pathTo(e,null,r),i}filter(e,t){var r,i,n,s,a,o=!1;return e.nodeType===bt?(o=!0,n=e.parentNode,r=e.parentNode.classList.contains(t)):(o=!1,r=e.classList.contains(t)),r&&o?(s=n.previousSibling,a=n.nextSibling,s&&s.nodeType===bt?i=s:a&&a.nodeType===bt&&(i=a),i||e):r&&!o?!1:e}patchOffset(e,t,r){if(e.nodeType!=bt)throw new Error("Anchor must be a text node");var i=e,n=t;for(e.parentNode.classList.contains(r)&&(i=e.parentNode);i.previousSibling;){if(i.previousSibling.nodeType===Pt)if(i.previousSibling.classList.contains(r))n+=i.previousSibling.textContent.length;else break;else n+=i.previousSibling.textContent.length;i=i.previousSibling}return n}normalizedMap(e,t,r){var i={},n=-1,s,a=e.length,o,f;for(s=0;s<a;s++)o=e[s].nodeType,o===Pt&&e[s].classList.contains(r)&&(o=bt),s>0&&o===bt&&f===bt?i[s]=n:t===o&&(n=n+1,i[s]=n),f=o;return i}position(e){var t,r;return e.nodeType===Pt?(t=e.parentNode.children,t||(t=fi(e.parentNode)),r=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),r=t.indexOf(e)),r}filteredPosition(e,t){var r,i,n;return e.nodeType===Pt?(r=e.parentNode.children,n=this.normalizedMap(r,Pt,t)):(r=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,r=e.parentNode.childNodes),n=this.normalizedMap(r,bt,t)),i=Array.prototype.indexOf.call(r,e),n[i]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("*[position()="+i+" and @id='"+r.id+"']"):r.type==="text"?t.push("text()["+i+"]"):t.push("*["+i+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(r){var i=r.index+1;r.id?t.push("#"+r.id):r.type==="text"||t.push("*:nth-child("+i+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(r){return r.nodeType===bt?!0:!!(t&&r.classList.contains(t))})}walkToNode(e,t,r){var i=t||document,n=i.documentElement,s,a,o=e.length,f;for(f=0;f<o&&(a=e[f],a.type==="element"?a.id?n=i.getElementById(a.id):(s=n.children||fi(n),n=s[a.index]):a.type==="text"&&(n=this.textNodes(n,r)[a.index]),!!n);f++);return n}findNode(e,t,r){var i=t||document,n,s;return!r&&typeof i.evaluate<"u"?(s=this.stepsToXpath(e),n=i.evaluate(s,i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):r?n=this.walkToNode(e,i,r):n=this.walkToNode(e,i),n}fixMiss(e,t,r,i){var n=this.findNode(e.slice(0,-1),r,i),s=n.childNodes,a=this.normalizedMap(s,bt,i),o,f,m=e[e.length-1].index;for(let d in a){if(!a.hasOwnProperty(d))return;if(a[d]===m)if(o=s[d],f=o.textContent.length,t>f)t=t-f;else{o.nodeType===Pt?n=o.childNodes[0]:n=o;break}}return{container:n,offset:t}}toRange(e,t){var r=e||document,i,n,s,a,o,f=this,m,d,y=t?r.querySelector("."+t)!=null:!1,p;if(typeof r.createRange<"u"?i=r.createRange():i=new Mn,f.range?(n=f.start,m=f.path.steps.concat(n.steps),a=this.findNode(m,r,y?t:null),s=f.end,d=f.path.steps.concat(s.steps),o=this.findNode(d,r,y?t:null)):(n=f.path,m=f.path.steps,a=this.findNode(f.path.steps,r,y?t:null)),a)try{n.terminal.offset!=null?i.setStart(a,n.terminal.offset):i.setStart(a,0)}catch{p=this.fixMiss(m,n.terminal.offset,r,y?t:null),i.setStart(p.container,p.offset)}else return console.log("No startContainer found for",this.toString()),null;if(o)try{s.terminal.offset!=null?i.setEnd(o,s.terminal.offset):i.setEnd(o,0)}catch{p=this.fixMiss(d,f.end.terminal.offset,r,y?t:null),i.setEnd(p.container,p.offset)}return i}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,r){var i=parseInt(t),n=(e+1)*2,s="/"+n+"/";return s+=(i+1)*2,r&&(s+="["+r+"]"),s}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Dt{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let r=0;r<this.hooks.length;r++)if(t=this.hooks[r],t===e){this.hooks.splice(r,1);break}}trigger(){var e=arguments,t=this.context,r=[];return this.hooks.forEach(function(i){try{var n=i.apply(t,e)}catch(s){console.log(s)}n&&typeof n.then=="function"&&r.push(n)}),Promise.all(r)}list(){return this.hooks}clear(){return this.hooks=[]}}function qn(N,e){var t,r,i=e.url,n=i.indexOf("://")>-1;N&&(r=et(N,"head"),t=et(r,"base"),t||(t=N.createElement("base"),r.insertBefore(t,r.firstChild)),!n&&window&&window.location&&(i=window.location.origin+i),t.setAttribute("href",i))}function Hs(N,e){var t,r,i=e.canonical;N&&(t=et(N,"head"),r=et(t,"link[rel='canonical']"),r?r.setAttribute("href",i):(r=N.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",i),t.appendChild(r)))}function Zs(N,e){var t,r,i=e.idref;N&&(t=et(N,"head"),r=et(t,"link[property='dc.identifier']"),r?r.setAttribute("content",i):(r=N.createElement("meta"),r.setAttribute("name","dc.identifier"),r.setAttribute("content",i),t.appendChild(r)))}function Vs(N,e){var t=N.querySelectorAll("a[href]");if(t.length)for(var r=et(N.ownerDocument,"base"),i=r?r.getAttribute("href"):void 0,n=(function(a){var o=a.getAttribute("href");if(o.indexOf("mailto:")!==0){var f=o.indexOf("://")>-1;if(f)a.setAttribute("target","_blank");else{var m;try{m=new At(o,i)}catch{}a.onclick=function(){return m&&m.hash?e(m.Path.path+m.hash):e(m?m.Path.path:o),!1}}}}).bind(this),s=0;s<t.length;s++)n(t[s])}function tn(N,e,t){return e.forEach(function(r,i){r&&t[i]&&(r=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),N=N.replace(new RegExp(r,"g"),t[i]))}),N}function Jt(N,e,t,r){var i=typeof window<"u"?window.URL:!1,n=i?"blob":"arraybuffer",s=new Ye,a=new XMLHttpRequest,o=XMLHttpRequest.prototype,f;"overrideMimeType"in o||Object.defineProperty(o,"overrideMimeType",{value:function(){}}),t&&(a.withCredentials=!0),a.onreadystatechange=d,a.onerror=m,a.open("GET",N,!0);for(f in r)a.setRequestHeader(f,r[f]);e=="json"&&a.setRequestHeader("Accept","application/json"),e||(e=new Rt(N).extension),e=="blob"&&(a.responseType=n),Kt(e)&&a.overrideMimeType("text/xml"),e=="binary"&&(a.responseType="arraybuffer"),a.send();function m(y){s.reject(y)}function d(){if(this.readyState===XMLHttpRequest.DONE){var y=!1;if((this.responseType===""||this.responseType==="document")&&(y=this.responseXML),this.status===200||this.status===0||y){var p;if(!this.response&&!y)return s.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),s.promise;if(this.status===403)return s.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),s.promise;y?p=this.responseXML:Kt(e)?p=Ct(this.response,"text/xml"):e=="xhtml"?p=Ct(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?p=Ct(this.response,"text/html"):e=="json"?p=JSON.parse(this.response):e=="blob"?i?p=this.response:p=new Blob([this.response]):p=this.response,s.resolve(p)}else s.reject({status:this.status,message:this.response,stack:new Error().stack})}}return s.promise}class Gs{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new Dt(this),this.hooks.content=new Dt(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||Jt,r=new Ye,i=r.promise;return this.contents?r.resolve(this.contents):t(this.url).then((function(n){return this.document=n,this.contents=n.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){r.resolve(this.contents)}).bind(this)).catch(function(n){r.reject(n)}),i}base(){return qn(this.document,this)}render(e){var t=new Ye,r=t.promise;return this.output,this.load(e).then((function(i){var n=typeof navigator<"u"&&navigator.userAgent||"",s=n.indexOf("Trident")>=0,a;typeof XMLSerializer>"u"||s?a=Tn.DOMParser:a=XMLSerializer;var o=new a;return this.output=o.serializeToString(i),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){t.resolve(this.output)}).bind(this)).catch(function(i){t.reject(i)}),r}find(e){var t=this,r=[],i=e.toLowerCase(),n=function(s){for(var a=s.textContent.toLowerCase(),o=t.document.createRange(),f,m,d=-1,y,p=150;m!=-1;)m=a.indexOf(i,d+1),m!=-1&&(o=t.document.createRange(),o.setStart(s,m),o.setEnd(s,m+i.length),f=t.cfiFromRange(o),s.textContent.length<p?y=s.textContent:(y=s.textContent.substring(m-p/2,m+p/2),y="..."+y+"..."),r.push({cfi:f,excerpt:y})),d=m};return lr(t.document,function(s){n(s)}),r}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let r=[];const i=150,n=this,s=e.toLowerCase(),a=function(d){const E=d.reduce((v,u)=>v+u.textContent,"").toLowerCase().indexOf(s);if(E!=-1){const u=E+s.length;let c=0,g=0;if(E<d[0].length){let _;for(;c<d.length-1&&(g+=d[c].length,!(u<=g));)c+=1;let D=d[0],b=d[c],S=n.document.createRange();S.setStart(D,E);let I=d.slice(0,c).reduce((C,B)=>C+B.textContent.length,0);S.setEnd(b,I>u?u:u-I),_=n.cfiFromRange(S);let R=d.slice(0,c+1).reduce((C,B)=>C+B.textContent,"");R.length>i&&(R=R.substring(E-i/2,E+i/2),R="..."+R+"..."),r.push({cfi:_,excerpt:R})}}},o=document.createTreeWalker(n.document,NodeFilter.SHOW_TEXT,null,!1);let f,m=[];for(;f=o.nextNode();)m.push(f),m.length==t&&(a(m.slice(0,t)),m=m.slice(1,t));return m.length>0&&a(m),r}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(r){var i=r.replace("rendition:",""),n=i.indexOf("-"),s,a;n!=-1&&(s=i.slice(0,n),a=i.slice(n+1),t[s]=a)}),t}cfiFromRange(e){return new Xe(e,this.cfiBase).toString()}cfiFromElement(e){return new Xe(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class Ys{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Dt,this.hooks.content=new Dt,this.hooks.content.register(qn),this.hooks.content.register(Hs),this.hooks.content.register(Zs),this.epubcfi=new Xe,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,r){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((i,n)=>{var s=this.manifest[i.idref],a;i.index=n,i.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,i.index,i.id),i.href&&(i.url=t(i.href,!0),i.canonical=r(i.href)),s&&(i.href=s.href,i.url=t(i.href,!0),i.canonical=r(i.href),s.properties.length&&i.properties.push.apply(i.properties,s.properties)),i.linear==="yes"?(i.prev=(function(){let o=i.index;for(;o>0;){let f=this.get(o-1);if(f&&f.linear)return f;o-=1}}).bind(this),i.next=(function(){let o=i.index;for(;o<this.spineItems.length-1;){let f=this.get(o+1);if(f&&f.linear)return f;o+=1}}).bind(this)):(i.prev=function(){},i.next=function(){}),a=new Gs(i,this.hooks),this.append(a)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let r=this.spineItems[t];if(r&&r.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new Xe(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,r){t.index=r}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class yi{constructor(e){this._q=[],this.context=e,this.tick=mi,this.running=!1,this.paused=!1}enqueue(){var e,t,r,i=[].shift.call(arguments),n=arguments;if(!i)throw new Error("No Task Provided");return typeof i=="function"?(e=new Ye,t=e.promise,r={task:i,args:n,deferred:e,promise:t}):r={promise:i},this._q.push(r),this.paused==!1&&!this.running&&this.run(),r.promise}dequeue(){var e,t,r;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return r=t.apply(this.context,e.args),r&&typeof r.then=="function"?r.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,r),e.promise);if(e.promise)return e.promise}else return e=new Ye,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new Ye),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const mr="0.3",nr=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],Se={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class jn{constructor(e,t,r){this.spine=e,this.request=t,this.pause=r||100,this.q=new yi(this),this.epubcfi=new Xe,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(t){var r=new Ye,i=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(i),e.unload(),this.processingTimeout=setTimeout(()=>r.resolve(i),this.pause),r.promise}).bind(this))}parse(e,t,r){var i=[],n,s=e.ownerDocument,a=et(s,"body"),o=0,f,m=r||this.break,d=function(y){var p=y.length,E,v=0;if(y.textContent.trim().length===0)return!1;for(o==0&&(n=this.createRange(),n.startContainer=y,n.startOffset=0),E=m-o,E>p&&(o+=p,v=p);v<p;)if(E=m-o,o===0&&(v+=1,n=this.createRange(),n.startContainer=y,n.startOffset=v),v+E>=p)o+=p-v,v=p;else{v+=E,n.endContainer=y,n.endOffset=v;let u=new Xe(n,t).toString();i.push(u),o=0}f=y};if(lr(a,d.bind(this)),n&&n.startContainer&&f){n.endContainer=f,n.endOffset=f.length;let y=new Xe(n,t).toString();i.push(y),o=0}return i}generateFromWords(e,t,r){var i=e?new Xe(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(n){n.linear&&(i?n.index>=i.spinePos&&this.q.enqueue(this.processWords.bind(this),n,t,i,r):this.q.enqueue(this.processWords.bind(this),n,t,i,r))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,t,r,i){return i&&this._locationsWords.length>=i?Promise.resolve():e.load(this.request).then((function(n){var s=new Ye,a=this.parseWords(n,e,t,r),o=i-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(a.length>=i?a.slice(0,o):a),e.unload(),this.processingTimeout=setTimeout(()=>s.resolve(a),this.pause),s.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,r,i){var n=t.cfiBase,s=[],a=e.ownerDocument,o=et(a,"body"),f=r,m=i?i.spinePos!==t.index:!0,d;i&&t.index===i.spinePos&&(d=i.findNode(i.range?i.path.steps.concat(i.start.steps):i.path.steps,e.ownerDocument));var y=function(p){if(!m)if(p===d)m=!0;else return!1;if(p.textContent.length<10&&p.textContent.trim().length===0)return!1;var E=this.countWords(p.textContent),v,u=0;if(E===0)return!1;for(v=f-this._wordCounter,v>E&&(this._wordCounter+=E,u=E);u<E;)if(v=f-this._wordCounter,u+v>=E)this._wordCounter+=E-u,u=E;else{u+=v;let c=new Xe(p,n);s.push({cfi:c.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return lr(o,y.bind(this)),s}locationFromCfi(e){let t;return Xe.prototype.isCfiString(e)&&(e=new Xe(e)),this._locations.length===0?-1:(t=Ht(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let r=new Xe(this._locations[this.total]);return r.collapse(),r.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(Se.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}kt(jn.prototype);class Xs{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=et(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Nt.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class rn{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,r,i;if(!e)throw new Error("Package File Not Found");if(t=et(e,"metadata"),!t)throw new Error("No Metadata Found");if(r=et(e,"manifest"),!r)throw new Error("No Manifest Found");if(i=et(e,"spine"),!i)throw new Error("No Spine Found");return this.manifest=this.parseManifest(r),this.navPath=this.findNavPath(r),this.ncxPath=this.findNcxPath(r,i),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=Bn(i),this.spine=this.parseSpine(i,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=i.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},r=It(e,"item"),i=Array.prototype.slice.call(r);return i.forEach(function(n){var s=n.getAttribute("id"),a=n.getAttribute("href")||"",o=n.getAttribute("media-type")||"",f=n.getAttribute("media-overlay")||"",m=n.getAttribute("properties")||"";t[s]={href:a,type:o,overlay:f,properties:m.length?m.split(" "):[]}}),t}parseSpine(e,t){var r=[],i=It(e,"itemref"),n=Array.prototype.slice.call(i);return n.forEach(function(s,a){var o=s.getAttribute("idref"),f=s.getAttribute("properties")||"",m=f.length?f.split(" "):[],d={id:s.getAttribute("id"),idref:o,linear:s.getAttribute("linear")||"yes",properties:m,index:a};r.push(d)}),r}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var r=e.getElementById(t);return r&&r.localName==="identifier"&&r.namespaceURI==="http://purl.org/dc/elements/1.1/"&&r.childNodes.length>0?r.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=qt(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var r=qt(e,"item",{"media-type":"application/x-dtbncx+xml"}),i;return r||(i=t.getAttribute("toc"),i&&(r=e.querySelector(`#${i}`))),r?r.getAttribute("href"):!1}findCoverPath(e){var t=et(e,"package");t.getAttribute("version");var r=qt(e,"item",{properties:"cover-image"});if(r)return r.getAttribute("href");var i=qt(e,"meta",{name:"cover"});if(i){var n=i.getAttribute("content"),s=e.getElementById(n);return s?s.getAttribute("href"):""}else return!1}getElementText(e,t){var r=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),i;return!r||r.length===0?"":(i=r[0],i.childNodes.length?i.childNodes[0].nodeValue:"")}getPropertyText(e,t){var r=qt(e,"meta",{property:t});return r&&r.childNodes.length?r.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((r,i)=>(r.index=i,r.linear=r.linear||"yes",r)),e.resources.forEach((r,i)=>{this.manifest[i]=r,r.rel&&r.rel[0]==="cover"&&(this.coverPath=r.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((r,i)=>(r.label=r.title,r)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class Wr{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,r,i;t&&(r=et(e,"html"),i=et(e,"ncx")),t?r?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):i&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,r=0;r<e.length;r++)t=e[r],t.href&&(this.tocByHref[t.href]=r),t.id&&(this.tocById[t.id]=r),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,r){if(r.length===0)return;const i=r[t];if(i&&(e===i.id||e===i.href))return i;{let n;for(let s=0;s<r.length&&(n=this.getByIndex(e,t,r[s].subitems),!n);++s);return n}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=hr(e,"nav","toc"),r=[];if(!t)return r;let i=jt(t,"ol",!0);return i&&(r=this.parseNavList(i)),r}parseNavList(e,t){const r=[];if(!e||!e.children)return r;for(let i=0;i<e.children.length;i++){const n=this.navItem(e.children[i],t);n&&r.push(n)}return r}navItem(e,t){let r=e.getAttribute("id")||void 0,i=jt(e,"a",!0)||jt(e,"span",!0);if(!i)return;let n=i.getAttribute("href")||"";r||(r=n);let s=i.textContent||"",a=[],o=jt(e,"ol",!0);return o&&(a=this.parseNavList(o,r)),{id:r,href:n,label:s,subitems:a,parent:t}}parseLandmarks(e){var t=hr(e,"nav","landmarks"),r=t?It(t,"li"):[],i=r.length,n,s=[],a;if(!r||i===0)return s;for(n=0;n<i;++n)a=this.landmarkItem(r[n]),a&&(s.push(a),this.landmarksByType[a.type]=n);return s}landmarkItem(e){let t=jt(e,"a",!0);if(!t)return;let r=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,i=t.getAttribute("href")||"",n=t.textContent||"";return{href:i,label:n,type:r}}parseNcx(e){var t=It(e,"navPoint"),r=t.length,i,n={},s=[],a,o;if(!t||r===0)return s;for(i=0;i<r;++i)a=this.ncxItem(t[i]),n[a.id]=a,a.parent?(o=n[a.parent],o.subitems.push(a)):s.push(a);return s}ncxItem(e){var t=e.getAttribute("id")||!1,r=et(e,"content"),i=r.getAttribute("src"),n=et(e,"navLabel"),s=n.textContent?n.textContent:"",a=[],o=e.parentNode,f;return o&&(o.nodeName==="navPoint"||o.nodeName.split(":").slice(-1)[0]==="navPoint")&&(f=o.getAttribute("id")),{id:t,href:i,label:s,subitems:a,parent:f}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var Yt={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},Ks=(function(){var N,e,t,r,i={};for(N in Yt)if(Yt.hasOwnProperty(N)){for(e in Yt[N])if(Yt[N].hasOwnProperty(e))if(t=Yt[N][e],typeof t=="string")i[t]=N+"/"+e;else for(r=0;r<t.length;r++)i[t[r]]=N+"/"+e}return i})(),Js="text/plain";function $s(N){return N&&Ks[N.split(".").pop().toLowerCase()]||Js}const Wt={lookup:$s};class Qs{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new At(e),r=Wt.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(i=>Un(i)).then(i=>hi(i,r)):this.settings.request(e,"blob").then(i=>ur(i,r))}replacements(){if(this.settings.replacements==="none")return new Promise((function(t){t(this.urls)}).bind(this));var e=this.urls.map(t=>{var r=this.settings.resolver(t);return this.createUrl(r).catch(i=>(console.error(i),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(r=>typeof r=="string"),t))}replaceCss(e,t){var r=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach((function(i){var n=this.createCssFile(i,e,t).then((function(s){var a=this.urls.indexOf(i);a>-1&&(this.replacementUrls[a]=s)}).bind(this));r.push(n)}).bind(this)),Promise.all(r)}createCssFile(e){var t;if(Nt.isAbsolute(e))return new Promise(function(s){s()});var r=this.settings.resolver(e),i;this.settings.archive?i=this.settings.archive.getText(r):i=this.settings.request(r,"text");var n=this.urls.map(s=>{var a=this.settings.resolver(s),o=new Rt(r).relative(a);return o});return i?i.then(s=>(s=tn(s,n,this.replacementUrls),this.settings.replacements==="base64"?t=hi(s,"text/css"):t=ur(s,"text/css"),t),s=>new Promise(function(a){a()})):new Promise(function(s){s()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map((function(r){var i=t(r),n=new Rt(e).relative(i);return n}).bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise((function(r,i){r(this.replacementUrls[t])}).bind(this)):this.createUrl(e)}substitute(e,t){var r;return t?r=this.relativeTo(t):r=this.urls,tn(e,r,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class Hr{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new Xe,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=et(e,"html"),r=et(e,"ncx");if(t)return this.parseNav(e);if(r)return this.parseNcx(e)}parseNav(e){var t=hr(e,"nav","page-list"),r=t?It(t,"li"):[],i=r.length,n,s=[],a;if(!r||i===0)return s;for(n=0;n<i;++n)a=this.item(r[n]),s.push(a);return s}parseNcx(e){var t=[],r=0,i,n,s,a=0;if(n=et(e,"pageList"),!n||(s=It(n,"pageTarget"),a=s.length,!s||s.length===0))return t;for(r=0;r<a;++r)i=this.ncxItem(s[r]),t.push(i);return t}ncxItem(e){var t=et(e,"navLabel"),r=et(t,"text"),i=r.textContent,n=et(e,"content"),s=n.getAttribute("src"),a=parseInt(i,10);return{href:s,page:a}}item(e){var t=et(e,"a"),r=t.getAttribute("href")||"",i=t.textContent||"",n=parseInt(i),s=r.indexOf("epubcfi"),a,o,f;return s!=-1?(a=r.split("#"),o=a[0],f=a.length>1?a[1]:!1,{cfi:f,href:r,packageUrl:o,page:n}):{href:r,page:n}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var r=sr(e,this.locations,this.epubcfi.compare);return r!=-1?t=this.pages[r]:(r=Ht(e,this.locations,this.epubcfi.compare),t=r-1>=0?this.pages[r-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var r=this.pages.indexOf(e);return r!=-1&&(t=this.locations[r]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),r=this.percentageFromPage(t);return r}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class Wn{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,r){var i=1,n=r||0,s=e,a=t,o=Math.floor(s/12),f,m,d,y;this._spread&&s>=this._minSpreadWidth?i=2:i=1,this.name==="reflowable"&&this._flow==="paginated"&&!(r>=0)&&(n=o%2===0?o:o-1),this.name==="pre-paginated"&&(n=0),i>1?(f=s/i-n,d=f+n):(f=s,d=s),this.name==="pre-paginated"&&i>1&&(s=f),m=f*i+n,y=s,this.width=s,this.height=a,this.spreadWidth=m,this.pageWidth=d,this.delta=y,this.columnWidth=f,this.gap=n,this.divisor=i,this.update({width:s,height:a,spreadWidth:m,pageWidth:d,delta:y,columnWidth:f,gap:n,divisor:i})}format(e,t,r){var i;return this.name==="pre-paginated"?i=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?i=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):r&&r==="horizontal"?i=e.size(null,this.height):i=e.size(this.width,null),i}count(e,t){let r,i;return this.name==="pre-paginated"?(r=1,i=1):this._flow==="paginated"?(t=t||this.delta,r=Math.ceil(e/t),i=r*this.divisor):(t=t||this.height,r=Math.ceil(e/t),i=r),{spreads:r,pages:i}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=ct(this.props,e);this.emit(Se.LAYOUT.UPDATED,t,e)}}}kt(Wn.prototype);class ea{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var r=new At(t);this._themes[e]={url:r.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,r;this._current=e,this.update(e),r=this.rendition.getContents(),r.forEach(i=>{i.removeClass(t),i.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(r=>{this.add(e,r)})}inject(e){var t=[],r=this._themes,i;for(var n in r)r.hasOwnProperty(n)&&(n===this._current||n==="default")&&(i=r[n],(i.rules&&Object.keys(i.rules).length>0||i.url&&t.indexOf(i.url)===-1)&&this.add(n,e),this._injected.push(n));this._current!="default"&&e.addClass(this._current)}add(e,t){var r=this._themes[e];!r||!t||(r.url?t.addStylesheet(r.url):r.serialized?(t.addStylesheetCss(r.serialized,e),r.injected=!0):r.rules&&(t.addStylesheetRules(r.rules,e),r.injected=!0))}override(e,t,r){var i=this.rendition.getContents();this._overrides[e]={value:t,priority:r===!0},i.forEach(n=>{n.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(r=>{r.css(e)})}overrides(e){var t=this._overrides;for(var r in t)t.hasOwnProperty(r)&&e.css(r,t[r].value,t[r].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class fr{constructor(e,t,r,i=!1){this.layout=e,this.horizontal=r==="horizontal",this.direction=t||"ltr",this._dev=i}section(e){var t=this.findRanges(e),r=this.rangeListToCfiList(e.section.cfiBase,t);return r}page(e,t,r,i){var n=e&&e.document?e.document.body:!1,s;if(n){if(s=this.rangePairToCfiPair(t,{start:this.findStart(n,r,i),end:this.findEnd(n,r,i)}),this._dev===!0){let a=e.document,o=new Xe(s.start).toRange(a),f=new Xe(s.end).toRange(a),m=a.defaultView.getSelection(),d=a.createRange();m.removeAllRanges(),d.setStart(o.startContainer,o.startOffset),d.setEnd(f.endContainer,f.endOffset),m.addRange(d)}return s}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var r={acceptNode:function(o){return o.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},i=r.acceptNode;i.acceptNode=r.acceptNode;for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,i,!1),s,a;(s=n.nextNode())&&(a=t(s),!a););return a}}findRanges(e){for(var t=[],r=e.contents.scrollWidth(),i=Math.ceil(r/this.layout.spreadWidth),n=i*this.layout.divisor,s=this.layout.columnWidth,a=this.layout.gap,o,f,m=0;m<n.pages;m++)o=(s+a)*m,f=s*(m+1)+a*m,t.push({start:this.findStart(e.document.body,o,f),end:this.findEnd(e.document.body,o,f)});return t}findStart(e,t,r){for(var i=[e],n,s,a=e;i.length;)if(n=i.shift(),s=this.walk(n,o=>{var f,m,d,y,p;if(p=li(o),this.horizontal&&this.direction==="ltr"){if(f=this.horizontal?p.left:p.top,m=this.horizontal?p.right:p.bottom,f>=t&&f<=r)return o;if(m>t)return o;a=o,i.push(o)}else if(this.horizontal&&this.direction==="rtl"){if(f=p.left,m=p.right,m<=r&&m>=t)return o;if(f<r)return o;a=o,i.push(o)}else{if(d=p.top,y=p.bottom,d>=t&&d<=r)return o;if(y>t)return o;a=o,i.push(o)}}),s)return this.findTextStartRange(s,t,r);return this.findTextStartRange(a,t,r)}findEnd(e,t,r){for(var i=[e],n,s=e,a;i.length;)if(n=i.shift(),a=this.walk(n,o=>{var f,m,d,y,p;if(p=li(o),this.horizontal&&this.direction==="ltr"){if(f=Math.round(p.left),m=Math.round(p.right),f>r&&s)return s;if(m>r)return o;s=o,i.push(o)}else if(this.horizontal&&this.direction==="rtl"){if(f=Math.round(this.horizontal?p.left:p.top),m=Math.round(this.horizontal?p.right:p.bottom),m<t&&s)return s;if(f<t)return o;s=o,i.push(o)}else{if(d=Math.round(p.top),y=Math.round(p.bottom),d>r&&s)return s;if(y>r)return o;s=o,i.push(o)}}),a)return this.findTextEndRange(a,t,r);return this.findTextEndRange(s,t,r)}findTextStartRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),n,s,a,o,f,m=0;m<i.length;m++)if(n=i[m],s=n.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(a=s.left,a>=t)return n}else if(this.horizontal&&this.direction==="rtl"){if(f=s.right,f<=r)return n}else if(o=s.top,o>=t)return n;return i[0]}findTextEndRange(e,t,r){for(var i=this.splitTextNodeIntoRanges(e),n,s,a,o,f,m,d,y=0;y<i.length;y++){if(s=i[y],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,f=a.right,o>r&&n)return n;if(f>r)return s}else if(this.horizontal&&this.direction==="rtl"){if(o=a.left,f=a.right,f<t&&n)return n;if(o<t)return s}else{if(m=a.top,d=a.bottom,m>r&&n)return n;if(d>r)return s}n=s}return i[i.length-1]}splitTextNodeIntoRanges(e,t){var r=[],i=e.textContent||"",n=i.trim(),s,a=e.ownerDocument,o=t||" ",f=n.indexOf(o);if(f===-1||e.nodeType!=Node.TEXT_NODE)return s=a.createRange(),s.selectNodeContents(e),[s];for(s=a.createRange(),s.setStart(e,0),s.setEnd(e,f),r.push(s),s=!1;f!=-1;)f=n.indexOf(o,f+1),f>0&&(s&&(s.setEnd(e,f),r.push(s)),s=a.createRange(),s.setStart(e,f+1));return s&&(s.setEnd(e,n.length),r.push(s)),r}rangePairToCfiPair(e,t){var r=t.start,i=t.end;r.collapse(!0),i.collapse(!1);let n=new Xe(r,e).toString(),s=new Xe(i,e).toString();return{start:n,end:s}}rangeListToCfiList(e,t){for(var r=[],i,n=0;n<t.length;n++)i=this.rangePairToCfiPair(e,t[n]),r.push(i);return r}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const Hn=typeof navigator<"u",ta=Hn&&/Chrome/.test(navigator.userAgent),nn=Hn&&!ta&&/AppleWebKit/.test(navigator.userAgent),ra=1;class bi{constructor(e,t,r,i){this.epubcfi=new Xe,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=i||0,this.cfiBase=r||"",this.epubReadingSystem("epub.js",mr),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return nr}width(e){var t=this.content;return e&&st(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&st(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&st(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&st(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,r=this.document.createRange(),i=this.content||this.document.body,n=ar(i);return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.width,n&&n.width&&(t+=n.width),Math.round(t)}textHeight(){let e,t,r=this.document.createRange(),i=this.content||this.document.body;return r.selectNodeContents(i),e=r.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,r){var i=this.content||this.document.body;return t?i.style.setProperty(e,t,r?"important":""):i.style.removeProperty(e),this.window.getComputedStyle(i)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),r={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},i=[],n={};if(t&&t.hasAttribute("content")){let s=t.getAttribute("content"),a=s.match(/width\s*=\s*([^,]*)/),o=s.match(/height\s*=\s*([^,]*)/),f=s.match(/initial-scale\s*=\s*([^,]*)/),m=s.match(/minimum-scale\s*=\s*([^,]*)/),d=s.match(/maximum-scale\s*=\s*([^,]*)/),y=s.match(/user-scalable\s*=\s*([^,]*)/);a&&a.length&&typeof a[1]<"u"&&(r.width=a[1]),o&&o.length&&typeof o[1]<"u"&&(r.height=o[1]),f&&f.length&&typeof f[1]<"u"&&(r.scale=f[1]),m&&m.length&&typeof m[1]<"u"&&(r.minimum=m[1]),d&&d.length&&typeof d[1]<"u"&&(r.maximum=d[1]),y&&y.length&&typeof y[1]<"u"&&(r.scalable=y[1])}return n=On(e||{},r),e&&(n.width&&i.push("width="+n.width),n.height&&i.push("height="+n.height),n.scale&&i.push("initial-scale="+n.scale),n.scalable==="no"?(i.push("minimum-scale="+n.scale),i.push("maximum-scale="+n.scale),i.push("user-scalable="+n.scalable)):(n.scalable&&i.push("user-scalable="+n.scalable),n.minimum&&i.push("minimum-scale="+n.minimum),n.maximum&&i.push("minimum-scale="+n.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",i.join(", ")),this.window.scrollTo(0,0)),n}expand(){this.emit(Se.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(Se.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=(function(a){a.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),r=0;r<e.length;r+=1){var i;try{i=e[r].cssRules}catch{return}if(!i)return;for(var n=0;n<i.length;n+=1)if(i[n].media){var s=this.window.matchMedia(i[n].media.mediaText);s.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,r=0;r<e.length;r++)t=e[r],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var r,i={left:0,top:0};if(!this.document)return i;if(this.epubcfi.isCfiString(e)){let n=new Xe(e).toRange(this.document,t);if(n){try{if(!n.endContainer||n.startContainer==n.endContainer&&n.startOffset==n.endOffset){let s=n.startContainer.textContent.indexOf(" ",n.startOffset);s==-1&&(s=n.startContainer.textContent.length),n.setEnd(n.startContainer,s)}}catch(s){console.error("setting end offset to start container length failed",s)}if(n.startContainer.nodeType===Node.ELEMENT_NODE)r=n.startContainer.getBoundingClientRect(),i.left=r.left,i.top=r.top;else if(nn){let s=n.startContainer,a=new Range;try{s.nodeType===ra?r=s.getBoundingClientRect():n.startOffset+2<s.length?(a.setStart(s,n.startOffset),a.setEnd(s,n.startOffset+2),r=a.getBoundingClientRect()):n.startOffset-2>0?(a.setStart(s,n.startOffset-2),a.setEnd(s,n.startOffset),r=a.getBoundingClientRect()):r=s.parentNode.getBoundingClientRect()}catch(o){console.error(o,o.stack)}}else r=n.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let n=e.substring(e.indexOf("#")+1),s=this.document.getElementById(n);if(s)if(nn){let a=new Range;a.selectNode(s),r=a.getBoundingClientRect()}else r=s.getBoundingClientRect()}return r&&(i.left=r.left,i.top=r.top),i}addStylesheet(e){return new Promise((function(t,r){var i,n=!1;if(!this.document){t(!1);return}if(i=this.document.querySelector("link[href='"+e+"']"),i){t(!0);return}i=this.document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=e,i.onload=i.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(i)}).bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var r;return r=this._getStylesheetNode(t),r.innerHTML=e,!0}addStylesheetRules(e,t){var r;if(!(!this.document||!e||e.length===0))if(r=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var i=0,n=e.length;i<n;i++){var s=1,a=e[i],o=e[i][0],f="";Object.prototype.toString.call(a[1][0])==="[object Array]"&&(a=a[1],s=0);for(var m=a.length;s<m;s++){var d=a[s];f+=d[0]+":"+d[1]+(d[2]?" !important":"")+`;
`}r.insertRule(o+"{"+f+"}",r.cssRules.length)}else Object.keys(e).forEach(p=>{const E=e[p];if(Array.isArray(E))E.forEach(v=>{const c=Object.keys(v).map(g=>`${g}:${v[g]}`).join(";");r.insertRule(`${p}{${c}}`,r.cssRules.length)});else{const u=Object.keys(E).map(c=>`${c}:${E[c]}`).join(";");r.insertRule(`${p}{${u}}`,r.cssRules.length)}})}addScript(e){return new Promise((function(t,r){var i,n=!1;if(!this.document){t(!1);return}i=this.document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(i)}).bind(this))}addClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),nr.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(nr.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}).bind(this),250)}triggerSelectedEvent(e){var t,r;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(r=new Xe(t,this.cfiBase).toString(),this.emit(Se.CONTENTS.SELECTED,r),this.emit(Se.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var r=new Xe(e);return r.toRange(this.document,t)}cfiFromRange(e,t){return new Xe(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new Xe(e,this.cfiBase,t).toString()}map(e){var t=new fr(e);return t.section()}size(e,t){var r={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),r.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),r.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(r)}columns(e,t,r,i,n){let s=Mt("column-axis"),a=Mt("column-gap"),o=Mt("column-width"),f=Mt("column-fill"),d=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),n==="rtl"&&d==="horizontal"&&this.direction(n),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),d==="vertical"?(this.css("padding-top",i/2+"px",!0),this.css("padding-bottom",i/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(s,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",i/2+"px",!0),this.css("padding-right",i/2+"px",!0),this.css(s,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(f,"auto"),this.css(a,i+"px"),this.css(o,r+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,r){var i="scale("+e+")",n="";this.css("transform-origin","top left"),(t>=0||r>=0)&&(n=" translate("+(t||0)+"px, "+(r||0)+"px )"),this.css("transform",i+n)}fit(e,t,r){var i=this.viewport(),n=parseInt(i.width),s=parseInt(i.height),a=e/n,o=t/s,f=a<o?a:o;if(this.layoutStyle("paginated"),this.width(n),this.height(s),this.overflow("hidden"),this.scaler(f,0,0),this.css("background-size",n*f+"px "+s*f+"px"),this.css("background-color","transparent"),r&&r.properties.includes("page-spread-left")){var m=e-n*f;this.css("margin-left",m+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,r,i,n){var s=new fr(t,n);return s.page(this,e,r,i)}linksHandler(){Vs(this.content,e=>{this.emit(Se.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=Mt("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(r){switch(r){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}kt(bi.prototype);class ia{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,r,i,n,s){let a=encodeURI(t+e),f=new Xe(t).spinePos,m=new Zn({type:e,cfiRange:t,data:r,sectionIndex:f,cb:i,className:n,styles:s});return this._annotations[a]=m,f in this._annotationsBySectionIndex?this._annotationsBySectionIndex[f].push(a):this._annotationsBySectionIndex[f]=[a],this.rendition.views().forEach(y=>{m.sectionIndex===y.index&&m.attach(y)}),m}remove(e,t){let r=encodeURI(e+t);if(r in this._annotations){let i=this._annotations[r];if(t&&i.type!==t)return;this.rendition.views().forEach(s=>{this._removeFromAnnotationBySectionIndex(i.sectionIndex,r),i.sectionIndex===s.index&&i.detach(s)}),delete this._annotations[r]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(r=>r!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,r,i,n){return this.add("highlight",e,t,r,i,n)}underline(e,t,r,i,n){return this.add("underline",e,t,r,i,n)}mark(e,t,r){return this.add("mark",e,t,r)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(i=>{this._annotations[i].detach(e)})}show(){}hide(){}}class Zn{constructor({type:e,cfiRange:t,data:r,sectionIndex:i,cb:n,className:s,styles:a}){this.type=e,this.cfiRange=t,this.data=r,this.sectionIndex=i,this.mark=void 0,this.cb=n,this.className=s,this.styles=a}update(e){this.data=e}attach(e){let{cfiRange:t,data:r,type:i,mark:n,cb:s,className:a,styles:o}=this,f;return i==="highlight"?f=e.highlight(t,r,s,a,o):i==="underline"?f=e.underline(t,r,s,a,o):i==="mark"&&(f=e.mark(t,r,s)),this.mark=f,this.emit(Se.ANNOTATION.ATTACH,f),f}detach(e){let{cfiRange:t,type:r}=this,i;return e&&(r==="highlight"?i=e.unhighlight(t):r==="underline"?i=e.ununderline(t):r==="mark"&&(i=e.unmark(t))),this.mark=void 0,this.emit(Se.ANNOTATION.DETACH,i),i}text(){}}kt(Zn.prototype);var Et={},Xt={},sn;function na(){if(sn)return Xt;sn=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.createElement=N;function N(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}return Xt.default={createElement:N},Xt}var Ut={},an;function sa(){if(an)return Ut;an=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.proxyMouse=N,Ut.clone=e,Ut.default={proxyMouse:N};function N(r,i){function n(f){for(var m=i.length-1;m>=0;m--){var d=i[m],y=f.clientX,p=f.clientY;if(f.touches&&f.touches.length&&(y=f.touches[0].clientX,p=f.touches[0].clientY),!!t(d,r,y,p)){d.dispatchEvent(e(f));break}}}if(r.nodeName==="iframe"||r.nodeName==="IFRAME")try{this.target=r.contentDocument}catch{this.target=r}else this.target=r;for(var s=["mouseup","mousedown","click","touchstart"],a=0;a<s.length;a++){var o=s[a];this.target.addEventListener(o,function(f){return n(f)},!1)}}function e(r){var i=Object.assign({},r,{bubbles:!1});try{return new MouseEvent(r.type,i)}catch{var n=document.createEvent("MouseEvents");return n.initMouseEvent(r.type,!1,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget),n}}function t(r,i,n,s){var a=i.getBoundingClientRect();function o(p,E,v){var u=p.top-a.top,c=p.left-a.left,g=u+p.height,_=c+p.width;return u<=v&&c<=E&&g>v&&_>E}var f=r.getBoundingClientRect();if(!o(f,n,s))return!1;for(var m=r.getClientRects(),d=0,y=m.length;d<y;d++)if(o(m[d],n,s))return!0;return!1}return Ut}var on;function aa(){if(on)return Et;on=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.Underline=Et.Highlight=Et.Mark=Et.Pane=void 0;var N=function v(u,c,g){u===null&&(u=Function.prototype);var _=Object.getOwnPropertyDescriptor(u,c);if(_===void 0){var D=Object.getPrototypeOf(u);return D===null?void 0:v(D,c,g)}else{if("value"in _)return _.value;var b=_.get;return b===void 0?void 0:b.call(g)}},e=(function(){function v(u,c){for(var g=0;g<c.length;g++){var _=c[g];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(u,_.key,_)}}return function(u,c,g){return c&&v(u.prototype,c),g&&v(u,g),u}})(),t=na(),r=s(t),i=sa(),n=s(i);function s(v){return v&&v.__esModule?v:{default:v}}function a(v,u){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:v}function o(v,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);v.prototype=Object.create(u&&u.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(v,u):v.__proto__=u)}function f(v,u){if(!(v instanceof u))throw new TypeError("Cannot call a class as a function")}Et.Pane=(function(){function v(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;f(this,v),this.target=u,this.element=r.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),n.default.proxyMouse(this.target,this.marks),this.container=c,this.container.appendChild(this.element),this.render()}return e(v,[{key:"addMark",value:function(c){var g=r.default.createElement("g");return this.element.appendChild(g),c.bind(g,this.container),this.marks.push(c),c.render(),c}},{key:"removeMark",value:function(c){var g=this.marks.indexOf(c);if(g!==-1){var _=c.unbind();this.element.removeChild(_),this.marks.splice(g,1)}}},{key:"render",value:function(){p(this.element,y(this.target,this.container));var c=!0,g=!1,_=void 0;try{for(var D=this.marks[Symbol.iterator](),b;!(c=(b=D.next()).done);c=!0){var S=b.value;S.render()}}catch(I){g=!0,_=I}finally{try{!c&&D.return&&D.return()}finally{if(g)throw _}}}}]),v})();var m=Et.Mark=(function(){function v(){f(this,v),this.element=null}return e(v,[{key:"bind",value:function(c,g){this.element=c,this.container=g}},{key:"unbind",value:function(){var c=this.element;return this.element=null,c}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(c){this.element&&this.element.dispatchEvent(c)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var c=[],g=this.element.firstChild;g;)c.push(g.getBoundingClientRect()),g=g.nextSibling;return c}},{key:"filteredRanges",value:function(){var c=Array.from(this.range.getClientRects());return c.filter(function(g){for(var _=0;_<c.length;_++){if(c[_]===g)return!0;var D=E(c[_],g);if(D)return!1}return!0})}}]),v})(),d=Et.Highlight=(function(v){o(u,v);function u(c,g,_,D){f(this,u);var b=a(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return b.range=c,b.className=g,b.data=_||{},b.attributes=D||{},b}return e(u,[{key:"bind",value:function(g,_){N(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"bind",this).call(this,g,_);for(var D in this.data)this.data.hasOwnProperty(D)&&(this.element.dataset[D]=this.data[D]);for(var D in this.attributes)this.attributes.hasOwnProperty(D)&&this.element.setAttribute(D,this.attributes[D]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var g=this.element.ownerDocument.createDocumentFragment(),_=this.filteredRanges(),D=this.element.getBoundingClientRect(),b=this.container.getBoundingClientRect(),S=0,I=_.length;S<I;S++){var R=_[S],C=r.default.createElement("rect");C.setAttribute("x",R.left-D.left+b.left),C.setAttribute("y",R.top-D.top+b.top),C.setAttribute("height",R.height),C.setAttribute("width",R.width),g.appendChild(C)}this.element.appendChild(g)}}]),u})(m);Et.Underline=(function(v){o(u,v);function u(c,g,_,D){return f(this,u),a(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,c,g,_,D))}return e(u,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var g=this.element.ownerDocument.createDocumentFragment(),_=this.filteredRanges(),D=this.element.getBoundingClientRect(),b=this.container.getBoundingClientRect(),S=0,I=_.length;S<I;S++){var R=_[S],C=r.default.createElement("rect");C.setAttribute("x",R.left-D.left+b.left),C.setAttribute("y",R.top-D.top+b.top),C.setAttribute("height",R.height),C.setAttribute("width",R.width),C.setAttribute("fill","none");var B=r.default.createElement("line");B.setAttribute("x1",R.left-D.left+b.left),B.setAttribute("x2",R.left-D.left+b.left+R.width),B.setAttribute("y1",R.top-D.top+b.top+R.height-1),B.setAttribute("y2",R.top-D.top+b.top+R.height-1),B.setAttribute("stroke-width",1),B.setAttribute("stroke","black"),B.setAttribute("stroke-linecap","square"),g.appendChild(C),g.appendChild(B)}this.element.appendChild(g)}}]),u})(d);function y(v,u){var c=u.getBoundingClientRect(),g=v.getBoundingClientRect();return{top:g.top-c.top,left:g.left-c.left,height:v.scrollHeight,width:v.scrollWidth}}function p(v,u){v.style.setProperty("top",u.top+"px","important"),v.style.setProperty("left",u.left+"px","important"),v.style.setProperty("height",u.height+"px","important"),v.style.setProperty("width",u.width+"px","important")}function E(v,u){return u.right<=v.right&&u.left>=v.left&&u.top>=v.top&&u.bottom<=v.bottom}return Et}var rr=aa();class Vn{constructor(e,t){this.settings=ct({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+pr(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Xe,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=ir(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(r){return this.load(r)}).bind(this)).then((function(){let r=this.contents.writingMode(),i;return this.settings.flow==="scrolled"?i=r.indexOf("vertical")===0?"horizontal":"vertical":i=r.indexOf("vertical")===0?"vertical":"horizontal",r.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(i),this.emit(Se.VIEWS.AXIS,i),this.setWritingMode(r),this.emit(Se.VIEWS.WRITING_MODE,r),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((n,s)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),n()})}).bind(this),(function(r){return this.emit(Se.VIEWS.LOAD_ERROR,r),new Promise((i,n)=>{n(r)})}).bind(this)).then((function(){this.emit(Se.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var r=e||this.settings.width,i=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",r,i):this.settings.axis==="horizontal"?this.lock("height",r,i):this.lock("width",r,i),this.settings.width=r,this.settings.height=i}lock(e,t,r){var i=ar(this.element),n;this.iframe?n=ar(this.iframe):n={width:0,height:0},e=="width"&&st(t)&&(this.lockedWidth=t-i.width-n.width),e=="height"&&st(r)&&(this.lockedHeight=r-i.height-n.height),e==="both"&&st(t)&&st(r)&&(this.lockedWidth=t-i.width-n.width,this.lockedHeight=r-i.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,r=this.lockedHeight,i;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,r=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(i=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&i%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(r=this.contents.textHeight(),this.settings.flow==="paginated"&&r%this.layout.height>0&&(r=Math.ceil(r/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||r!=this._height)&&this.reframe(t,r),this._expanding=!1)}reframe(e,t){var r;st(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),st(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let i=this.prevBounds?e-this.prevBounds.width:e,n=this.prevBounds?t-this.prevBounds.height:t;r={width:e,height:t,widthDelta:i,heightDelta:n},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let s;for(let a in this.marks)this.marks.hasOwnProperty(a)&&(s=this.marks[a],this.placeMark(s.element,s.range))}),this.onResize(this,r),this.emit(Se.VIEWS.RESIZED,r),this.prevBounds=r,this.elementBounds=ir(this.element)}load(e){var t=new Ye,r=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),r;if(this.iframe.onload=(function(n){this.onLoad(n,t)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=ur(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),r;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var i=this;MSApp.execUnsafeLocalFunction(function(){i.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return r}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new bi(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var r=this.document.querySelector("link[rel='canonical']");r?r.setAttribute("href",this.section.canonical):(r=this.document.createElement("link"),r.setAttribute("rel","canonical"),r.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(r)),this.contents.on(Se.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(Se.CONTENTS.RESIZE,i=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new Ye;return this.displayed?t.resolve(this):this.render(e).then((function(){this.emit(Se.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}).bind(this),function(r){t.reject(r,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(Se.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(Se.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=ir(this.element)),this.elementBounds}highlight(e,t={},r,i="epubjs-hl",n={}){if(!this.contents)return;const s=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),o=()=>{this.emit(Se.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new rr.Pane(this.iframe,this.element));let f=new rr.Highlight(a,i,t,s),m=this.pane.addMark(f);return this.highlights[e]={mark:m,element:m.element,listeners:[o,r]},m.element.setAttribute("ref",i),m.element.addEventListener("click",o),m.element.addEventListener("touchstart",o),r&&(m.element.addEventListener("click",r),m.element.addEventListener("touchstart",r)),m}underline(e,t={},r,i="epubjs-ul",n={}){if(!this.contents)return;const s=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},n);let a=this.contents.range(e),o=()=>{this.emit(Se.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new rr.Pane(this.iframe,this.element));let f=new rr.Underline(a,i,t,s),m=this.pane.addMark(f);return this.underlines[e]={mark:m,element:m.element,listeners:[o,r]},m.element.setAttribute("ref",i),m.element.addEventListener("click",o),m.element.addEventListener("touchstart",o),r&&(m.element.addEventListener("click",r),m.element.addEventListener("touchstart",r)),m}mark(e,t={},r){if(!this.contents)return;if(e in this.marks)return this.marks[e];let i=this.contents.range(e);if(!i)return;let n=i.commonAncestorContainer,s=n.nodeType===1?n:n.parentNode,a=f=>{this.emit(Se.VIEWS.MARK_CLICKED,e,t)};i.collapsed&&n.nodeType===1?(i=new Range,i.selectNodeContents(n)):i.collapsed&&(i=new Range,i.selectNodeContents(s));let o=this.document.createElement("a");return o.setAttribute("ref","epubjs-mk"),o.style.position="absolute",o.dataset.epubcfi=e,t&&Object.keys(t).forEach(f=>{o.dataset[f]=t[f]}),r&&(o.addEventListener("click",r),o.addEventListener("touchstart",r)),o.addEventListener("click",a),o.addEventListener("touchstart",a),this.placeMark(o,i),this.element.appendChild(o),this.marks[e]={element:o,range:i,listeners:[a,r]},s}placeMark(e,t){let r,i,n;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let a=t.getBoundingClientRect();r=a.top,i=a.right}else{let a=t.getClientRects(),o;for(var s=0;s!=a.length;s++)o=a[s],(!n||o.left<n)&&(n=o.left,i=Math.ceil(n/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,r=o.top)}e.style.top=`${r}px`,e.style.left=`${i}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(r=>{r&&(t.element.removeEventListener("click",r),t.element.removeEventListener("touchstart",r))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&zn(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}kt(Vn.prototype);function oa(){var N="reverse",e=ua();return document.body.appendChild(e),e.scrollLeft>0?N="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(N="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(N="negative")),document.body.removeChild(e),N}function ua(){var N=document.createElement("div");N.dir="rtl",N.style.position="fixed",N.style.width="1px",N.style.height="1px",N.style.top="0px",N.style.left="0px",N.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var r=document.createElement("span");return r.style.width="1px",r.style.display="inline-block",e.appendChild(t),e.appendChild(r),N.appendChild(e),N}var Zr,un;function _i(){if(un)return Zr;un=1;function N(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Zr=N,Zr}var Vr,ln;function la(){if(ln)return Vr;ln=1;var N=typeof dt=="object"&&dt&&dt.Object===Object&&dt;return Vr=N,Vr}var Gr,hn;function Gn(){if(hn)return Gr;hn=1;var N=la(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=N||e||Function("return this")();return Gr=t,Gr}var Yr,fn;function ha(){if(fn)return Yr;fn=1;var N=Gn(),e=function(){return N.Date.now()};return Yr=e,Yr}var Xr,cn;function fa(){if(cn)return Xr;cn=1;var N=/\s/;function e(t){for(var r=t.length;r--&&N.test(t.charAt(r)););return r}return Xr=e,Xr}var Kr,dn;function ca(){if(dn)return Kr;dn=1;var N=fa(),e=/^\s+/;function t(r){return r&&r.slice(0,N(r)+1).replace(e,"")}return Kr=t,Kr}var Jr,pn;function Yn(){if(pn)return Jr;pn=1;var N=Gn(),e=N.Symbol;return Jr=e,Jr}var $r,mn;function da(){if(mn)return $r;mn=1;var N=Yn(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=N?N.toStringTag:void 0;function n(s){var a=t.call(s,i),o=s[i];try{s[i]=void 0;var f=!0}catch{}var m=r.call(s);return f&&(a?s[i]=o:delete s[i]),m}return $r=n,$r}var Qr,gn;function pa(){if(gn)return Qr;gn=1;var N=Object.prototype,e=N.toString;function t(r){return e.call(r)}return Qr=t,Qr}var ei,vn;function ma(){if(vn)return ei;vn=1;var N=Yn(),e=da(),t=pa(),r="[object Null]",i="[object Undefined]",n=N?N.toStringTag:void 0;function s(a){return a==null?a===void 0?i:r:n&&n in Object(a)?e(a):t(a)}return ei=s,ei}var ti,yn;function ga(){if(yn)return ti;yn=1;function N(e){return e!=null&&typeof e=="object"}return ti=N,ti}var ri,bn;function va(){if(bn)return ri;bn=1;var N=ma(),e=ga(),t="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&N(i)==t}return ri=r,ri}var ii,_n;function ya(){if(_n)return ii;_n=1;var N=ca(),e=_i(),t=va(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt;function o(f){if(typeof f=="number")return f;if(t(f))return r;if(e(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=e(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=N(f);var d=n.test(f);return d||s.test(f)?a(f.slice(2),d?2:8):i.test(f)?r:+f}return ii=o,ii}var ni,wn;function Xn(){if(wn)return ni;wn=1;var N=_i(),e=ha(),t=ya(),r="Expected a function",i=Math.max,n=Math.min;function s(a,o,f){var m,d,y,p,E,v,u=0,c=!1,g=!1,_=!0;if(typeof a!="function")throw new TypeError(r);o=t(o)||0,N(f)&&(c=!!f.leading,g="maxWait"in f,y=g?i(t(f.maxWait)||0,o):y,_="trailing"in f?!!f.trailing:_);function D(M){var x=m,V=d;return m=d=void 0,u=M,p=a.apply(V,x),p}function b(M){return u=M,E=setTimeout(R,o),c?D(M):p}function S(M){var x=M-v,V=M-u,ce=o-x;return g?n(ce,y-V):ce}function I(M){var x=M-v,V=M-u;return v===void 0||x>=o||x<0||g&&V>=y}function R(){var M=e();if(I(M))return C(M);E=setTimeout(R,S(M))}function C(M){return E=void 0,_&&m?D(M):(m=d=void 0,p)}function B(){E!==void 0&&clearTimeout(E),u=0,m=v=d=E=void 0}function Y(){return E===void 0?p:C(e())}function k(){var M=e(),x=I(M);if(m=arguments,d=this,v=M,x){if(E===void 0)return b(v);if(g)return clearTimeout(E),E=setTimeout(R,o),D(v)}return E===void 0&&(E=setTimeout(R,o)),p}return k.cancel=B,k.flush=Y,k}return ni=s,ni}var si,En;function ba(){if(En)return si;En=1;var N=Xn(),e=_i(),t="Expected a function";function r(i,n,s){var a=!0,o=!0;if(typeof i!="function")throw new TypeError(t);return e(s)&&(a="leading"in s?!!s.leading:a,o="trailing"in s?!!s.trailing:o),N(i,n,{leading:a,maxWait:n,trailing:o})}return si=r,si}var _a=ba();const wa=Ot(_a);class Ea{constructor(e){this.settings=e||{},this.id="epubjs-container-"+pr(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,r=e.width,i=e.overflow||!1,n=e.axis||"vertical",s=e.direction;ct(this.settings,e),e.height&&st(e.height)&&(t=e.height+"px"),e.width&&st(e.width)&&(r=e.width+"px");let a=document.createElement("div");return a.id=this.id,a.classList.add("epub-container"),a.style.wordSpacing="0",a.style.lineHeight="0",a.style.verticalAlign="top",a.style.position="relative",n==="horizontal"&&(a.style.display="flex",a.style.flexDirection="row",a.style.flexWrap="nowrap"),r&&(a.style.width=r),t&&(a.style.height=t),i&&(i==="scroll"&&n==="vertical"?(a.style["overflow-y"]=i,a.style["overflow-x"]="hidden"):i==="scroll"&&n==="horizontal"?(a.style["overflow-y"]="hidden",a.style["overflow-x"]=i):a.style.overflow=i),s&&(a.dir=s,a.style.direction=s),s&&this.settings.fullsize&&(document.body.style.direction=s),a}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(Rn(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),r;if(t)return this.settings.hidden?r=this.wrapper:r=this.container,t.appendChild(r),this.element=t,t}getContainer(){return this.container}onResize(e){(!st(this.settings.width)||!st(this.settings.height))&&(this.resizeFunc=wa(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var r;let i=e||this.settings.width,n=t||this.settings.height;e===null?(r=this.element.getBoundingClientRect(),r.width&&(e=Math.floor(r.width),this.container.style.width=e+"px")):st(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(r=r||this.element.getBoundingClientRect(),r.height&&(t=r.height,this.container.style.height=t+"px")):st(t)?this.container.style.height=t+"px":this.container.style.height=t,st(e)||(e=this.container.clientWidth),st(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let s=or(),a=window.getComputedStyle(document.body),o={left:parseFloat(a["padding-left"])||0,right:parseFloat(a["padding-right"])||0,top:parseFloat(a["padding-top"])||0,bottom:parseFloat(a["padding-bottom"])||0};return i||(e=s.width-o.left-o.right),(this.settings.fullsize&&!n||!n)&&(t=s.height-o.top-o.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?or():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var r="#"+this.id+" ",i="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(n){for(var s in n)n.hasOwnProperty(s)&&(i+=s+":"+n[s]+";")}),this.sheet.insertRule(r+e+" {"+i+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class xa{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(this.length){for(var r=0;r<t;r++)e=this._views[r],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,r=this.length,i=0;i<r;i++)if(t=this._views[i],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,r=this.length,i=0;i<r;i++)t=this._views[i],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,r=0;r<t;r++)e=this._views[r],e.displayed&&e.hide();this.hidden=!0}}class cr{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new yi(this),this.settings=ct(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),ct(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let r=e.tagName;typeof this.settings.fullsize>"u"&&r&&(r.toLowerCase()=="body"||r.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=oa(),this.stage=new Ea({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new xa(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(t){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(Se.MANAGERS.ORIENTATION_CHANGE,t)}).bind(this),500)}onResized(e){this.resize()}resize(e,t,r){let i=this.stage.size(e,t);if(this.winBounds=or(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===i.width&&this._stageSize.height===i.height||(this._stageSize=i,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(Se.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},r))}createView(e,t){return new this.View(e,ct(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,r){let i;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(i=t.next(),i&&!i.properties.includes("page-spread-left"))return r.call(this,i)}}display(e,t){var r=new Ye,i=r.promise;(t===e.href||st(t))&&(t=void 0);var n=this.views.find(e);if(n&&e&&this.layout.name!=="pre-paginated"){let a=n.offset();if(this.settings.direction==="ltr")this.scrollTo(a.left,a.top,!0);else{let o=n.width();this.scrollTo(a.left+o,a.top,!0)}if(t){let o=n.locationOf(t),f=n.width();this.moveTo(o,f)}return r.resolve(),i}this.clear();let s=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(s=!0),this.add(e,s).then((function(a){if(t){let o=a.locationOf(t),f=a.width();this.moveTo(o,f)}}).bind(this),a=>{r.reject(a)}).then((function(){return this.handleNextPrePaginated(s,e,this.add)}).bind(this)).then((function(){this.views.show(),r.resolve()}).bind(this)),i}afterDisplayed(e){this.emit(Se.MANAGERS.ADDED,e)}afterResized(e){this.emit(Se.MANAGERS.RESIZE,e.section)}moveTo(e,t){var r=0,i=0;this.isPaginated?(r=Math.floor(e.left/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollWidth&&(r=this.container.scrollWidth-this.layout.delta),i=Math.floor(e.top/this.layout.delta)*this.layout.delta,i+this.layout.delta>this.container.scrollHeight&&(i=this.container.scrollHeight-this.layout.delta)):i=e.top,this.settings.direction==="rtl"&&(r=r+this.layout.delta,r=r-t),this.scrollTo(r,i,!0)}add(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Se.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(Se.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}append(e,t){var r=this.createView(e,t);return this.views.append(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Se.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(Se.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}prepend(e,t){var r=this.createView(e,t);return r.on(Se.VIEWS.RESIZED,i=>{this.counter(i)}),this.views.prepend(r),r.onDisplayed=this.afterDisplayed.bind(this),r.onResize=this.afterResized.bind(this),r.on(Se.VIEWS.AXIS,i=>{this.updateAxis(i)}),r.on(Se.VIEWS.WRITING_MODE,i=>{this.updateWritingMode(i)}),r.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(i=!0),this.append(e,i).then((function(){return this.handleNextPrePaginated(i,e,this.append)}).bind(this),n=>n).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,t;let r=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!r||r==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&r==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let i=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(i=!0),this.prepend(e,i).then((function(){var n;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(n=e.prev(),n))return this.prepend(n)}).bind(this),n=>n).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=t.height<window.innerHeight?t.height:window.innerHeight,i=t.width<window.innerWidth?t.width:window.innerWidth,n=this.settings.axis==="vertical";this.settings.direction;let s=0,a=0;return this.settings.fullsize&&(s=n?window.scrollY:window.scrollX),e.map(f=>{let{index:m,href:d}=f.section,y=f.position(),p=f.width(),E=f.height(),v,u,c,g;n?(v=s+t.top-y.top+a,u=v+r-a,g=this.layout.count(E,r).pages,c=r):(v=s+t.left-y.left+a,u=v+i-a,g=this.layout.count(p,i).pages,c=i);let _=Math.ceil(v/c),D=[],b=Math.ceil(u/c);if(this.settings.direction==="rtl"&&!n){let R=_;_=g-b,b=g-R}D=[];for(var S=_;S<=b;S++){let R=S+1;D.push(R)}let I=this.mapping.page(f.contents,f.section.cfiBase,v,u);return{index:m,href:d,pages:D,totalPages:g,mapping:I}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),r=0,i=0;return this.settings.fullsize&&(r=window.scrollX),e.map(s=>{let{index:a,href:o}=s.section,f,m=s.position(),d=s.width(),y,p,E;this.settings.direction==="rtl"?(f=t.right-r,E=Math.min(Math.abs(f-m.left),this.layout.width)-i,p=m.width-(m.right-f)-i,y=p-E):(f=t.left+r,E=Math.min(m.right-f,this.layout.width)-i,y=f-m.left+i,p=y+E),i+=E;let v=this.mapping.page(s.contents,s.section.cfiBase,y,p),u=this.layout.count(d).pages,c=Math.floor(y/this.layout.pageWidth),g=[],_=Math.floor(p/this.layout.pageWidth);if(c<0&&(c=0,_=_+1),this.settings.direction==="rtl"){let b=c;c=u-_,_=u-b}for(var D=c+1;D<=_;D++){let b=D;g.push(b)}return{index:a,href:o,pages:g,totalPages:u,mapping:v}})}isVisible(e,t,r,i){var n=e.position(),s=i||this.bounds();return this.settings.axis==="horizontal"&&n.right>s.left-t&&n.left<s.right+r?!0:this.settings.axis==="vertical"&&n.bottom>s.top-t&&n.top<s.bottom+r}visible(){for(var e=this.bounds(),t=this.views.displayed(),r=t.length,i=[],n,s,a=0;a<r;a++)s=t[a],n=this.isVisible(s,0,0,e),n===!0&&i.push(s);return i}scrollBy(e,t,r){let i=this.settings.direction==="rtl"?-1:1;r&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*i,t*i):(e&&(this.container.scrollLeft+=e*i),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,r){r&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(Se.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(Se.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new fr(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new fr(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let r=e==="paginated"||e==="auto";this.isPaginated=r,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=r?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const r=t&&t.contents;r&&e.push(r)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}kt(cr.prototype);const Aa={easeInCubic:function(N){return Math.pow(N,3)}};class di{constructor(e,t){this.settings=ct({duration:80,minVelocity:.2,minDistance:10,easing:Aa.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(Se.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(Se.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(r=>{t.on(r,i=>this.triggerViewEvent(i,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:r}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=r,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:r}=e.touches[0],i=Math.abs(r-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&i<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=r,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,r=Math.abs(t),i=this.endTime-this.startTime,n=t/i,s=this.settings.minVelocity;if(r<=this.settings.minDistance||r>=e)return 0;if(n>s)return-1;if(n<-s)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,r=this.layout.pageWidth*this.layout.divisor,i=Math.round(t/r)*r;return e&&(i+=e*r),this.smoothScrollTo(i)}smoothScrollTo(e){const t=new Ye,r=this.scrollLeft,i=this.now(),n=this.settings.duration,s=this.settings.easing;this.snapping=!0;function a(){const o=this.now(),f=Math.min(1,(o-i)/n);if(s(f),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}f<1?(window.requestAnimationFrame(a.bind(this)),this.scrollTo(r+(e-r)*f,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return a.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}kt(di.prototype);var Da=Xn();const Ca=Ot(Da);class ka extends cr{constructor(e){super(e),this.name="continuous",this.settings=ct(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),ct(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return cr.prototype.display.call(this,e,t).then((function(){return this.fill()}).bind(this))}fill(e){var t=e||new Ye;return this.q.enqueue(()=>this.check()).then(r=>{r?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,r=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(r=e.top,e.top+this.settings.offsetDelta),(t>0||r>0)&&this.scrollBy(t,r,!0)}afterResized(e){this.emit(Se.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(Se.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Se.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Se.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(Se.VIEWS.RESIZED,r=>{t.expanded=!0}),t.on(Se.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Se.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(Se.VIEWS.RESIZED,r=>{this.counter(r),t.expanded=!0}),t.on(Se.VIEWS.AXIS,r=>{this.updateAxis(r)}),t.on(Se.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),r=this.views.all(),i=r.length,n=typeof e<"u"?e:this.settings.offset||0,s,a,o=new Ye,f=[],m=0;m<i;m++)if(a=r[m],s=this.isVisible(a,n,n,t),s===!0)if(a.displayed)a.show();else{let d=a.display(this.request).then(function(y){y.show()},y=>{a.hide()});f.push(d)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return f.length?Promise.all(f).catch(d=>{o.reject(d)}):(o.resolve(),o.promise)}check(e,t){var r=new Ye,i=[],n=this.settings.axis==="horizontal",s=this.settings.offset||0;e&&n&&(s=e),t&&!n&&(s=t);var a=this._bounds;let o=n?this.scrollLeft:this.scrollTop,f=n?Math.floor(a.width):a.height,m=n?this.container.scrollWidth:this.container.scrollHeight,d=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",y=this.settings.rtlScrollType,p=this.settings.direction==="rtl";this.settings.fullsize?(n&&p&&y==="negative"||!n&&p&&y==="default")&&(o=o*-1):(p&&y==="default"&&d==="horizontal"&&(o=m-f-o),p&&y==="negative"&&d==="horizontal"&&(o=o*-1));let E=()=>{let _=this.views.first(),D=_&&_.section.prev();D&&i.push(this.prepend(D))},v=()=>{let _=this.views.last(),D=_&&_.section.next();D&&i.push(this.append(D))},u=o+f+s,c=o-s;u>=m&&v(),c<0&&E();let g=i.map(_=>_.display(this.request));return i.length?Promise.all(g).then(()=>this.check()).then(()=>this.update(s),_=>_):(this.q.enqueue((function(){this.update()}).bind(this)),r.resolve(!1),r.promise)}trim(){for(var e=new Ye,t=this.views.displayed(),r=t[0],i=t[t.length-1],n=this.views.indexOf(r),s=this.views.indexOf(i),a=this.views.slice(0,n),o=this.views.slice(s+1),f=0;f<a.length-1;f++)this.erase(a[f],a);for(var m=1;m<o.length;m++)this.erase(o[m]);return e.resolve(),e.promise}erase(e,t){var r,i;this.settings.fullsize?(r=window.scrollY,i=window.scrollX):(r=this.container.scrollTop,i=this.container.scrollLeft);var n=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,r-n.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(i+Math.floor(n.width),0,!0):this.scrollTo(i,0,!0):this.scrollTo(i-Math.floor(n.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(t){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new di(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=mi;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=Ca(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,r=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*r,t=window.scrollX*r):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(Se.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(Se.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new di(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class wi{constructor(e,t){this.settings=ct(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),ct(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Dt(this),this.hooks.serialize=new Dt(this),this.hooks.content=new Dt(this),this.hooks.unloaded=new Dt(this),this.hooks.layout=new Dt(this),this.hooks.render=new Dt(this),this.hooks.show=new Dt(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new ea(this),this.annotations=new ia(this),this.epubcfi=new Xe,this.q=new yi(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new Ye,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=cr:typeof e=="string"&&e==="continuous"?t=ka:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=Vn:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(Se.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(Se.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(Se.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(Se.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(Se.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(Se.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(Se.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var t=new Ye,r=t.promise,i;return this.displaying=t,this.book.locations.length()&&Nn(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),i=this.book.spine.get(e),i?(this.manager.display(i,e).then(()=>{t.resolve(i),this.displaying=void 0,this.emit(Se.RENDITION.DISPLAYED,i),this.reportLocation()},n=>{this.emit(Se.RENDITION.DISPLAY_ERROR,n)}),r):(t.reject(new Error("No Section Found")),r)}}afterDisplayed(e){e.on(Se.VIEWS.MARK_CLICKED,(t,r)=>this.triggerMarkEvent(t,r,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(Se.RENDITION.RENDERED,e.section,e)}):this.emit(Se.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(Se.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(Se.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(Se.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,r){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,r)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,r=this.settings.layout||e.layout||"reflowable",i=this.settings.spread||e.spread||"auto",n=this.settings.orientation||e.orientation||"auto",s=this.settings.flow||e.flow||"auto",a=e.viewport||"",o=this.settings.minSpreadWidth||e.minSpreadWidth||800,f=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:r,spread:i,orientation:n,flow:s,viewport:a,minSpreadWidth:o,direction:f},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new Wn(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(Se.LAYOUT.UPDATED,(t,r)=>{this.emit(Se.RENDITION.LAYOUT,t,r)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var r=this.manager.currentLocation();if(r&&r.then&&typeof r.then=="function")r.then((function(i){let n=this.located(i);!n||!n.start||!n.end||(this.location=n,this.emit(Se.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Se.RENDITION.RELOCATED,this.location))}).bind(this));else if(r){let i=this.located(r);if(!i||!i.start||!i.end)return;this.location=i,this.emit(Se.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Se.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(t){return this.located(t)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],r=e[e.length-1],i={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:r.index,href:r.href,cfi:r.mapping.end,displayed:{page:r.pages[r.pages.length-1]||1,total:r.totalPages}}},n=this.book.locations.locationFromCfi(t.mapping.start),s=this.book.locations.locationFromCfi(r.mapping.end);n!=null&&(i.start.location=n,i.start.percentage=this.book.locations.percentageFromLocation(n)),s!=null&&(i.end.location=s,i.end.percentage=this.book.locations.percentageFromLocation(s));let a=this.book.pageList.pageFromCfi(t.mapping.start),o=this.book.pageList.pageFromCfi(r.mapping.end);return a!=-1&&(i.start.page=a),o!=-1&&(i.end.page=o),r.index===this.book.spine.last().index&&i.end.displayed.page>=i.end.displayed.total&&(i.atEnd=!0),t.index===this.book.spine.first().index&&i.start.displayed.page===1&&(i.atStart=!0),i}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){nr.forEach(t=>{e.on(t,r=>this.triggerViewEvent(r,e))}),e.on(Se.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(Se.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,r){this.emit(Se.RENDITION.MARK_CLICKED,e,t,r)}getRange(e,t){var r=new Xe(e),i=this.manager.visible().filter(function(n){if(r.spinePos===n.index)return!0});if(i.length)return i[0].contents.range(r,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(n){n()});let t=e.window.getComputedStyle(e.content,null),r=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-i+"px":"100%")+"!important","max-height":r+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(n,s){setTimeout(function(){n()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(Se.CONTENTS.LINK_CLICKED,t=>{let r=this.book.path.relative(t);this.display(r)})}injectStylesheet(e,t){let r=e.createElement("link");r.setAttribute("type","text/css"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(r)}injectScript(e,t){let r=e.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",this.settings.script),r.textContent=" ",e.getElementsByTagName("head")[0].appendChild(r)}injectIdentifier(e,t){let r=this.book.packaging.metadata.identifier,i=e.createElement("meta");i.setAttribute("name","dc.relation.ispartof"),r&&i.setAttribute("content",r),e.getElementsByTagName("head")[0].appendChild(i)}}kt(wi.prototype);var ai={exports:{}};var xn;function Sa(){return xn||(xn=1,(function(N,e){(function(t){N.exports=t()})(function(){return(function t(r,i,n){function s(f,m){if(!i[f]){if(!r[f]){var d=typeof _t=="function"&&_t;if(!m&&d)return d(f,!0);if(a)return a(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var p=i[f]={exports:{}};r[f][0].call(p.exports,function(E){var v=r[f][1][E];return s(v||E)},p,p.exports,t,r,i,n)}return i[f].exports}for(var a=typeof _t=="function"&&_t,o=0;o<n.length;o++)s(n[o]);return s})({1:[function(t,r,i){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(o){for(var f=[],m,d,y,p,E,v,u,c=0,g=o.length,_=g,D=n.getTypeOf(o)!=="string";c<o.length;)_=g-c,D?(m=o[c++],d=c<g?o[c++]:0,y=c<g?o[c++]:0):(m=o.charCodeAt(c++),d=c<g?o.charCodeAt(c++):0,y=c<g?o.charCodeAt(c++):0),p=m>>2,E=(m&3)<<4|d>>4,v=_>1?(d&15)<<2|y>>6:64,u=_>2?y&63:64,f.push(a.charAt(p)+a.charAt(E)+a.charAt(v)+a.charAt(u));return f.join("")},i.decode=function(o){var f,m,d,y,p,E,v,u=0,c=0,g="data:";if(o.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");o=o.replace(/[^A-Za-z0-9+/=]/g,"");var _=o.length*3/4;if(o.charAt(o.length-1)===a.charAt(64)&&_--,o.charAt(o.length-2)===a.charAt(64)&&_--,_%1!==0)throw new Error("Invalid base64 input, bad content length.");var D;for(s.uint8array?D=new Uint8Array(_|0):D=new Array(_|0);u<o.length;)y=a.indexOf(o.charAt(u++)),p=a.indexOf(o.charAt(u++)),E=a.indexOf(o.charAt(u++)),v=a.indexOf(o.charAt(u++)),f=y<<2|p>>4,m=(p&15)<<4|E>>2,d=(E&3)<<6|v,D[c++]=f,E!==64&&(D[c++]=m),v!==64&&(D[c++]=d);return D}},{"./support":30,"./utils":32}],2:[function(t,r,i){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),o=t("./stream/DataLengthProbe");function f(m,d,y,p,E){this.compressedSize=m,this.uncompressedSize=d,this.crc32=y,this.compression=p,this.compressedContent=E}f.prototype={getContentWorker:function(){var m=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),d=this;return m.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,d,y){return m.pipe(new a).pipe(new o("uncompressedSize")).pipe(d.compressWorker(y)).pipe(new o("compressedSize")).withStreamInfo("compression",d)},r.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,r,i){var n=t("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,r,i){var n=t("./utils");function s(){for(var m,d=[],y=0;y<256;y++){m=y;for(var p=0;p<8;p++)m=m&1?3988292384^m>>>1:m>>>1;d[y]=m}return d}var a=s();function o(m,d,y,p){var E=a,v=p+y;m=m^-1;for(var u=p;u<v;u++)m=m>>>8^E[(m^d[u])&255];return m^-1}function f(m,d,y,p){var E=a,v=p+y;m=m^-1;for(var u=p;u<v;u++)m=m>>>8^E[(m^d.charCodeAt(u))&255];return m^-1}r.exports=function(d,y){if(typeof d>"u"||!d.length)return 0;var p=n.getTypeOf(d)!=="string";return p?o(y|0,d,d.length,0):f(y|0,d,d.length,0)}},{"./utils":32}],5:[function(t,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(t,r,i){var n=null;typeof Promise<"u"?n=Promise:n=t("lie"),r.exports={Promise:n}},{lie:37}],7:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),o=t("./stream/GenericWorker"),f=n?"uint8array":"array";i.magic="\b\0";function m(d,y){o.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=y,this.meta={}}a.inherits(m,o),m.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,d.data),!1)},m.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(y){d.push({data:y,meta:d.meta})}},i.compressWorker=function(d){return new m("Deflate",d)},i.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),o=t("../crc32"),f=t("../signature"),m=function(c,g){var _="",D;for(D=0;D<g;D++)_+=String.fromCharCode(c&255),c=c>>>8;return _},d=function(c,g){var _=c;return c||(_=g?16893:33204),(_&65535)<<16},y=function(c){return(c||0)&63},p=function(c,g,_,D,b,S){var I=c.file,R=c.compression,C=S!==a.utf8encode,B=n.transformTo("string",S(I.name)),Y=n.transformTo("string",a.utf8encode(I.name)),k=I.comment,M=n.transformTo("string",S(k)),x=n.transformTo("string",a.utf8encode(k)),V=Y.length!==I.name.length,ce=x.length!==k.length,$,ae,re="",be="",W="",H=I.dir,_e=I.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};(!g||_)&&(fe.crc32=c.crc32,fe.compressedSize=c.compressedSize,fe.uncompressedSize=c.uncompressedSize);var pe=0;g&&(pe|=8),!C&&(V||ce)&&(pe|=2048);var ze=0,Pe=0;H&&(ze|=16),b==="UNIX"?(Pe=798,ze|=d(I.unixPermissions,H)):(Pe=20,ze|=y(I.dosPermissions)),$=_e.getUTCHours(),$=$<<6,$=$|_e.getUTCMinutes(),$=$<<5,$=$|_e.getUTCSeconds()/2,ae=_e.getUTCFullYear()-1980,ae=ae<<4,ae=ae|_e.getUTCMonth()+1,ae=ae<<5,ae=ae|_e.getUTCDate(),V&&(be=m(1,1)+m(o(B),4)+Y,re+="up"+m(be.length,2)+be),ce&&(W=m(1,1)+m(o(M),4)+x,re+="uc"+m(W.length,2)+W);var xe="";xe+=`
\0`,xe+=m(pe,2),xe+=R.magic,xe+=m($,2),xe+=m(ae,2),xe+=m(fe.crc32,4),xe+=m(fe.compressedSize,4),xe+=m(fe.uncompressedSize,4),xe+=m(B.length,2),xe+=m(re.length,2);var Oe=f.LOCAL_FILE_HEADER+xe+B+re,Ue=f.CENTRAL_FILE_HEADER+m(Pe,2)+xe+m(M.length,2)+"\0\0\0\0"+m(ze,4)+m(D,4)+B+re+M;return{fileRecord:Oe,dirRecord:Ue}},E=function(c,g,_,D,b){var S="",I=n.transformTo("string",b(D));return S=f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(c,2)+m(c,2)+m(g,4)+m(_,4)+m(I.length,2)+I,S},v=function(c){var g="";return g=f.DATA_DESCRIPTOR+m(c.crc32,4)+m(c.compressedSize,4)+m(c.uncompressedSize,4),g};function u(c,g,_,D){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=_,this.encodeFileName=D,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(u,s),u.prototype.push=function(c){var g=c.meta.percent||0,_=this.entriesCount,D=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,s.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:_?(g+100*(_-D-1))/_:100}}))},u.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var g=this.streamFiles&&!c.file.dir;if(g){var _=p(c,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(c){this.accumulate=!1;var g=this.streamFiles&&!c.file.dir,_=p(c,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),g)this.push({data:v(c),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var c=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var _=this.bytesWritten-c,D=E(this.dirRecords.length,_,c,this.zipComment,this.encodeFileName);this.push({data:D,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(c){this._sources.push(c);var g=this;return c.on("data",function(_){g.processChunk(_)}),c.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),c.on("error",function(_){g.error(_)}),this},u.prototype.resume=function(){if(!s.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},u.prototype.error=function(c){var g=this._sources;if(!s.prototype.error.call(this,c))return!1;for(var _=0;_<g.length;_++)try{g[_].error(c)}catch{}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var c=this._sources,g=0;g<c.length;g++)c[g].lock()},r.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,r,i){var n=t("../compressions"),s=t("./ZipFileWorker"),a=function(o,f){var m=o||f,d=n[m];if(!d)throw new Error(m+" is not a valid compression method !");return d};i.generateWorker=function(o,f,m){var d=new s(f.streamFiles,m,f.platform,f.encodeFileName),y=0;try{o.forEach(function(p,E){y++;var v=a(E.options.compression,f.compression),u=E.options.compressionOptions||f.compressionOptions||{},c=E.dir,g=E.date;E._compressWorker(v,u).withStreamInfo("file",{name:p,dir:c,date:g,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(d)}),d.entriesCount=y}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,r,i){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),r.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,r,i){var n=t("./utils"),s=t("./external"),a=t("./utf8"),o=t("./zipEntries"),f=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function d(y){return new s.Promise(function(p,E){var v=y.decompressed.getContentWorker().pipe(new f);v.on("error",function(u){E(u)}).on("end",function(){v.streamInfo.crc32!==y.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(y,p){var E=this;return p=n.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),m.isNode&&m.isStream(y)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",y,!0,p.optimizedBinaryString,p.base64).then(function(v){var u=new o(p);return u.load(v),u}).then(function(u){var c=[s.Promise.resolve(u)],g=u.files;if(p.checkCRC32)for(var _=0;_<g.length;_++)c.push(d(g[_]));return s.Promise.all(c)}).then(function(u){for(var c=u.shift(),g=c.files,_=0;_<g.length;_++){var D=g[_],b=D.fileNameStr,S=n.resolve(D.fileNameStr);E.file(S,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:p.createFolders}),D.dir||(E.file(S).unsafeOriginalName=b)}return c.zipComment.length&&(E.comment=c.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,r,i){var n=t("../utils"),s=t("../stream/GenericWorker");function a(o,f){s.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(f)}n.inherits(a,s),a.prototype._bindStream=function(o){var f=this;this._stream=o,o.pause(),o.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return s.prototype.pause.call(this)?(this._stream.pause(),!0):!1},a.prototype.resume=function(){return s.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,r,i){var n=t("readable-stream").Readable,s=t("../utils");s.inherits(a,n);function a(o,f,m){n.call(this,f),this._helper=o;var d=this;o.on("data",function(y,p){d.push(y)||d._helper.pause(),m&&m(p)}).on("error",function(y){d.emit("error",y)}).on("end",function(){d.push(null)})}a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,r,i){var n=t("./utf8"),s=t("./utils"),a=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),f=t("./defaults"),m=t("./compressedObject"),d=t("./zipObject"),y=t("./generate"),p=t("./nodejsUtils"),E=t("./nodejs/NodejsStreamInputAdapter"),v=function(b,S,I){var R=s.getTypeOf(S),C,B=s.extend(I||{},f);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&B.unixPermissions&16384&&(B.dir=!0),B.dosPermissions&&B.dosPermissions&16&&(B.dir=!0),B.dir&&(b=c(b)),B.createFolders&&(C=u(b))&&g.call(this,C,!0);var Y=R==="string"&&B.binary===!1&&B.base64===!1;(!I||typeof I.binary>"u")&&(B.binary=!Y);var k=S instanceof m&&S.uncompressedSize===0;(k||B.dir||!S||S.length===0)&&(B.base64=!1,B.binary=!0,S="",B.compression="STORE",R="string");var M=null;S instanceof m||S instanceof a?M=S:p.isNode&&p.isStream(S)?M=new E(b,S):M=s.prepareContent(b,S,B.binary,B.optimizedBinaryString,B.base64);var x=new d(b,M,B);this.files[b]=x},u=function(b){b.slice(-1)==="/"&&(b=b.substring(0,b.length-1));var S=b.lastIndexOf("/");return S>0?b.substring(0,S):""},c=function(b){return b.slice(-1)!=="/"&&(b+="/"),b},g=function(b,S){return S=typeof S<"u"?S:f.createFolders,b=c(b),this.files[b]||v.call(this,b,null,{dir:!0,createFolders:S}),this.files[b]};function _(b){return Object.prototype.toString.call(b)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(b){var S,I,R;for(S in this.files)R=this.files[S],I=S.slice(this.root.length,S.length),I&&S.slice(0,this.root.length)===this.root&&b(I,R)},filter:function(b){var S=[];return this.forEach(function(I,R){b(I,R)&&S.push(R)}),S},file:function(b,S,I){if(arguments.length===1)if(_(b)){var R=b;return this.filter(function(B,Y){return!Y.dir&&R.test(B)})}else{var C=this.files[this.root+b];return C&&!C.dir?C:null}else b=this.root+b,v.call(this,b,S,I);return this},folder:function(b){if(!b)return this;if(_(b))return this.filter(function(C,B){return B.dir&&b.test(C)});var S=this.root+b,I=g.call(this,S),R=this.clone();return R.root=I.name,R},remove:function(b){b=this.root+b;var S=this.files[b];if(S||(b.slice(-1)!=="/"&&(b+="/"),S=this.files[b]),S&&!S.dir)delete this.files[b];else for(var I=this.filter(function(C,B){return B.name.slice(0,b.length)===b}),R=0;R<I.length;R++)delete this.files[I[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(b){var S,I={};try{if(I=s.extend(b||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),I.type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");s.checkSupport(I.type),(I.platform==="darwin"||I.platform==="freebsd"||I.platform==="linux"||I.platform==="sunos")&&(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var R=I.comment||this.comment||"";S=y.generateWorker(this,I,R)}catch(C){S=new a("error"),S.error(C)}return new o(S,I.type||"string",I.mimeType)},generateAsync:function(b,S){return this.generateInternalStream(b).accumulate(S)},generateNodeStream:function(b,S){return b=b||{},b.type||(b.type="nodebuffer"),this.generateInternalStream(b).toNodejsStream(S)}};r.exports=D},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,r,i){r.exports=t("stream")},{stream:void 0}],17:[function(t,r,i){var n=t("./DataReader"),s=t("../utils");function a(o){n.call(this,o);for(var f=0;f<this.data.length;f++)o[f]=o[f]&255}s.inherits(a,n),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var f=o.charCodeAt(0),m=o.charCodeAt(1),d=o.charCodeAt(2),y=o.charCodeAt(3),p=this.length-4;p>=0;--p)if(this.data[p]===f&&this.data[p+1]===m&&this.data[p+2]===d&&this.data[p+3]===y)return p-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var f=o.charCodeAt(0),m=o.charCodeAt(1),d=o.charCodeAt(2),y=o.charCodeAt(3),p=this.readData(4);return f===p[0]&&m===p[1]&&d===p[2]&&y===p[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,r,i){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var o=0,f;for(this.checkOffset(a),f=this.index+a-1;f>=this.index;f--)o=(o<<8)+this.byteAt(f);return this.index+=a,o},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC((a>>25&127)+1980,(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(a&31)<<1))}},r.exports=s},{"../utils":32}],19:[function(t,r,i){var n=t("./Uint8ArrayReader"),s=t("../utils");function a(o){n.call(this,o)}s.inherits(a,n),a.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,r,i){var n=t("./DataReader"),s=t("../utils");function a(o){n.call(this,o)}s.inherits(a,n),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){var f=this.readData(4);return o===f},a.prototype.readData=function(o){this.checkOffset(o);var f=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,r,i){var n=t("./ArrayReader"),s=t("../utils");function a(o){n.call(this,o)}s.inherits(a,n),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,f},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,r,i){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),o=t("./StringReader"),f=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");r.exports=function(d){var y=n.getTypeOf(d);return n.checkSupport(y),y==="string"&&!s.uint8array?new o(d):y==="nodebuffer"?new f(d):s.uint8array?new m(n.transformTo("uint8array",d)):new a(n.transformTo("array",d))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,r,i){var n=t("./GenericWorker"),s=t("../utils");function a(o){n.call(this,"ConvertWorker to "+o),this.destType=o}s.inherits(a,n),a.prototype.processChunk=function(o){this.push({data:s.transformTo(this.destType,o.data),meta:o.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,r,i){var n=t("./GenericWorker"),s=t("../crc32"),a=t("../utils");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(o,n),o.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker");function a(o){s.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}n.inherits(a,s),a.prototype.processChunk=function(o){if(o){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+o.data.length}s.prototype.processChunk.call(this,o)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,r,i){var n=t("../utils"),s=t("./GenericWorker"),a=16*1024;function o(f){s.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(d){m.dataIsReady=!0,m.data=d,m.max=d&&d.length||0,m.type=n.getTypeOf(d),m.isPaused||m._tickAndRepeat()},function(d){m.error(d)})}n.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return s.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=a,m=null,d=Math.min(this.max,this.index+f);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,d);break;case"uint8array":m=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":m=this.data.slice(this.index,d);break}return this.index=d,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,r,i){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return this.isFinished?!1:(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var o=0;o<this._listeners[s].length;o++)this._listeners[s][o].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(o){a.processChunk(o)}),s.on("end",function(){a.end()}),s.on("error",function(o){a.error(o)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var s=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=n},{}],29:[function(t,r,i){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),o=t("../base64"),f=t("../support"),m=t("../external"),d=null;if(f.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(u,c,g){switch(u){case"blob":return n.newBlob(n.transformTo("arraybuffer",c),g);case"base64":return o.encode(c);default:return n.transformTo(u,c)}}function p(u,c){var g,_=0,D=null,b=0;for(g=0;g<c.length;g++)b+=c[g].length;switch(u){case"string":return c.join("");case"array":return Array.prototype.concat.apply([],c);case"uint8array":for(D=new Uint8Array(b),g=0;g<c.length;g++)D.set(c[g],_),_+=c[g].length;return D;case"nodebuffer":return Buffer.concat(c);default:throw new Error("concat : unsupported type '"+u+"'")}}function E(u,c){return new m.Promise(function(g,_){var D=[],b=u._internalType,S=u._outputType,I=u._mimeType;u.on("data",function(R,C){D.push(R),c&&c(C)}).on("error",function(R){D=[],_(R)}).on("end",function(){try{var R=y(S,p(b,D),I);g(R)}catch(C){_(C)}D=[]}).resume()})}function v(u,c,g){var _=c;switch(c){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string";break}try{this._internalType=_,this._outputType=c,this._mimeType=g,n.checkSupport(_),this._worker=u.pipe(new s(_)),u.lock()}catch(D){this._worker=new a("error"),this._worker.error(D)}}v.prototype={accumulate:function(u){return E(this,u)},on:function(u,c){var g=this;return u==="data"?this._worker.on(u,function(_){c.call(g,_.data,_.meta)}):this._worker.on(u,function(){n.delay(c,arguments,g)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(u){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},u)}},r.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,a=new s;a.append(n),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(t,r,i){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),o=t("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;f[254]=f[254]=1;var d=function(u){var c,g,_,D,b,S=u.length,I=0;for(D=0;D<S;D++)g=u.charCodeAt(D),(g&64512)===55296&&D+1<S&&(_=u.charCodeAt(D+1),(_&64512)===56320&&(g=65536+(g-55296<<10)+(_-56320),D++)),I+=g<128?1:g<2048?2:g<65536?3:4;for(s.uint8array?c=new Uint8Array(I):c=new Array(I),b=0,D=0;b<I;D++)g=u.charCodeAt(D),(g&64512)===55296&&D+1<S&&(_=u.charCodeAt(D+1),(_&64512)===56320&&(g=65536+(g-55296<<10)+(_-56320),D++)),g<128?c[b++]=g:g<2048?(c[b++]=192|g>>>6,c[b++]=128|g&63):g<65536?(c[b++]=224|g>>>12,c[b++]=128|g>>>6&63,c[b++]=128|g&63):(c[b++]=240|g>>>18,c[b++]=128|g>>>12&63,c[b++]=128|g>>>6&63,c[b++]=128|g&63);return c},y=function(u,c){var g;for(c=c||u.length,c>u.length&&(c=u.length),g=c-1;g>=0&&(u[g]&192)===128;)g--;return g<0||g===0?c:g+f[u[g]]>c?g:c},p=function(u){var c,g,_,D,b=u.length,S=new Array(b*2);for(g=0,c=0;c<b;){if(_=u[c++],_<128){S[g++]=_;continue}if(D=f[_],D>4){S[g++]=65533,c+=D-1;continue}for(_&=D===2?31:D===3?15:7;D>1&&c<b;)_=_<<6|u[c++]&63,D--;if(D>1){S[g++]=65533;continue}_<65536?S[g++]=_:(_-=65536,S[g++]=55296|_>>10&1023,S[g++]=56320|_&1023)}return S.length!==g&&(S.subarray?S=S.subarray(0,g):S.length=g),n.applyFromCharCode(S)};i.utf8encode=function(c){return s.nodebuffer?a.newBufferFrom(c,"utf-8"):d(c)},i.utf8decode=function(c){return s.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):(c=n.transformTo(s.uint8array?"uint8array":"array",c),p(c))};function E(){o.call(this,"utf-8 decode"),this.leftOver=null}n.inherits(E,o),E.prototype.processChunk=function(u){var c=n.transformTo(s.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=c;c=new Uint8Array(g.length+this.leftOver.length),c.set(this.leftOver,0),c.set(g,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var _=y(c),D=c;_!==c.length&&(s.uint8array?(D=c.subarray(0,_),this.leftOver=c.subarray(_,c.length)):(D=c.slice(0,_),this.leftOver=c.slice(_,c.length))),this.push({data:i.utf8decode(D),meta:u.meta})},E.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=E;function v(){o.call(this,"utf-8 encode")}n.inherits(v,o),v.prototype.processChunk=function(u){this.push({data:i.utf8encode(u.data),meta:u.meta})},i.Utf8EncodeWorker=v},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,r,i){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),o=t("./external");t("setimmediate");function f(u){var c=null;return n.uint8array?c=new Uint8Array(u.length):c=new Array(u.length),d(u,c)}i.newBlob=function(u,c){i.checkSupport("blob");try{return new Blob([u],{type:c})}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,_=new g;return _.append(u),_.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};function m(u){return u}function d(u,c){for(var g=0;g<u.length;++g)c[g]=u.charCodeAt(g)&255;return c}var y={stringifyByChunk:function(u,c,g){var _=[],D=0,b=u.length;if(b<=g)return String.fromCharCode.apply(null,u);for(;D<b;)c==="array"||c==="nodebuffer"?_.push(String.fromCharCode.apply(null,u.slice(D,Math.min(D+g,b)))):_.push(String.fromCharCode.apply(null,u.subarray(D,Math.min(D+g,b)))),D+=g;return _.join("")},stringifyByChar:function(u){for(var c="",g=0;g<u.length;g++)c+=String.fromCharCode(u[g]);return c},applyCanBeUsed:{uint8array:(function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function p(u){var c=65536,g=i.getTypeOf(u),_=!0;if(g==="uint8array"?_=y.applyCanBeUsed.uint8array:g==="nodebuffer"&&(_=y.applyCanBeUsed.nodebuffer),_)for(;c>1;)try{return y.stringifyByChunk(u,g,c)}catch{c=Math.floor(c/2)}return y.stringifyByChar(u)}i.applyFromCharCode=p;function E(u,c){for(var g=0;g<u.length;g++)c[g]=u[g];return c}var v={};v.string={string:m,array:function(u){return d(u,new Array(u.length))},arraybuffer:function(u){return v.string.uint8array(u).buffer},uint8array:function(u){return d(u,new Uint8Array(u.length))},nodebuffer:function(u){return d(u,a.allocBuffer(u.length))}},v.array={string:p,array:m,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return a.newBufferFrom(u)}},v.arraybuffer={string:function(u){return p(new Uint8Array(u))},array:function(u){return E(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:m,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return a.newBufferFrom(new Uint8Array(u))}},v.uint8array={string:p,array:function(u){return E(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:m,nodebuffer:function(u){return a.newBufferFrom(u)}},v.nodebuffer={string:p,array:function(u){return E(u,new Array(u.length))},arraybuffer:function(u){return v.nodebuffer.uint8array(u).buffer},uint8array:function(u){return E(u,new Uint8Array(u.length))},nodebuffer:m},i.transformTo=function(u,c){if(c||(c=""),!u)return c;i.checkSupport(u);var g=i.getTypeOf(c),_=v[g][u](c);return _},i.resolve=function(u){for(var c=u.split("/"),g=[],_=0;_<c.length;_++){var D=c[_];D==="."||D===""&&_!==0&&_!==c.length-1||(D===".."?g.pop():g.push(D))}return g.join("/")},i.getTypeOf=function(u){if(typeof u=="string")return"string";if(Object.prototype.toString.call(u)==="[object Array]")return"array";if(n.nodebuffer&&a.isBuffer(u))return"nodebuffer";if(n.uint8array&&u instanceof Uint8Array)return"uint8array";if(n.arraybuffer&&u instanceof ArrayBuffer)return"arraybuffer"},i.checkSupport=function(u){var c=n[u.toLowerCase()];if(!c)throw new Error(u+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(u){var c="",g,_;for(_=0;_<(u||"").length;_++)g=u.charCodeAt(_),c+="\\x"+(g<16?"0":"")+g.toString(16).toUpperCase();return c},i.delay=function(u,c,g){setImmediate(function(){u.apply(g||null,c||[])})},i.inherits=function(u,c){var g=function(){};g.prototype=c.prototype,u.prototype=new g},i.extend=function(){var u={},c,g;for(c=0;c<arguments.length;c++)for(g in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],g)&&typeof u[g]>"u"&&(u[g]=arguments[c][g]);return u},i.prepareContent=function(u,c,g,_,D){var b=o.Promise.resolve(c).then(function(S){var I=n.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1);return I&&typeof FileReader<"u"?new o.Promise(function(R,C){var B=new FileReader;B.onload=function(Y){R(Y.target.result)},B.onerror=function(Y){C(Y.target.error)},B.readAsArrayBuffer(S)}):S});return b.then(function(S){var I=i.getTypeOf(S);return I?(I==="arraybuffer"?S=i.transformTo("uint8array",S):I==="string"&&(D?S=s.decode(S):g&&_!==!0&&(S=f(S))),S):o.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),o=t("./zipEntry"),f=t("./support");function m(d){this.files=[],this.loadOptions=d}m.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(y)+", expected "+s.pretty(d)+")")}},isSignature:function(d,y){var p=this.reader.index;this.reader.setIndex(d);var E=this.reader.readString(4),v=E===y;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",p=s.transformTo(y,d);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d=this.zip64EndOfCentralSize-44,y=0,p,E,v;y<d;)p=this.reader.readInt(2),E=this.reader.readInt(4),v=this.reader.readData(E),this.zip64ExtensibleData[p]={id:p,length:E,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,y;for(d=0;d<this.files.length;d++)y=this.files[d],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)d=new o({zip64:this.zip64},this.loadOptions),d.readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0){var y=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw y?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(d);var p=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),d<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var v=p-E;if(v>0)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(d){this.reader=n(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,r,i){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),o=t("./crc32"),f=t("./utf8"),m=t("./compressions"),d=t("./support"),y=0,p=3,E=function(u){for(var c in m)if(Object.prototype.hasOwnProperty.call(m,c)&&m[c].magic===u)return m[c];return null};function v(u,c){this.options=u,this.loadOptions=c}v.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(u){var c,g;if(u.skip(22),this.fileNameLength=u.readInt(2),g=u.readInt(2),this.fileName=u.readData(this.fileNameLength),u.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(c=E(this.compressionMethod),c===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,c,u.readData(this.compressedSize))},readCentralPart:function(u){this.versionMadeBy=u.readInt(2),u.skip(2),this.bitFlag=u.readInt(2),this.compressionMethod=u.readString(2),this.date=u.readDate(),this.crc32=u.readInt(4),this.compressedSize=u.readInt(4),this.uncompressedSize=u.readInt(4);var c=u.readInt(2);if(this.extraFieldsLength=u.readInt(2),this.fileCommentLength=u.readInt(2),this.diskNumberStart=u.readInt(2),this.internalFileAttributes=u.readInt(2),this.externalFileAttributes=u.readInt(4),this.localHeaderOffset=u.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");u.skip(c),this.readExtraFields(u),this.parseZIP64ExtraField(u),this.fileComment=u.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var u=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),u===y&&(this.dosPermissions=this.externalFileAttributes&63),u===p&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var u=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=u.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=u.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=u.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=u.readInt(4))}},readExtraFields:function(u){var c=u.index+this.extraFieldsLength,g,_,D;for(this.extraFields||(this.extraFields={});u.index+4<c;)g=u.readInt(2),_=u.readInt(2),D=u.readData(_),this.extraFields[g]={id:g,length:_,value:D};u.setIndex(c)},handleUTF8:function(){var u=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var c=this.findExtraFieldUnicodePath();if(c!==null)this.fileNameStr=c;else{var g=s.transformTo(u,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var D=s.transformTo(u,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(D)}}},findExtraFieldUnicodePath:function(){var u=this.extraFields[28789];if(u){var c=n(u.value);return c.readInt(1)!==1||o(this.fileName)!==c.readInt(4)?null:f.utf8decode(c.readData(u.length-5))}return null},findExtraFieldUnicodeComment:function(){var u=this.extraFields[25461];if(u){var c=n(u.value);return c.readInt(1)!==1||o(this.fileComment)!==c.readInt(4)?null:f.utf8decode(c.readData(u.length-5))}return null}},r.exports=v},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,r,i){var n=t("./stream/StreamHelper"),s=t("./stream/DataWorker"),a=t("./utf8"),o=t("./compressedObject"),f=t("./stream/GenericWorker"),m=function(E,v,u){this.name=E,this.dir=u.dir,this.date=u.date,this.comment=u.comment,this.unixPermissions=u.unixPermissions,this.dosPermissions=u.dosPermissions,this._data=v,this._dataBinary=u.binary,this.options={compression:u.compression,compressionOptions:u.compressionOptions}};m.prototype={internalStream:function(E){var v=null,u="string";try{if(!E)throw new Error("No output type specified.");u=E.toLowerCase();var c=u==="string"||u==="text";(u==="binarystring"||u==="text")&&(u="string"),v=this._decompressWorker();var g=!this._dataBinary;g&&!c&&(v=v.pipe(new a.Utf8EncodeWorker)),!g&&c&&(v=v.pipe(new a.Utf8DecodeWorker))}catch(_){v=new f("error"),v.error(_)}return new n(v,u,"")},async:function(E,v){return this.internalStream(E).accumulate(v)},nodeStream:function(E,v){return this.internalStream(E||"nodebuffer").toNodejsStream(v)},_compressWorker:function(E,v){if(this._data instanceof o&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var u=this._decompressWorker();return this._dataBinary||(u=u.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(u,E,v)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<d.length;p++)m.prototype[d[p]]=y;r.exports=m},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,i){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var o=0,f=new s(E),m=n.document.createTextNode("");f.observe(m,{characterData:!0}),a=function(){m.data=o=++o%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var d=new n.MessageChannel;d.port1.onmessage=E,a=function(){d.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var u=n.document.createElement("script");u.onreadystatechange=function(){E(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},n.document.documentElement.appendChild(u)}:a=function(){setTimeout(E,0)};var y,p=[];function E(){y=!0;for(var u,c,g=p.length;g;){for(c=p,p=[],u=-1;++u<g;)c[u]();g=p.length}y=!1}r.exports=v;function v(u){p.push(u)===1&&!y&&a()}}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,r,i){var n=t("immediate");function s(){}var a={},o=["REJECTED"],f=["FULFILLED"],m=["PENDING"];r.exports=d;function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,b!==s&&v(this,b)}d.prototype.finally=function(b){if(typeof b!="function")return this;var S=this.constructor;return this.then(I,R);function I(C){function B(){return C}return S.resolve(b()).then(B)}function R(C){function B(){throw C}return S.resolve(b()).then(B)}},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,S){if(typeof b!="function"&&this.state===f||typeof S!="function"&&this.state===o)return this;var I=new this.constructor(s);if(this.state!==m){var R=this.state===f?b:S;p(I,R,this.outcome)}else this.queue.push(new y(I,b,S));return I};function y(b,S,I){this.promise=b,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},y.prototype.otherCallFulfilled=function(b){p(this.promise,this.onFulfilled,b)},y.prototype.callRejected=function(b){a.reject(this.promise,b)},y.prototype.otherCallRejected=function(b){p(this.promise,this.onRejected,b)};function p(b,S,I){n(function(){var R;try{R=S(I)}catch(C){return a.reject(b,C)}R===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,R)})}a.resolve=function(b,S){var I=u(E,S);if(I.status==="error")return a.reject(b,I.value);var R=I.value;if(R)v(b,R);else{b.state=f,b.outcome=S;for(var C=-1,B=b.queue.length;++C<B;)b.queue[C].callFulfilled(S)}return b},a.reject=function(b,S){b.state=o,b.outcome=S;for(var I=-1,R=b.queue.length;++I<R;)b.queue[I].callRejected(S);return b};function E(b){var S=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof S=="function")return function(){S.apply(b,arguments)}}function v(b,S){var I=!1;function R(k){I||(I=!0,a.reject(b,k))}function C(k){I||(I=!0,a.resolve(b,k))}function B(){S(C,R)}var Y=u(B);Y.status==="error"&&R(Y.value)}function u(b,S){var I={};try{I.value=b(S),I.status="success"}catch(R){I.status="error",I.value=R}return I}d.resolve=c;function c(b){return b instanceof this?b:a.resolve(new this(s),b)}d.reject=g;function g(b){var S=new this(s);return a.reject(S,b)}d.all=_;function _(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,R=!1;if(!I)return this.resolve([]);for(var C=new Array(I),B=0,Y=-1,k=new this(s);++Y<I;)M(b[Y],Y);return k;function M(x,V){S.resolve(x).then(ce,function($){R||(R=!0,a.reject(k,$))});function ce($){C[V]=$,++B===I&&!R&&(R=!0,a.resolve(k,C))}}}d.race=D;function D(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,R=!1;if(!I)return this.resolve([]);for(var C=-1,B=new this(s);++C<I;)Y(b[C]);return B;function Y(k){S.resolve(k).then(function(M){R||(R=!0,a.resolve(B,M))},function(M){R||(R=!0,a.reject(B,M))})}}},{immediate:36}],38:[function(t,r,i){var n=t("./lib/utils/common").assign,s=t("./lib/deflate"),a=t("./lib/inflate"),o=t("./lib/zlib/constants"),f={};n(f,s,a,o),r.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,r,i){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),f=t("./zlib/zstream"),m=Object.prototype.toString,d=0,y=4,p=0,E=1,v=2,u=-1,c=0,g=8;function _(I){if(!(this instanceof _))return new _(I);this.options=s.assign({level:u,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},I||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var C=n.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(C!==p)throw new Error(o[C]);if(R.header&&n.deflateSetHeader(this.strm,R.header),R.dictionary){var B;if(typeof R.dictionary=="string"?B=a.string2buf(R.dictionary):m.call(R.dictionary)==="[object ArrayBuffer]"?B=new Uint8Array(R.dictionary):B=R.dictionary,C=n.deflateSetDictionary(this.strm,B),C!==p)throw new Error(o[C]);this._dict_set=!0}}_.prototype.push=function(I,R){var C=this.strm,B=this.options.chunkSize,Y,k;if(this.ended)return!1;k=R===~~R?R:R===!0?y:d,typeof I=="string"?C.input=a.string2buf(I):m.call(I)==="[object ArrayBuffer]"?C.input=new Uint8Array(I):C.input=I,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new s.Buf8(B),C.next_out=0,C.avail_out=B),Y=n.deflate(C,k),Y!==E&&Y!==p)return this.onEnd(Y),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(k===y||k===v))&&(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(C.output,C.next_out))):this.onData(s.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&Y!==E);return k===y?(Y=n.deflateEnd(this.strm),this.onEnd(Y),this.ended=!0,Y===p):(k===v&&(this.onEnd(p),C.avail_out=0),!0)},_.prototype.onData=function(I){this.chunks.push(I)},_.prototype.onEnd=function(I){I===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg};function D(I,R){var C=new _(R);if(C.push(I,!0),C.err)throw C.msg||o[C.err];return C.result}function b(I,R){return R=R||{},R.raw=!0,D(I,R)}function S(I,R){return R=R||{},R.gzip=!0,D(I,R)}i.Deflate=_,i.deflate=D,i.deflateRaw=b,i.gzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,r,i){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),f=t("./zlib/messages"),m=t("./zlib/zstream"),d=t("./zlib/gzheader"),y=Object.prototype.toString;function p(u){if(!(this instanceof p))return new p(u);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},u||{});var c=this.options;c.raw&&c.windowBits>=0&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),c.windowBits>=0&&c.windowBits<16&&!(u&&u.windowBits)&&(c.windowBits+=32),c.windowBits>15&&c.windowBits<48&&(c.windowBits&15)===0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var g=n.inflateInit2(this.strm,c.windowBits);if(g!==o.Z_OK)throw new Error(f[g]);this.header=new d,n.inflateGetHeader(this.strm,this.header)}p.prototype.push=function(u,c){var g=this.strm,_=this.options.chunkSize,D=this.options.dictionary,b,S,I,R,C,B,Y=!1;if(this.ended)return!1;S=c===~~c?c:c===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof u=="string"?g.input=a.binstring2buf(u):y.call(u)==="[object ArrayBuffer]"?g.input=new Uint8Array(u):g.input=u,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new s.Buf8(_),g.next_out=0,g.avail_out=_),b=n.inflate(g,o.Z_NO_FLUSH),b===o.Z_NEED_DICT&&D&&(typeof D=="string"?B=a.string2buf(D):y.call(D)==="[object ArrayBuffer]"?B=new Uint8Array(D):B=D,b=n.inflateSetDictionary(this.strm,B)),b===o.Z_BUF_ERROR&&Y===!0&&(b=o.Z_OK,Y=!1),b!==o.Z_STREAM_END&&b!==o.Z_OK)return this.onEnd(b),this.ended=!0,!1;g.next_out&&(g.avail_out===0||b===o.Z_STREAM_END||g.avail_in===0&&(S===o.Z_FINISH||S===o.Z_SYNC_FLUSH))&&(this.options.to==="string"?(I=a.utf8border(g.output,g.next_out),R=g.next_out-I,C=a.buf2string(g.output,I),g.next_out=R,g.avail_out=_-R,R&&s.arraySet(g.output,g.output,I,R,0),this.onData(C)):this.onData(s.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(Y=!0)}while((g.avail_in>0||g.avail_out===0)&&b!==o.Z_STREAM_END);return b===o.Z_STREAM_END&&(S=o.Z_FINISH),S===o.Z_FINISH?(b=n.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===o.Z_OK):(S===o.Z_SYNC_FLUSH&&(this.onEnd(o.Z_OK),g.avail_out=0),!0)},p.prototype.onData=function(u){this.chunks.push(u)},p.prototype.onEnd=function(u){u===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg};function E(u,c){var g=new p(c);if(g.push(u,!0),g.err)throw g.msg||f[g.err];return g.result}function v(u,c){return c=c||{},c.raw=!0,E(u,c)}i.Inflate=p,i.inflate=E,i.inflateRaw=v,i.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,r,i){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(o){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var d in m)m.hasOwnProperty(d)&&(o[d]=m[d])}}return o},i.shrinkBuf=function(o,f){return o.length===f?o:o.subarray?o.subarray(0,f):(o.length=f,o)};var s={arraySet:function(o,f,m,d,y){if(f.subarray&&o.subarray){o.set(f.subarray(m,m+d),y);return}for(var p=0;p<d;p++)o[y+p]=f[m+p]},flattenChunks:function(o){var f,m,d,y,p,E;for(d=0,f=0,m=o.length;f<m;f++)d+=o[f].length;for(E=new Uint8Array(d),y=0,f=0,m=o.length;f<m;f++)p=o[f],E.set(p,y),y+=p.length;return E}},a={arraySet:function(o,f,m,d,y){for(var p=0;p<d;p++)o[y+p]=f[m+p]},flattenChunks:function(o){return[].concat.apply([],o)}};i.setTyped=function(o){o?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(n)},{}],42:[function(t,r,i){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var o=new n.Buf8(256),f=0;f<256;f++)o[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;o[254]=o[254]=1,i.string2buf=function(d){var y,p,E,v,u,c=d.length,g=0;for(v=0;v<c;v++)p=d.charCodeAt(v),(p&64512)===55296&&v+1<c&&(E=d.charCodeAt(v+1),(E&64512)===56320&&(p=65536+(p-55296<<10)+(E-56320),v++)),g+=p<128?1:p<2048?2:p<65536?3:4;for(y=new n.Buf8(g),u=0,v=0;u<g;v++)p=d.charCodeAt(v),(p&64512)===55296&&v+1<c&&(E=d.charCodeAt(v+1),(E&64512)===56320&&(p=65536+(p-55296<<10)+(E-56320),v++)),p<128?y[u++]=p:p<2048?(y[u++]=192|p>>>6,y[u++]=128|p&63):p<65536?(y[u++]=224|p>>>12,y[u++]=128|p>>>6&63,y[u++]=128|p&63):(y[u++]=240|p>>>18,y[u++]=128|p>>>12&63,y[u++]=128|p>>>6&63,y[u++]=128|p&63);return y};function m(d,y){if(y<65537&&(d.subarray&&a||!d.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(d,y));for(var p="",E=0;E<y;E++)p+=String.fromCharCode(d[E]);return p}i.buf2binstring=function(d){return m(d,d.length)},i.binstring2buf=function(d){for(var y=new n.Buf8(d.length),p=0,E=y.length;p<E;p++)y[p]=d.charCodeAt(p);return y},i.buf2string=function(d,y){var p,E,v,u,c=y||d.length,g=new Array(c*2);for(E=0,p=0;p<c;){if(v=d[p++],v<128){g[E++]=v;continue}if(u=o[v],u>4){g[E++]=65533,p+=u-1;continue}for(v&=u===2?31:u===3?15:7;u>1&&p<c;)v=v<<6|d[p++]&63,u--;if(u>1){g[E++]=65533;continue}v<65536?g[E++]=v:(v-=65536,g[E++]=55296|v>>10&1023,g[E++]=56320|v&1023)}return m(g,E)},i.utf8border=function(d,y){var p;for(y=y||d.length,y>d.length&&(y=d.length),p=y-1;p>=0&&(d[p]&192)===128;)p--;return p<0||p===0?y:p+o[d[p]]>y?p:y}},{"./common":41}],43:[function(t,r,i){function n(s,a,o,f){for(var m=s&65535|0,d=s>>>16&65535|0,y=0;o!==0;){y=o>2e3?2e3:o,o-=y;do m=m+a[f++]|0,d=d+m|0;while(--y);m%=65521,d%=65521}return m|d<<16|0}r.exports=n},{}],44:[function(t,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,r,i){function n(){for(var o,f=[],m=0;m<256;m++){o=m;for(var d=0;d<8;d++)o=o&1?3988292384^o>>>1:o>>>1;f[m]=o}return f}var s=n();function a(o,f,m,d){var y=s,p=d+m;o^=-1;for(var E=d;E<p;E++)o=o>>>8^y[(o^f[E])&255];return o^-1}r.exports=a},{}],46:[function(t,r,i){var n=t("../utils/common"),s=t("./trees"),a=t("./adler32"),o=t("./crc32"),f=t("./messages"),m=0,d=1,y=3,p=4,E=5,v=0,u=1,c=-2,g=-3,_=-5,D=-1,b=1,S=2,I=3,R=4,C=0,B=2,Y=8,k=9,M=15,x=8,V=29,ce=256,$=ce+1+V,ae=30,re=19,be=2*$+1,W=15,H=3,_e=258,fe=_e+H+1,pe=32,ze=42,Pe=69,xe=73,Oe=91,Ue=103,Ne=113,Fe=666,Le=1,w=2,oe=3,ie=4,F=3;function z(h,q){return h.msg=f[q],q}function X(h){return(h<<1)-(h>4?9:0)}function he(h){for(var q=h.length;--q>=0;)h[q]=0}function se(h){var q=h.state,Q=q.pending;Q>h.avail_out&&(Q=h.avail_out),Q!==0&&(n.arraySet(h.output,q.pending_buf,q.pending_out,Q,h.next_out),h.next_out+=Q,q.pending_out+=Q,h.total_out+=Q,h.avail_out-=Q,q.pending-=Q,q.pending===0&&(q.pending_out=0))}function K(h,q){s._tr_flush_block(h,h.block_start>=0?h.block_start:-1,h.strstart-h.block_start,q),h.block_start=h.strstart,se(h.strm)}function ue(h,q){h.pending_buf[h.pending++]=q}function Ae(h,q){h.pending_buf[h.pending++]=q>>>8&255,h.pending_buf[h.pending++]=q&255}function ye(h,q,Q,T){var j=h.avail_in;return j>T&&(j=T),j===0?0:(h.avail_in-=j,n.arraySet(q,h.input,h.next_in,j,Q),h.state.wrap===1?h.adler=a(h.adler,q,j,Q):h.state.wrap===2&&(h.adler=o(h.adler,q,j,Q)),h.next_in+=j,h.total_in+=j,j)}function Re(h,q){var Q=h.max_chain_length,T=h.strstart,j,ne,Ie=h.prev_length,De=h.nice_match,ke=h.strstart>h.w_size-fe?h.strstart-(h.w_size-fe):0,je=h.window,lt=h.w_mask,Ve=h.prev,He=h.strstart+_e,Qe=je[T+Ie-1],Ge=je[T+Ie];h.prev_length>=h.good_match&&(Q>>=2),De>h.lookahead&&(De=h.lookahead);do if(j=q,!(je[j+Ie]!==Ge||je[j+Ie-1]!==Qe||je[j]!==je[T]||je[++j]!==je[T+1])){T+=2,j++;do;while(je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&je[++T]===je[++j]&&T<He);if(ne=_e-(He-T),T=He-_e,ne>Ie){if(h.match_start=q,Ie=ne,ne>=De)break;Qe=je[T+Ie-1],Ge=je[T+Ie]}}while((q=Ve[q&lt])>ke&&--Q!==0);return Ie<=h.lookahead?Ie:h.lookahead}function Me(h){var q=h.w_size,Q,T,j,ne,Ie;do{if(ne=h.window_size-h.lookahead-h.strstart,h.strstart>=q+(q-fe)){n.arraySet(h.window,h.window,q,q,0),h.match_start-=q,h.strstart-=q,h.block_start-=q,T=h.hash_size,Q=T;do j=h.head[--Q],h.head[Q]=j>=q?j-q:0;while(--T);T=q,Q=T;do j=h.prev[--Q],h.prev[Q]=j>=q?j-q:0;while(--T);ne+=q}if(h.strm.avail_in===0)break;if(T=ye(h.strm,h.window,h.strstart+h.lookahead,ne),h.lookahead+=T,h.lookahead+h.insert>=H)for(Ie=h.strstart-h.insert,h.ins_h=h.window[Ie],h.ins_h=(h.ins_h<<h.hash_shift^h.window[Ie+1])&h.hash_mask;h.insert&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[Ie+H-1])&h.hash_mask,h.prev[Ie&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=Ie,Ie++,h.insert--,!(h.lookahead+h.insert<H)););}while(h.lookahead<fe&&h.strm.avail_in!==0)}function qe(h,q){var Q=65535;for(Q>h.pending_buf_size-5&&(Q=h.pending_buf_size-5);;){if(h.lookahead<=1){if(Me(h),h.lookahead===0&&q===m)return Le;if(h.lookahead===0)break}h.strstart+=h.lookahead,h.lookahead=0;var T=h.block_start+Q;if((h.strstart===0||h.strstart>=T)&&(h.lookahead=h.strstart-T,h.strstart=T,K(h,!1),h.strm.avail_out===0)||h.strstart-h.block_start>=h.w_size-fe&&(K(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===p?(K(h,!0),h.strm.avail_out===0?oe:ie):(h.strstart>h.block_start&&(K(h,!1),h.strm.avail_out===0),Le)}function $e(h,q){for(var Q,T;;){if(h.lookahead<fe){if(Me(h),h.lookahead<fe&&q===m)return Le;if(h.lookahead===0)break}if(Q=0,h.lookahead>=H&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+H-1])&h.hash_mask,Q=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),Q!==0&&h.strstart-Q<=h.w_size-fe&&(h.match_length=Re(h,Q)),h.match_length>=H)if(T=s._tr_tally(h,h.strstart-h.match_start,h.match_length-H),h.lookahead-=h.match_length,h.match_length<=h.max_lazy_match&&h.lookahead>=H){h.match_length--;do h.strstart++,h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+H-1])&h.hash_mask,Q=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart;while(--h.match_length!==0);h.strstart++}else h.strstart+=h.match_length,h.match_length=0,h.ins_h=h.window[h.strstart],h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+1])&h.hash_mask;else T=s._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++;if(T&&(K(h,!1),h.strm.avail_out===0))return Le}return h.insert=h.strstart<H-1?h.strstart:H-1,q===p?(K(h,!0),h.strm.avail_out===0?oe:ie):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?Le:w}function rt(h,q){for(var Q,T,j;;){if(h.lookahead<fe){if(Me(h),h.lookahead<fe&&q===m)return Le;if(h.lookahead===0)break}if(Q=0,h.lookahead>=H&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+H-1])&h.hash_mask,Q=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart),h.prev_length=h.match_length,h.prev_match=h.match_start,h.match_length=H-1,Q!==0&&h.prev_length<h.max_lazy_match&&h.strstart-Q<=h.w_size-fe&&(h.match_length=Re(h,Q),h.match_length<=5&&(h.strategy===b||h.match_length===H&&h.strstart-h.match_start>4096)&&(h.match_length=H-1)),h.prev_length>=H&&h.match_length<=h.prev_length){j=h.strstart+h.lookahead-H,T=s._tr_tally(h,h.strstart-1-h.prev_match,h.prev_length-H),h.lookahead-=h.prev_length-1,h.prev_length-=2;do++h.strstart<=j&&(h.ins_h=(h.ins_h<<h.hash_shift^h.window[h.strstart+H-1])&h.hash_mask,Q=h.prev[h.strstart&h.w_mask]=h.head[h.ins_h],h.head[h.ins_h]=h.strstart);while(--h.prev_length!==0);if(h.match_available=0,h.match_length=H-1,h.strstart++,T&&(K(h,!1),h.strm.avail_out===0))return Le}else if(h.match_available){if(T=s._tr_tally(h,0,h.window[h.strstart-1]),T&&K(h,!1),h.strstart++,h.lookahead--,h.strm.avail_out===0)return Le}else h.match_available=1,h.strstart++,h.lookahead--}return h.match_available&&(T=s._tr_tally(h,0,h.window[h.strstart-1]),h.match_available=0),h.insert=h.strstart<H-1?h.strstart:H-1,q===p?(K(h,!0),h.strm.avail_out===0?oe:ie):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?Le:w}function tt(h,q){for(var Q,T,j,ne,Ie=h.window;;){if(h.lookahead<=_e){if(Me(h),h.lookahead<=_e&&q===m)return Le;if(h.lookahead===0)break}if(h.match_length=0,h.lookahead>=H&&h.strstart>0&&(j=h.strstart-1,T=Ie[j],T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j])){ne=h.strstart+_e;do;while(T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&T===Ie[++j]&&j<ne);h.match_length=_e-(ne-j),h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=H?(Q=s._tr_tally(h,1,h.match_length-H),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(Q=s._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),Q&&(K(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===p?(K(h,!0),h.strm.avail_out===0?oe:ie):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?Le:w}function at(h,q){for(var Q;;){if(h.lookahead===0&&(Me(h),h.lookahead===0)){if(q===m)return Le;break}if(h.match_length=0,Q=s._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,Q&&(K(h,!1),h.strm.avail_out===0))return Le}return h.insert=0,q===p?(K(h,!0),h.strm.avail_out===0?oe:ie):h.last_lit&&(K(h,!1),h.strm.avail_out===0)?Le:w}function We(h,q,Q,T,j){this.good_length=h,this.max_lazy=q,this.nice_length=Q,this.max_chain=T,this.func=j}var it;it=[new We(0,0,0,0,qe),new We(4,4,8,4,$e),new We(4,5,16,8,$e),new We(4,6,32,32,$e),new We(4,4,16,16,rt),new We(8,16,32,32,rt),new We(8,16,128,128,rt),new We(8,32,128,256,rt),new We(32,128,258,1024,rt),new We(32,258,258,4096,rt)];function pt(h){h.window_size=2*h.w_size,he(h.head),h.max_lazy_match=it[h.level].max_lazy,h.good_match=it[h.level].good_length,h.nice_match=it[h.level].nice_length,h.max_chain_length=it[h.level].max_chain,h.strstart=0,h.block_start=0,h.lookahead=0,h.insert=0,h.match_length=h.prev_length=H-1,h.match_available=0,h.ins_h=0}function L(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(be*2),this.dyn_dtree=new n.Buf16((2*ae+1)*2),this.bl_tree=new n.Buf16((2*re+1)*2),he(this.dyn_ltree),he(this.dyn_dtree),he(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(W+1),this.heap=new n.Buf16(2*$+1),he(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(2*$+1),he(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(h){var q;return!h||!h.state?z(h,c):(h.total_in=h.total_out=0,h.data_type=B,q=h.state,q.pending=0,q.pending_out=0,q.wrap<0&&(q.wrap=-q.wrap),q.status=q.wrap?ze:Ne,h.adler=q.wrap===2?0:1,q.last_flush=m,s._tr_init(q),v)}function ge(h){var q=me(h);return q===v&&pt(h.state),q}function Te(h,q){return!h||!h.state||h.state.wrap!==2?c:(h.state.gzhead=q,v)}function G(h,q,Q,T,j,ne){if(!h)return c;var Ie=1;if(q===D&&(q=6),T<0?(Ie=0,T=-T):T>15&&(Ie=2,T-=16),j<1||j>k||Q!==Y||T<8||T>15||q<0||q>9||ne<0||ne>R)return z(h,c);T===8&&(T=9);var De=new L;return h.state=De,De.strm=h,De.wrap=Ie,De.gzhead=null,De.w_bits=T,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=j+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+H-1)/H),De.window=new n.Buf8(De.w_size*2),De.head=new n.Buf16(De.hash_size),De.prev=new n.Buf16(De.w_size),De.lit_bufsize=1<<j+6,De.pending_buf_size=De.lit_bufsize*4,De.pending_buf=new n.Buf8(De.pending_buf_size),De.d_buf=1*De.lit_bufsize,De.l_buf=3*De.lit_bufsize,De.level=q,De.strategy=ne,De.method=Q,ge(h)}function le(h,q){return G(h,q,Y,M,x,C)}function l(h,q){var Q,T,j,ne;if(!h||!h.state||q>E||q<0)return h?z(h,c):c;if(T=h.state,!h.output||!h.input&&h.avail_in!==0||T.status===Fe&&q!==p)return z(h,h.avail_out===0?_:c);if(T.strm=h,Q=T.last_flush,T.last_flush=q,T.status===ze)if(T.wrap===2)h.adler=0,ue(T,31),ue(T,139),ue(T,8),T.gzhead?(ue(T,(T.gzhead.text?1:0)+(T.gzhead.hcrc?2:0)+(T.gzhead.extra?4:0)+(T.gzhead.name?8:0)+(T.gzhead.comment?16:0)),ue(T,T.gzhead.time&255),ue(T,T.gzhead.time>>8&255),ue(T,T.gzhead.time>>16&255),ue(T,T.gzhead.time>>24&255),ue(T,T.level===9?2:T.strategy>=S||T.level<2?4:0),ue(T,T.gzhead.os&255),T.gzhead.extra&&T.gzhead.extra.length&&(ue(T,T.gzhead.extra.length&255),ue(T,T.gzhead.extra.length>>8&255)),T.gzhead.hcrc&&(h.adler=o(h.adler,T.pending_buf,T.pending,0)),T.gzindex=0,T.status=Pe):(ue(T,0),ue(T,0),ue(T,0),ue(T,0),ue(T,0),ue(T,T.level===9?2:T.strategy>=S||T.level<2?4:0),ue(T,F),T.status=Ne);else{var Ie=Y+(T.w_bits-8<<4)<<8,De=-1;T.strategy>=S||T.level<2?De=0:T.level<6?De=1:T.level===6?De=2:De=3,Ie|=De<<6,T.strstart!==0&&(Ie|=pe),Ie+=31-Ie%31,T.status=Ne,Ae(T,Ie),T.strstart!==0&&(Ae(T,h.adler>>>16),Ae(T,h.adler&65535)),h.adler=1}if(T.status===Pe)if(T.gzhead.extra){for(j=T.pending;T.gzindex<(T.gzhead.extra.length&65535)&&!(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),se(h),j=T.pending,T.pending===T.pending_buf_size));)ue(T,T.gzhead.extra[T.gzindex]&255),T.gzindex++;T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),T.gzindex===T.gzhead.extra.length&&(T.gzindex=0,T.status=xe)}else T.status=xe;if(T.status===xe)if(T.gzhead.name){j=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),se(h),j=T.pending,T.pending===T.pending_buf_size)){ne=1;break}T.gzindex<T.gzhead.name.length?ne=T.gzhead.name.charCodeAt(T.gzindex++)&255:ne=0,ue(T,ne)}while(ne!==0);T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),ne===0&&(T.gzindex=0,T.status=Oe)}else T.status=Oe;if(T.status===Oe)if(T.gzhead.comment){j=T.pending;do{if(T.pending===T.pending_buf_size&&(T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),se(h),j=T.pending,T.pending===T.pending_buf_size)){ne=1;break}T.gzindex<T.gzhead.comment.length?ne=T.gzhead.comment.charCodeAt(T.gzindex++)&255:ne=0,ue(T,ne)}while(ne!==0);T.gzhead.hcrc&&T.pending>j&&(h.adler=o(h.adler,T.pending_buf,T.pending-j,j)),ne===0&&(T.status=Ue)}else T.status=Ue;if(T.status===Ue&&(T.gzhead.hcrc?(T.pending+2>T.pending_buf_size&&se(h),T.pending+2<=T.pending_buf_size&&(ue(T,h.adler&255),ue(T,h.adler>>8&255),h.adler=0,T.status=Ne)):T.status=Ne),T.pending!==0){if(se(h),h.avail_out===0)return T.last_flush=-1,v}else if(h.avail_in===0&&X(q)<=X(Q)&&q!==p)return z(h,_);if(T.status===Fe&&h.avail_in!==0)return z(h,_);if(h.avail_in!==0||T.lookahead!==0||q!==m&&T.status!==Fe){var ke=T.strategy===S?at(T,q):T.strategy===I?tt(T,q):it[T.level].func(T,q);if((ke===oe||ke===ie)&&(T.status=Fe),ke===Le||ke===oe)return h.avail_out===0&&(T.last_flush=-1),v;if(ke===w&&(q===d?s._tr_align(T):q!==E&&(s._tr_stored_block(T,0,0,!1),q===y&&(he(T.head),T.lookahead===0&&(T.strstart=0,T.block_start=0,T.insert=0))),se(h),h.avail_out===0))return T.last_flush=-1,v}return q!==p?v:T.wrap<=0?u:(T.wrap===2?(ue(T,h.adler&255),ue(T,h.adler>>8&255),ue(T,h.adler>>16&255),ue(T,h.adler>>24&255),ue(T,h.total_in&255),ue(T,h.total_in>>8&255),ue(T,h.total_in>>16&255),ue(T,h.total_in>>24&255)):(Ae(T,h.adler>>>16),Ae(T,h.adler&65535)),se(h),T.wrap>0&&(T.wrap=-T.wrap),T.pending!==0?v:u)}function A(h){var q;return!h||!h.state?c:(q=h.state.status,q!==ze&&q!==Pe&&q!==xe&&q!==Oe&&q!==Ue&&q!==Ne&&q!==Fe?z(h,c):(h.state=null,q===Ne?z(h,g):v))}function U(h,q){var Q=q.length,T,j,ne,Ie,De,ke,je,lt;if(!h||!h.state||(T=h.state,Ie=T.wrap,Ie===2||Ie===1&&T.status!==ze||T.lookahead))return c;for(Ie===1&&(h.adler=a(h.adler,q,Q,0)),T.wrap=0,Q>=T.w_size&&(Ie===0&&(he(T.head),T.strstart=0,T.block_start=0,T.insert=0),lt=new n.Buf8(T.w_size),n.arraySet(lt,q,Q-T.w_size,T.w_size,0),q=lt,Q=T.w_size),De=h.avail_in,ke=h.next_in,je=h.input,h.avail_in=Q,h.next_in=0,h.input=q,Me(T);T.lookahead>=H;){j=T.strstart,ne=T.lookahead-(H-1);do T.ins_h=(T.ins_h<<T.hash_shift^T.window[j+H-1])&T.hash_mask,T.prev[j&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=j,j++;while(--ne);T.strstart=j,T.lookahead=H-1,Me(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=H-1,T.match_available=0,h.next_in=ke,h.input=je,h.avail_in=De,T.wrap=Ie,v}i.deflateInit=le,i.deflateInit2=G,i.deflateReset=ge,i.deflateResetKeep=me,i.deflateSetHeader=Te,i.deflate=l,i.deflateEnd=A,i.deflateSetDictionary=U,i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,r,i){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}r.exports=n},{}],48:[function(t,r,i){var n=30,s=12;r.exports=function(o,f){var m,d,y,p,E,v,u,c,g,_,D,b,S,I,R,C,B,Y,k,M,x,V,ce,$,ae;m=o.state,d=o.next_in,$=o.input,y=d+(o.avail_in-5),p=o.next_out,ae=o.output,E=p-(f-o.avail_out),v=p+(o.avail_out-257),u=m.dmax,c=m.wsize,g=m.whave,_=m.wnext,D=m.window,b=m.hold,S=m.bits,I=m.lencode,R=m.distcode,C=(1<<m.lenbits)-1,B=(1<<m.distbits)-1;e:do{S<15&&(b+=$[d++]<<S,S+=8,b+=$[d++]<<S,S+=8),Y=I[b&C];t:for(;;){if(k=Y>>>24,b>>>=k,S-=k,k=Y>>>16&255,k===0)ae[p++]=Y&65535;else if(k&16){M=Y&65535,k&=15,k&&(S<k&&(b+=$[d++]<<S,S+=8),M+=b&(1<<k)-1,b>>>=k,S-=k),S<15&&(b+=$[d++]<<S,S+=8,b+=$[d++]<<S,S+=8),Y=R[b&B];r:for(;;){if(k=Y>>>24,b>>>=k,S-=k,k=Y>>>16&255,k&16){if(x=Y&65535,k&=15,S<k&&(b+=$[d++]<<S,S+=8,S<k&&(b+=$[d++]<<S,S+=8)),x+=b&(1<<k)-1,x>u){o.msg="invalid distance too far back",m.mode=n;break e}if(b>>>=k,S-=k,k=p-E,x>k){if(k=x-k,k>g&&m.sane){o.msg="invalid distance too far back",m.mode=n;break e}if(V=0,ce=D,_===0){if(V+=c-k,k<M){M-=k;do ae[p++]=D[V++];while(--k);V=p-x,ce=ae}}else if(_<k){if(V+=c+_-k,k-=_,k<M){M-=k;do ae[p++]=D[V++];while(--k);if(V=0,_<M){k=_,M-=k;do ae[p++]=D[V++];while(--k);V=p-x,ce=ae}}}else if(V+=_-k,k<M){M-=k;do ae[p++]=D[V++];while(--k);V=p-x,ce=ae}for(;M>2;)ae[p++]=ce[V++],ae[p++]=ce[V++],ae[p++]=ce[V++],M-=3;M&&(ae[p++]=ce[V++],M>1&&(ae[p++]=ce[V++]))}else{V=p-x;do ae[p++]=ae[V++],ae[p++]=ae[V++],ae[p++]=ae[V++],M-=3;while(M>2);M&&(ae[p++]=ae[V++],M>1&&(ae[p++]=ae[V++]))}}else if((k&64)===0){Y=R[(Y&65535)+(b&(1<<k)-1)];continue r}else{o.msg="invalid distance code",m.mode=n;break e}break}}else if((k&64)===0){Y=I[(Y&65535)+(b&(1<<k)-1)];continue t}else if(k&32){m.mode=s;break e}else{o.msg="invalid literal/length code",m.mode=n;break e}break}}while(d<y&&p<v);M=S>>3,d-=M,S-=M<<3,b&=(1<<S)-1,o.next_in=d,o.next_out=p,o.avail_in=d<y?5+(y-d):5-(d-y),o.avail_out=p<v?257+(v-p):257-(p-v),m.hold=b,m.bits=S}},{}],49:[function(t,r,i){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),o=t("./inffast"),f=t("./inftrees"),m=0,d=1,y=2,p=4,E=5,v=6,u=0,c=1,g=2,_=-2,D=-3,b=-4,S=-5,I=8,R=1,C=2,B=3,Y=4,k=5,M=6,x=7,V=8,ce=9,$=10,ae=11,re=12,be=13,W=14,H=15,_e=16,fe=17,pe=18,ze=19,Pe=20,xe=21,Oe=22,Ue=23,Ne=24,Fe=25,Le=26,w=27,oe=28,ie=29,F=30,z=31,X=32,he=852,se=592,K=15,ue=K;function Ae(G){return(G>>>24&255)+(G>>>8&65280)+((G&65280)<<8)+((G&255)<<24)}function ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Re(G){var le;return!G||!G.state?_:(le=G.state,G.total_in=G.total_out=le.total=0,G.msg="",le.wrap&&(G.adler=le.wrap&1),le.mode=R,le.last=0,le.havedict=0,le.dmax=32768,le.head=null,le.hold=0,le.bits=0,le.lencode=le.lendyn=new n.Buf32(he),le.distcode=le.distdyn=new n.Buf32(se),le.sane=1,le.back=-1,u)}function Me(G){var le;return!G||!G.state?_:(le=G.state,le.wsize=0,le.whave=0,le.wnext=0,Re(G))}function qe(G,le){var l,A;return!G||!G.state||(A=G.state,le<0?(l=0,le=-le):(l=(le>>4)+1,le<48&&(le&=15)),le&&(le<8||le>15))?_:(A.window!==null&&A.wbits!==le&&(A.window=null),A.wrap=l,A.wbits=le,Me(G))}function $e(G,le){var l,A;return G?(A=new ye,G.state=A,A.window=null,l=qe(G,le),l!==u&&(G.state=null),l):_}function rt(G){return $e(G,ue)}var tt=!0,at,We;function it(G){if(tt){var le;for(at=new n.Buf32(512),We=new n.Buf32(32),le=0;le<144;)G.lens[le++]=8;for(;le<256;)G.lens[le++]=9;for(;le<280;)G.lens[le++]=7;for(;le<288;)G.lens[le++]=8;for(f(d,G.lens,0,288,at,0,G.work,{bits:9}),le=0;le<32;)G.lens[le++]=5;f(y,G.lens,0,32,We,0,G.work,{bits:5}),tt=!1}G.lencode=at,G.lenbits=9,G.distcode=We,G.distbits=5}function pt(G,le,l,A){var U,h=G.state;return h.window===null&&(h.wsize=1<<h.wbits,h.wnext=0,h.whave=0,h.window=new n.Buf8(h.wsize)),A>=h.wsize?(n.arraySet(h.window,le,l-h.wsize,h.wsize,0),h.wnext=0,h.whave=h.wsize):(U=h.wsize-h.wnext,U>A&&(U=A),n.arraySet(h.window,le,l-A,U,h.wnext),A-=U,A?(n.arraySet(h.window,le,l-A,A,0),h.wnext=A,h.whave=h.wsize):(h.wnext+=U,h.wnext===h.wsize&&(h.wnext=0),h.whave<h.wsize&&(h.whave+=U))),0}function L(G,le){var l,A,U,h,q,Q,T,j,ne,Ie,De,ke,je,lt,Ve=0,He,Qe,Ge,ht,gt,St,nt,mt,ft=new n.Buf8(4),wt,vt,$t=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!G||!G.state||!G.output||!G.input&&G.avail_in!==0)return _;l=G.state,l.mode===re&&(l.mode=be),q=G.next_out,U=G.output,T=G.avail_out,h=G.next_in,A=G.input,Q=G.avail_in,j=l.hold,ne=l.bits,Ie=Q,De=T,mt=u;e:for(;;)switch(l.mode){case R:if(l.wrap===0){l.mode=be;break}for(;ne<16;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(l.wrap&2&&j===35615){l.check=0,ft[0]=j&255,ft[1]=j>>>8&255,l.check=a(l.check,ft,2,0),j=0,ne=0,l.mode=C;break}if(l.flags=0,l.head&&(l.head.done=!1),!(l.wrap&1)||(((j&255)<<8)+(j>>8))%31){G.msg="incorrect header check",l.mode=F;break}if((j&15)!==I){G.msg="unknown compression method",l.mode=F;break}if(j>>>=4,ne-=4,nt=(j&15)+8,l.wbits===0)l.wbits=nt;else if(nt>l.wbits){G.msg="invalid window size",l.mode=F;break}l.dmax=1<<nt,G.adler=l.check=1,l.mode=j&512?$:re,j=0,ne=0;break;case C:for(;ne<16;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(l.flags=j,(l.flags&255)!==I){G.msg="unknown compression method",l.mode=F;break}if(l.flags&57344){G.msg="unknown header flags set",l.mode=F;break}l.head&&(l.head.text=j>>8&1),l.flags&512&&(ft[0]=j&255,ft[1]=j>>>8&255,l.check=a(l.check,ft,2,0)),j=0,ne=0,l.mode=B;case B:for(;ne<32;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.head&&(l.head.time=j),l.flags&512&&(ft[0]=j&255,ft[1]=j>>>8&255,ft[2]=j>>>16&255,ft[3]=j>>>24&255,l.check=a(l.check,ft,4,0)),j=0,ne=0,l.mode=Y;case Y:for(;ne<16;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.head&&(l.head.xflags=j&255,l.head.os=j>>8),l.flags&512&&(ft[0]=j&255,ft[1]=j>>>8&255,l.check=a(l.check,ft,2,0)),j=0,ne=0,l.mode=k;case k:if(l.flags&1024){for(;ne<16;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.length=j,l.head&&(l.head.extra_len=j),l.flags&512&&(ft[0]=j&255,ft[1]=j>>>8&255,l.check=a(l.check,ft,2,0)),j=0,ne=0}else l.head&&(l.head.extra=null);l.mode=M;case M:if(l.flags&1024&&(ke=l.length,ke>Q&&(ke=Q),ke&&(l.head&&(nt=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),n.arraySet(l.head.extra,A,h,ke,nt)),l.flags&512&&(l.check=a(l.check,A,ke,h)),Q-=ke,h+=ke,l.length-=ke),l.length))break e;l.length=0,l.mode=x;case x:if(l.flags&2048){if(Q===0)break e;ke=0;do nt=A[h+ke++],l.head&&nt&&l.length<65536&&(l.head.name+=String.fromCharCode(nt));while(nt&&ke<Q);if(l.flags&512&&(l.check=a(l.check,A,ke,h)),Q-=ke,h+=ke,nt)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=V;case V:if(l.flags&4096){if(Q===0)break e;ke=0;do nt=A[h+ke++],l.head&&nt&&l.length<65536&&(l.head.comment+=String.fromCharCode(nt));while(nt&&ke<Q);if(l.flags&512&&(l.check=a(l.check,A,ke,h)),Q-=ke,h+=ke,nt)break e}else l.head&&(l.head.comment=null);l.mode=ce;case ce:if(l.flags&512){for(;ne<16;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(j!==(l.check&65535)){G.msg="header crc mismatch",l.mode=F;break}j=0,ne=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),G.adler=l.check=0,l.mode=re;break;case $:for(;ne<32;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}G.adler=l.check=Ae(j),j=0,ne=0,l.mode=ae;case ae:if(l.havedict===0)return G.next_out=q,G.avail_out=T,G.next_in=h,G.avail_in=Q,l.hold=j,l.bits=ne,g;G.adler=l.check=1,l.mode=re;case re:if(le===E||le===v)break e;case be:if(l.last){j>>>=ne&7,ne-=ne&7,l.mode=w;break}for(;ne<3;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}switch(l.last=j&1,j>>>=1,ne-=1,j&3){case 0:l.mode=W;break;case 1:if(it(l),l.mode=Pe,le===v){j>>>=2,ne-=2;break e}break;case 2:l.mode=fe;break;case 3:G.msg="invalid block type",l.mode=F}j>>>=2,ne-=2;break;case W:for(j>>>=ne&7,ne-=ne&7;ne<32;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if((j&65535)!==(j>>>16^65535)){G.msg="invalid stored block lengths",l.mode=F;break}if(l.length=j&65535,j=0,ne=0,l.mode=H,le===v)break e;case H:l.mode=_e;case _e:if(ke=l.length,ke){if(ke>Q&&(ke=Q),ke>T&&(ke=T),ke===0)break e;n.arraySet(U,A,h,ke,q),Q-=ke,h+=ke,T-=ke,q+=ke,l.length-=ke;break}l.mode=re;break;case fe:for(;ne<14;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(l.nlen=(j&31)+257,j>>>=5,ne-=5,l.ndist=(j&31)+1,j>>>=5,ne-=5,l.ncode=(j&15)+4,j>>>=4,ne-=4,l.nlen>286||l.ndist>30){G.msg="too many length or distance symbols",l.mode=F;break}l.have=0,l.mode=pe;case pe:for(;l.have<l.ncode;){for(;ne<3;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.lens[$t[l.have++]]=j&7,j>>>=3,ne-=3}for(;l.have<19;)l.lens[$t[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,wt={bits:l.lenbits},mt=f(m,l.lens,0,19,l.lencode,0,l.work,wt),l.lenbits=wt.bits,mt){G.msg="invalid code lengths set",l.mode=F;break}l.have=0,l.mode=ze;case ze:for(;l.have<l.nlen+l.ndist;){for(;Ve=l.lencode[j&(1<<l.lenbits)-1],He=Ve>>>24,Qe=Ve>>>16&255,Ge=Ve&65535,!(He<=ne);){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(Ge<16)j>>>=He,ne-=He,l.lens[l.have++]=Ge;else{if(Ge===16){for(vt=He+2;ne<vt;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(j>>>=He,ne-=He,l.have===0){G.msg="invalid bit length repeat",l.mode=F;break}nt=l.lens[l.have-1],ke=3+(j&3),j>>>=2,ne-=2}else if(Ge===17){for(vt=He+3;ne<vt;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}j>>>=He,ne-=He,nt=0,ke=3+(j&7),j>>>=3,ne-=3}else{for(vt=He+7;ne<vt;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}j>>>=He,ne-=He,nt=0,ke=11+(j&127),j>>>=7,ne-=7}if(l.have+ke>l.nlen+l.ndist){G.msg="invalid bit length repeat",l.mode=F;break}for(;ke--;)l.lens[l.have++]=nt}}if(l.mode===F)break;if(l.lens[256]===0){G.msg="invalid code -- missing end-of-block",l.mode=F;break}if(l.lenbits=9,wt={bits:l.lenbits},mt=f(d,l.lens,0,l.nlen,l.lencode,0,l.work,wt),l.lenbits=wt.bits,mt){G.msg="invalid literal/lengths set",l.mode=F;break}if(l.distbits=6,l.distcode=l.distdyn,wt={bits:l.distbits},mt=f(y,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,wt),l.distbits=wt.bits,mt){G.msg="invalid distances set",l.mode=F;break}if(l.mode=Pe,le===v)break e;case Pe:l.mode=xe;case xe:if(Q>=6&&T>=258){G.next_out=q,G.avail_out=T,G.next_in=h,G.avail_in=Q,l.hold=j,l.bits=ne,o(G,De),q=G.next_out,U=G.output,T=G.avail_out,h=G.next_in,A=G.input,Q=G.avail_in,j=l.hold,ne=l.bits,l.mode===re&&(l.back=-1);break}for(l.back=0;Ve=l.lencode[j&(1<<l.lenbits)-1],He=Ve>>>24,Qe=Ve>>>16&255,Ge=Ve&65535,!(He<=ne);){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(Qe&&(Qe&240)===0){for(ht=He,gt=Qe,St=Ge;Ve=l.lencode[St+((j&(1<<ht+gt)-1)>>ht)],He=Ve>>>24,Qe=Ve>>>16&255,Ge=Ve&65535,!(ht+He<=ne);){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}j>>>=ht,ne-=ht,l.back+=ht}if(j>>>=He,ne-=He,l.back+=He,l.length=Ge,Qe===0){l.mode=Le;break}if(Qe&32){l.back=-1,l.mode=re;break}if(Qe&64){G.msg="invalid literal/length code",l.mode=F;break}l.extra=Qe&15,l.mode=Oe;case Oe:if(l.extra){for(vt=l.extra;ne<vt;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.length+=j&(1<<l.extra)-1,j>>>=l.extra,ne-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=Ue;case Ue:for(;Ve=l.distcode[j&(1<<l.distbits)-1],He=Ve>>>24,Qe=Ve>>>16&255,Ge=Ve&65535,!(He<=ne);){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if((Qe&240)===0){for(ht=He,gt=Qe,St=Ge;Ve=l.distcode[St+((j&(1<<ht+gt)-1)>>ht)],He=Ve>>>24,Qe=Ve>>>16&255,Ge=Ve&65535,!(ht+He<=ne);){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}j>>>=ht,ne-=ht,l.back+=ht}if(j>>>=He,ne-=He,l.back+=He,Qe&64){G.msg="invalid distance code",l.mode=F;break}l.offset=Ge,l.extra=Qe&15,l.mode=Ne;case Ne:if(l.extra){for(vt=l.extra;ne<vt;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}l.offset+=j&(1<<l.extra)-1,j>>>=l.extra,ne-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){G.msg="invalid distance too far back",l.mode=F;break}l.mode=Fe;case Fe:if(T===0)break e;if(ke=De-T,l.offset>ke){if(ke=l.offset-ke,ke>l.whave&&l.sane){G.msg="invalid distance too far back",l.mode=F;break}ke>l.wnext?(ke-=l.wnext,je=l.wsize-ke):je=l.wnext-ke,ke>l.length&&(ke=l.length),lt=l.window}else lt=U,je=q-l.offset,ke=l.length;ke>T&&(ke=T),T-=ke,l.length-=ke;do U[q++]=lt[je++];while(--ke);l.length===0&&(l.mode=xe);break;case Le:if(T===0)break e;U[q++]=l.length,T--,l.mode=xe;break;case w:if(l.wrap){for(;ne<32;){if(Q===0)break e;Q--,j|=A[h++]<<ne,ne+=8}if(De-=T,G.total_out+=De,l.total+=De,De&&(G.adler=l.check=l.flags?a(l.check,U,De,q-De):s(l.check,U,De,q-De)),De=T,(l.flags?j:Ae(j))!==l.check){G.msg="incorrect data check",l.mode=F;break}j=0,ne=0}l.mode=oe;case oe:if(l.wrap&&l.flags){for(;ne<32;){if(Q===0)break e;Q--,j+=A[h++]<<ne,ne+=8}if(j!==(l.total&4294967295)){G.msg="incorrect length check",l.mode=F;break}j=0,ne=0}l.mode=ie;case ie:mt=c;break e;case F:mt=D;break e;case z:return b;case X:default:return _}return G.next_out=q,G.avail_out=T,G.next_in=h,G.avail_in=Q,l.hold=j,l.bits=ne,(l.wsize||De!==G.avail_out&&l.mode<F&&(l.mode<w||le!==p))&&pt(G,G.output,G.next_out,De-G.avail_out),Ie-=G.avail_in,De-=G.avail_out,G.total_in+=Ie,G.total_out+=De,l.total+=De,l.wrap&&De&&(G.adler=l.check=l.flags?a(l.check,U,De,G.next_out-De):s(l.check,U,De,G.next_out-De)),G.data_type=l.bits+(l.last?64:0)+(l.mode===re?128:0)+(l.mode===Pe||l.mode===H?256:0),(Ie===0&&De===0||le===p)&&mt===u&&(mt=S),mt}function me(G){if(!G||!G.state)return _;var le=G.state;return le.window&&(le.window=null),G.state=null,u}function ge(G,le){var l;return!G||!G.state||(l=G.state,(l.wrap&2)===0)?_:(l.head=le,le.done=!1,u)}function Te(G,le){var l=le.length,A,U,h;return!G||!G.state||(A=G.state,A.wrap!==0&&A.mode!==ae)?_:A.mode===ae&&(U=1,U=s(U,le,l,0),U!==A.check)?D:(h=pt(G,le,l,l),h?(A.mode=z,b):(A.havedict=1,u))}i.inflateReset=Me,i.inflateReset2=qe,i.inflateResetKeep=Re,i.inflateInit=rt,i.inflateInit2=$e,i.inflate=L,i.inflateEnd=me,i.inflateGetHeader=ge,i.inflateSetDictionary=Te,i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,r,i){var n=t("../utils/common"),s=15,a=852,o=592,f=0,m=1,d=2,y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,g,_,D,b,S,I,R){var C=R.bits,B=0,Y=0,k=0,M=0,x=0,V=0,ce=0,$=0,ae=0,re=0,be,W,H,_e,fe,pe=null,ze=0,Pe,xe=new n.Buf16(s+1),Oe=new n.Buf16(s+1),Ue=null,Ne=0,Fe,Le,w;for(B=0;B<=s;B++)xe[B]=0;for(Y=0;Y<D;Y++)xe[g[_+Y]]++;for(x=C,M=s;M>=1&&xe[M]===0;M--);if(x>M&&(x=M),M===0)return b[S++]=1<<24|64<<16|0,b[S++]=1<<24|64<<16|0,R.bits=1,0;for(k=1;k<M&&xe[k]===0;k++);for(x<k&&(x=k),$=1,B=1;B<=s;B++)if($<<=1,$-=xe[B],$<0)return-1;if($>0&&(c===f||M!==1))return-1;for(Oe[1]=0,B=1;B<s;B++)Oe[B+1]=Oe[B]+xe[B];for(Y=0;Y<D;Y++)g[_+Y]!==0&&(I[Oe[g[_+Y]]++]=Y);if(c===f?(pe=Ue=I,Pe=19):c===m?(pe=y,ze-=257,Ue=p,Ne-=257,Pe=256):(pe=E,Ue=v,Pe=-1),re=0,Y=0,B=k,fe=S,V=x,ce=0,H=-1,ae=1<<x,_e=ae-1,c===m&&ae>a||c===d&&ae>o)return 1;for(;;){Fe=B-ce,I[Y]<Pe?(Le=0,w=I[Y]):I[Y]>Pe?(Le=Ue[Ne+I[Y]],w=pe[ze+I[Y]]):(Le=96,w=0),be=1<<B-ce,W=1<<V,k=W;do W-=be,b[fe+(re>>ce)+W]=Fe<<24|Le<<16|w|0;while(W!==0);for(be=1<<B-1;re&be;)be>>=1;if(be!==0?(re&=be-1,re+=be):re=0,Y++,--xe[B]===0){if(B===M)break;B=g[_+I[Y]]}if(B>x&&(re&_e)!==H){for(ce===0&&(ce=x),fe+=k,V=B-ce,$=1<<V;V+ce<M&&($-=xe[V+ce],!($<=0));)V++,$<<=1;if(ae+=1<<V,c===m&&ae>a||c===d&&ae>o)return 1;H=re&_e,b[H]=x<<24|V<<16|fe-S|0}}return re!==0&&(b[fe+re]=B-ce<<24|64<<16|0),R.bits=x,0}},{"../utils/common":41}],51:[function(t,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,r,i){var n=t("../utils/common"),s=4,a=0,o=1,f=2;function m(L){for(var me=L.length;--me>=0;)L[me]=0}var d=0,y=1,p=2,E=3,v=258,u=29,c=256,g=c+1+u,_=30,D=19,b=2*g+1,S=15,I=16,R=7,C=256,B=16,Y=17,k=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=512,ae=new Array((g+2)*2);m(ae);var re=new Array(_*2);m(re);var be=new Array($);m(be);var W=new Array(v-E+1);m(W);var H=new Array(u);m(H);var _e=new Array(_);m(_e);function fe(L,me,ge,Te,G){this.static_tree=L,this.extra_bits=me,this.extra_base=ge,this.elems=Te,this.max_length=G,this.has_stree=L&&L.length}var pe,ze,Pe;function xe(L,me){this.dyn_tree=L,this.max_code=0,this.stat_desc=me}function Oe(L){return L<256?be[L]:be[256+(L>>>7)]}function Ue(L,me){L.pending_buf[L.pending++]=me&255,L.pending_buf[L.pending++]=me>>>8&255}function Ne(L,me,ge){L.bi_valid>I-ge?(L.bi_buf|=me<<L.bi_valid&65535,Ue(L,L.bi_buf),L.bi_buf=me>>I-L.bi_valid,L.bi_valid+=ge-I):(L.bi_buf|=me<<L.bi_valid&65535,L.bi_valid+=ge)}function Fe(L,me,ge){Ne(L,ge[me*2],ge[me*2+1])}function Le(L,me){var ge=0;do ge|=L&1,L>>>=1,ge<<=1;while(--me>0);return ge>>>1}function w(L){L.bi_valid===16?(Ue(L,L.bi_buf),L.bi_buf=0,L.bi_valid=0):L.bi_valid>=8&&(L.pending_buf[L.pending++]=L.bi_buf&255,L.bi_buf>>=8,L.bi_valid-=8)}function oe(L,me){var ge=me.dyn_tree,Te=me.max_code,G=me.stat_desc.static_tree,le=me.stat_desc.has_stree,l=me.stat_desc.extra_bits,A=me.stat_desc.extra_base,U=me.stat_desc.max_length,h,q,Q,T,j,ne,Ie=0;for(T=0;T<=S;T++)L.bl_count[T]=0;for(ge[L.heap[L.heap_max]*2+1]=0,h=L.heap_max+1;h<b;h++)q=L.heap[h],T=ge[ge[q*2+1]*2+1]+1,T>U&&(T=U,Ie++),ge[q*2+1]=T,!(q>Te)&&(L.bl_count[T]++,j=0,q>=A&&(j=l[q-A]),ne=ge[q*2],L.opt_len+=ne*(T+j),le&&(L.static_len+=ne*(G[q*2+1]+j)));if(Ie!==0){do{for(T=U-1;L.bl_count[T]===0;)T--;L.bl_count[T]--,L.bl_count[T+1]+=2,L.bl_count[U]--,Ie-=2}while(Ie>0);for(T=U;T!==0;T--)for(q=L.bl_count[T];q!==0;)Q=L.heap[--h],!(Q>Te)&&(ge[Q*2+1]!==T&&(L.opt_len+=(T-ge[Q*2+1])*ge[Q*2],ge[Q*2+1]=T),q--)}}function ie(L,me,ge){var Te=new Array(S+1),G=0,le,l;for(le=1;le<=S;le++)Te[le]=G=G+ge[le-1]<<1;for(l=0;l<=me;l++){var A=L[l*2+1];A!==0&&(L[l*2]=Le(Te[A]++,A))}}function F(){var L,me,ge,Te,G,le=new Array(S+1);for(ge=0,Te=0;Te<u-1;Te++)for(H[Te]=ge,L=0;L<1<<M[Te];L++)W[ge++]=Te;for(W[ge-1]=Te,G=0,Te=0;Te<16;Te++)for(_e[Te]=G,L=0;L<1<<x[Te];L++)be[G++]=Te;for(G>>=7;Te<_;Te++)for(_e[Te]=G<<7,L=0;L<1<<x[Te]-7;L++)be[256+G++]=Te;for(me=0;me<=S;me++)le[me]=0;for(L=0;L<=143;)ae[L*2+1]=8,L++,le[8]++;for(;L<=255;)ae[L*2+1]=9,L++,le[9]++;for(;L<=279;)ae[L*2+1]=7,L++,le[7]++;for(;L<=287;)ae[L*2+1]=8,L++,le[8]++;for(ie(ae,g+1,le),L=0;L<_;L++)re[L*2+1]=5,re[L*2]=Le(L,5);pe=new fe(ae,M,c+1,g,S),ze=new fe(re,x,0,_,S),Pe=new fe(new Array(0),V,0,D,R)}function z(L){var me;for(me=0;me<g;me++)L.dyn_ltree[me*2]=0;for(me=0;me<_;me++)L.dyn_dtree[me*2]=0;for(me=0;me<D;me++)L.bl_tree[me*2]=0;L.dyn_ltree[C*2]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function X(L){L.bi_valid>8?Ue(L,L.bi_buf):L.bi_valid>0&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function he(L,me,ge,Te){X(L),Ue(L,ge),Ue(L,~ge),n.arraySet(L.pending_buf,L.window,me,ge,L.pending),L.pending+=ge}function se(L,me,ge,Te){var G=me*2,le=ge*2;return L[G]<L[le]||L[G]===L[le]&&Te[me]<=Te[ge]}function K(L,me,ge){for(var Te=L.heap[ge],G=ge<<1;G<=L.heap_len&&(G<L.heap_len&&se(me,L.heap[G+1],L.heap[G],L.depth)&&G++,!se(me,Te,L.heap[G],L.depth));)L.heap[ge]=L.heap[G],ge=G,G<<=1;L.heap[ge]=Te}function ue(L,me,ge){var Te,G,le=0,l,A;if(L.last_lit!==0)do Te=L.pending_buf[L.d_buf+le*2]<<8|L.pending_buf[L.d_buf+le*2+1],G=L.pending_buf[L.l_buf+le],le++,Te===0?Fe(L,G,me):(l=W[G],Fe(L,l+c+1,me),A=M[l],A!==0&&(G-=H[l],Ne(L,G,A)),Te--,l=Oe(Te),Fe(L,l,ge),A=x[l],A!==0&&(Te-=_e[l],Ne(L,Te,A)));while(le<L.last_lit);Fe(L,C,me)}function Ae(L,me){var ge=me.dyn_tree,Te=me.stat_desc.static_tree,G=me.stat_desc.has_stree,le=me.stat_desc.elems,l,A,U=-1,h;for(L.heap_len=0,L.heap_max=b,l=0;l<le;l++)ge[l*2]!==0?(L.heap[++L.heap_len]=U=l,L.depth[l]=0):ge[l*2+1]=0;for(;L.heap_len<2;)h=L.heap[++L.heap_len]=U<2?++U:0,ge[h*2]=1,L.depth[h]=0,L.opt_len--,G&&(L.static_len-=Te[h*2+1]);for(me.max_code=U,l=L.heap_len>>1;l>=1;l--)K(L,ge,l);h=le;do l=L.heap[1],L.heap[1]=L.heap[L.heap_len--],K(L,ge,1),A=L.heap[1],L.heap[--L.heap_max]=l,L.heap[--L.heap_max]=A,ge[h*2]=ge[l*2]+ge[A*2],L.depth[h]=(L.depth[l]>=L.depth[A]?L.depth[l]:L.depth[A])+1,ge[l*2+1]=ge[A*2+1]=h,L.heap[1]=h++,K(L,ge,1);while(L.heap_len>=2);L.heap[--L.heap_max]=L.heap[1],oe(L,me),ie(ge,U,L.bl_count)}function ye(L,me,ge){var Te,G=-1,le,l=me[1],A=0,U=7,h=4;for(l===0&&(U=138,h=3),me[(ge+1)*2+1]=65535,Te=0;Te<=ge;Te++)le=l,l=me[(Te+1)*2+1],!(++A<U&&le===l)&&(A<h?L.bl_tree[le*2]+=A:le!==0?(le!==G&&L.bl_tree[le*2]++,L.bl_tree[B*2]++):A<=10?L.bl_tree[Y*2]++:L.bl_tree[k*2]++,A=0,G=le,l===0?(U=138,h=3):le===l?(U=6,h=3):(U=7,h=4))}function Re(L,me,ge){var Te,G=-1,le,l=me[1],A=0,U=7,h=4;for(l===0&&(U=138,h=3),Te=0;Te<=ge;Te++)if(le=l,l=me[(Te+1)*2+1],!(++A<U&&le===l)){if(A<h)do Fe(L,le,L.bl_tree);while(--A!==0);else le!==0?(le!==G&&(Fe(L,le,L.bl_tree),A--),Fe(L,B,L.bl_tree),Ne(L,A-3,2)):A<=10?(Fe(L,Y,L.bl_tree),Ne(L,A-3,3)):(Fe(L,k,L.bl_tree),Ne(L,A-11,7));A=0,G=le,l===0?(U=138,h=3):le===l?(U=6,h=3):(U=7,h=4)}}function Me(L){var me;for(ye(L,L.dyn_ltree,L.l_desc.max_code),ye(L,L.dyn_dtree,L.d_desc.max_code),Ae(L,L.bl_desc),me=D-1;me>=3&&L.bl_tree[ce[me]*2+1]===0;me--);return L.opt_len+=3*(me+1)+5+5+4,me}function qe(L,me,ge,Te){var G;for(Ne(L,me-257,5),Ne(L,ge-1,5),Ne(L,Te-4,4),G=0;G<Te;G++)Ne(L,L.bl_tree[ce[G]*2+1],3);Re(L,L.dyn_ltree,me-1),Re(L,L.dyn_dtree,ge-1)}function $e(L){var me=4093624447,ge;for(ge=0;ge<=31;ge++,me>>>=1)if(me&1&&L.dyn_ltree[ge*2]!==0)return a;if(L.dyn_ltree[18]!==0||L.dyn_ltree[20]!==0||L.dyn_ltree[26]!==0)return o;for(ge=32;ge<c;ge++)if(L.dyn_ltree[ge*2]!==0)return o;return a}var rt=!1;function tt(L){rt||(F(),rt=!0),L.l_desc=new xe(L.dyn_ltree,pe),L.d_desc=new xe(L.dyn_dtree,ze),L.bl_desc=new xe(L.bl_tree,Pe),L.bi_buf=0,L.bi_valid=0,z(L)}function at(L,me,ge,Te){Ne(L,(d<<1)+(Te?1:0),3),he(L,me,ge)}function We(L){Ne(L,y<<1,3),Fe(L,C,ae),w(L)}function it(L,me,ge,Te){var G,le,l=0;L.level>0?(L.strm.data_type===f&&(L.strm.data_type=$e(L)),Ae(L,L.l_desc),Ae(L,L.d_desc),l=Me(L),G=L.opt_len+3+7>>>3,le=L.static_len+3+7>>>3,le<=G&&(G=le)):G=le=ge+5,ge+4<=G&&me!==-1?at(L,me,ge,Te):L.strategy===s||le===G?(Ne(L,(y<<1)+(Te?1:0),3),ue(L,ae,re)):(Ne(L,(p<<1)+(Te?1:0),3),qe(L,L.l_desc.max_code+1,L.d_desc.max_code+1,l+1),ue(L,L.dyn_ltree,L.dyn_dtree)),z(L),Te&&X(L)}function pt(L,me,ge){return L.pending_buf[L.d_buf+L.last_lit*2]=me>>>8&255,L.pending_buf[L.d_buf+L.last_lit*2+1]=me&255,L.pending_buf[L.l_buf+L.last_lit]=ge&255,L.last_lit++,me===0?L.dyn_ltree[ge*2]++:(L.matches++,me--,L.dyn_ltree[(W[ge]+c+1)*2]++,L.dyn_dtree[Oe(me)*2]++),L.last_lit===L.lit_bufsize-1}i._tr_init=tt,i._tr_stored_block=at,i._tr_flush_block=it,i._tr_tally=pt,i._tr_align=We},{"../utils/common":41}],53:[function(t,r,i){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}r.exports=n},{}],54:[function(t,r,i){(function(n){(function(s,a){if(s.setImmediate)return;var o=1,f={},m=!1,d=s.document,y;function p(R){typeof R!="function"&&(R=new Function(""+R));for(var C=new Array(arguments.length-1),B=0;B<C.length;B++)C[B]=arguments[B+1];var Y={callback:R,args:C};return f[o]=Y,y(o),o++}function E(R){delete f[R]}function v(R){var C=R.callback,B=R.args;switch(B.length){case 0:C();break;case 1:C(B[0]);break;case 2:C(B[0],B[1]);break;case 3:C(B[0],B[1],B[2]);break;default:C.apply(a,B);break}}function u(R){if(m)setTimeout(u,0,R);else{var C=f[R];if(C){m=!0;try{v(C)}finally{E(R),m=!1}}}}function c(){y=function(R){process.nextTick(function(){u(R)})}}function g(){if(s.postMessage&&!s.importScripts){var R=!0,C=s.onmessage;return s.onmessage=function(){R=!1},s.postMessage("","*"),s.onmessage=C,R}}function _(){var R="setImmediate$"+Math.random()+"$",C=function(B){B.source===s&&typeof B.data=="string"&&B.data.indexOf(R)===0&&u(+B.data.slice(R.length))};s.addEventListener?s.addEventListener("message",C,!1):s.attachEvent("onmessage",C),y=function(B){s.postMessage(R+B,"*")}}function D(){var R=new MessageChannel;R.port1.onmessage=function(C){var B=C.data;u(B)},y=function(C){R.port2.postMessage(C)}}function b(){var R=d.documentElement;y=function(C){var B=d.createElement("script");B.onreadystatechange=function(){u(C),B.onreadystatechange=null,R.removeChild(B),B=null},R.appendChild(B)}}function S(){y=function(R){setTimeout(u,0,R)}}var I=Object.getPrototypeOf&&Object.getPrototypeOf(s);I=I&&I.setTimeout?I:s,{}.toString.call(s.process)==="[object process]"?c():g()?_():s.MessageChannel?D():d&&"onreadystatechange"in d.createElement("script")?b():S(),I.setImmediate=p,I.clearImmediate=E})(typeof self>"u"?typeof n>"u"?this:n:self)}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ai)),ai.exports}var Ta=Sa();const Ia=Ot(Ta);class Ra{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new Ia}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return Jt(e,"binary").then((function(r){return this.zip.loadAsync(r,{base64:t})}).bind(this))}request(e,t){var r=new Ye,i,n=new Rt(e);return t||(t=n.extension),t=="blob"?i=this.getBlob(e):i=this.getText(e),i?i.then((function(s){let a=this.handleResponse(s,t);r.resolve(a)}).bind(this)):r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):Kt(t)?r=Ct(e,"text/xml"):t=="xhtml"?r=Ct(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Ct(e,"text/html"):r=e,r}getBlob(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||Wt.lookup(i.name),i.async("uint8array").then(function(n){return new Blob([n],{type:t})})}getText(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return i.async("string").then(function(n){return n})}getBase64(e,t){var r=window.decodeURIComponent(e.substr(1)),i=this.zip.file(r);if(i)return t=t||Wt.lookup(i.name),i.async("base64").then(function(n){return"data:"+t+";base64,"+n})}createUrl(e,t){var r=new Ye,i=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(s=this.getBase64(e),s&&s.then((function(o){this.urlCache[e]=o,r.resolve(o)}).bind(this))):(s=this.getBlob(e),s&&s.then((function(o){n=i.createObjectURL(o),this.urlCache[e]=n,r.resolve(n)}).bind(this))),s||r.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var oi={exports:{}};var An;function Na(){return An||(An=1,(function(N,e){(function(t){N.exports=t()})(function(){return(function t(r,i,n){function s(f,m){if(!i[f]){if(!r[f]){var d=typeof _t=="function"&&_t;if(!m&&d)return d(f,!0);if(a)return a(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var p=i[f]={exports:{}};r[f][0].call(p.exports,function(E){var v=r[f][1][E];return s(v||E)},p,p.exports,t,r,i,n)}return i[f].exports}for(var a=typeof _t=="function"&&_t,o=0;o<n.length;o++)s(n[o]);return s})({1:[function(t,r,i){(function(n){var s=n.MutationObserver||n.WebKitMutationObserver,a;if(s){var o=0,f=new s(E),m=n.document.createTextNode("");f.observe(m,{characterData:!0}),a=function(){m.data=o=++o%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var d=new n.MessageChannel;d.port1.onmessage=E,a=function(){d.port2.postMessage(0)}}else"document"in n&&"onreadystatechange"in n.document.createElement("script")?a=function(){var u=n.document.createElement("script");u.onreadystatechange=function(){E(),u.onreadystatechange=null,u.parentNode.removeChild(u),u=null},n.document.documentElement.appendChild(u)}:a=function(){setTimeout(E,0)};var y,p=[];function E(){y=!0;for(var u,c,g=p.length;g;){for(c=p,p=[],u=-1;++u<g;)c[u]();g=p.length}y=!1}r.exports=v;function v(u){p.push(u)===1&&!y&&a()}}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,r,i){var n=t(1);function s(){}var a={},o=["REJECTED"],f=["FULFILLED"],m=["PENDING"];r.exports=d;function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,b!==s&&v(this,b)}d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,S){if(typeof b!="function"&&this.state===f||typeof S!="function"&&this.state===o)return this;var I=new this.constructor(s);if(this.state!==m){var R=this.state===f?b:S;p(I,R,this.outcome)}else this.queue.push(new y(I,b,S));return I};function y(b,S,I){this.promise=b,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}y.prototype.callFulfilled=function(b){a.resolve(this.promise,b)},y.prototype.otherCallFulfilled=function(b){p(this.promise,this.onFulfilled,b)},y.prototype.callRejected=function(b){a.reject(this.promise,b)},y.prototype.otherCallRejected=function(b){p(this.promise,this.onRejected,b)};function p(b,S,I){n(function(){var R;try{R=S(I)}catch(C){return a.reject(b,C)}R===b?a.reject(b,new TypeError("Cannot resolve promise with itself")):a.resolve(b,R)})}a.resolve=function(b,S){var I=u(E,S);if(I.status==="error")return a.reject(b,I.value);var R=I.value;if(R)v(b,R);else{b.state=f,b.outcome=S;for(var C=-1,B=b.queue.length;++C<B;)b.queue[C].callFulfilled(S)}return b},a.reject=function(b,S){b.state=o,b.outcome=S;for(var I=-1,R=b.queue.length;++I<R;)b.queue[I].callRejected(S);return b};function E(b){var S=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof S=="function")return function(){S.apply(b,arguments)}}function v(b,S){var I=!1;function R(k){I||(I=!0,a.reject(b,k))}function C(k){I||(I=!0,a.resolve(b,k))}function B(){S(C,R)}var Y=u(B);Y.status==="error"&&R(Y.value)}function u(b,S){var I={};try{I.value=b(S),I.status="success"}catch(R){I.status="error",I.value=R}return I}d.resolve=c;function c(b){return b instanceof this?b:a.resolve(new this(s),b)}d.reject=g;function g(b){var S=new this(s);return a.reject(S,b)}d.all=_;function _(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,R=!1;if(!I)return this.resolve([]);for(var C=new Array(I),B=0,Y=-1,k=new this(s);++Y<I;)M(b[Y],Y);return k;function M(x,V){S.resolve(x).then(ce,function($){R||(R=!0,a.reject(k,$))});function ce($){C[V]=$,++B===I&&!R&&(R=!0,a.resolve(k,C))}}}d.race=D;function D(b){var S=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=b.length,R=!1;if(!I)return this.resolve([]);for(var C=-1,B=new this(s);++C<I;)Y(b[C]);return B;function Y(k){S.resolve(k).then(function(M){R||(R=!0,a.resolve(B,M))},function(M){R||(R=!0,a.reject(B,M))})}}},{1:1}],3:[function(t,r,i){(function(n){typeof n.Promise!="function"&&(n.Promise=t(2))}).call(this,typeof dt<"u"?dt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,r,i){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O};function s(O,Z){if(!(O instanceof Z))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var o=a();function f(){try{if(!o||!o.open)return!1;var O=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Z=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!O||Z)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function m(O,Z){O=O||[],Z=Z||{};try{return new Blob(O,Z)}catch(J){if(J.name!=="TypeError")throw J;for(var P=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ee=new P,te=0;te<O.length;te+=1)ee.append(O[te]);return ee.getBlob(Z.type)}}typeof Promise>"u"&&t(3);var d=Promise;function y(O,Z){Z&&O.then(function(P){Z(null,P)},function(P){Z(P)})}function p(O,Z,P){typeof Z=="function"&&O.then(Z),typeof P=="function"&&O.catch(P)}function E(O){return typeof O!="string"&&(console.warn(O+" used as a key, but it is not a string."),O=String(O)),O}function v(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var u="local-forage-detect-blob-support",c=void 0,g={},_=Object.prototype.toString,D="readonly",b="readwrite";function S(O){for(var Z=O.length,P=new ArrayBuffer(Z),ee=new Uint8Array(P),te=0;te<Z;te++)ee[te]=O.charCodeAt(te);return P}function I(O){return new d(function(Z){var P=O.transaction(u,b),ee=m([""]);P.objectStore(u).put(ee,"key"),P.onabort=function(te){te.preventDefault(),te.stopPropagation(),Z(!1)},P.oncomplete=function(){var te=navigator.userAgent.match(/Chrome\/(\d+)/),J=navigator.userAgent.match(/Edge\//);Z(J||!te||parseInt(te[1],10)>=43)}}).catch(function(){return!1})}function R(O){return typeof c=="boolean"?d.resolve(c):I(O).then(function(Z){return c=Z,c})}function C(O){var Z=g[O.name],P={};P.promise=new d(function(ee,te){P.resolve=ee,P.reject=te}),Z.deferredOperations.push(P),Z.dbReady?Z.dbReady=Z.dbReady.then(function(){return P.promise}):Z.dbReady=P.promise}function B(O){var Z=g[O.name],P=Z.deferredOperations.pop();if(P)return P.resolve(),P.promise}function Y(O,Z){var P=g[O.name],ee=P.deferredOperations.pop();if(ee)return ee.reject(Z),ee.promise}function k(O,Z){return new d(function(P,ee){if(g[O.name]=g[O.name]||H(),O.db)if(Z)C(O),O.db.close();else return P(O.db);var te=[O.name];Z&&te.push(O.version);var J=o.open.apply(o,te);Z&&(J.onupgradeneeded=function(de){var ve=J.result;try{ve.createObjectStore(O.storeName),de.oldVersion<=1&&ve.createObjectStore(u)}catch(we){if(we.name==="ConstraintError")console.warn('The database "'+O.name+'" has been upgraded from version '+de.oldVersion+" to version "+de.newVersion+', but the storage "'+O.storeName+'" already exists.');else throw we}}),J.onerror=function(de){de.preventDefault(),ee(J.error)},J.onsuccess=function(){var de=J.result;de.onversionchange=function(ve){ve.target.close()},P(de),B(O)}})}function M(O){return k(O,!1)}function x(O){return k(O,!0)}function V(O,Z){if(!O.db)return!0;var P=!O.db.objectStoreNames.contains(O.storeName),ee=O.version<O.db.version,te=O.version>O.db.version;if(ee&&(O.version!==Z&&console.warn('The database "'+O.name+`" can't be downgraded from version `+O.db.version+" to version "+O.version+"."),O.version=O.db.version),te||P){if(P){var J=O.db.version+1;J>O.version&&(O.version=J)}return!0}return!1}function ce(O){return new d(function(Z,P){var ee=new FileReader;ee.onerror=P,ee.onloadend=function(te){var J=btoa(te.target.result||"");Z({__local_forage_encoded_blob:!0,data:J,type:O.type})},ee.readAsBinaryString(O)})}function $(O){var Z=S(atob(O.data));return m([Z],{type:O.type})}function ae(O){return O&&O.__local_forage_encoded_blob}function re(O){var Z=this,P=Z._initReady().then(function(){var ee=g[Z._dbInfo.name];if(ee&&ee.dbReady)return ee.dbReady});return p(P,O,O),P}function be(O){C(O);for(var Z=g[O.name],P=Z.forages,ee=0;ee<P.length;ee++){var te=P[ee];te._dbInfo.db&&(te._dbInfo.db.close(),te._dbInfo.db=null)}return O.db=null,M(O).then(function(J){return O.db=J,V(O)?x(O):J}).then(function(J){O.db=Z.db=J;for(var de=0;de<P.length;de++)P[de]._dbInfo.db=J}).catch(function(J){throw Y(O,J),J})}function W(O,Z,P,ee){ee===void 0&&(ee=1);try{var te=O.db.transaction(O.storeName,Z);P(null,te)}catch(J){if(ee>0&&(!O.db||J.name==="InvalidStateError"||J.name==="NotFoundError"))return d.resolve().then(function(){if(!O.db||J.name==="NotFoundError"&&!O.db.objectStoreNames.contains(O.storeName)&&O.version<=O.db.version)return O.db&&(O.version=O.db.version+1),x(O)}).then(function(){return be(O).then(function(){W(O,Z,P,ee-1)})}).catch(P);P(J)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _e(O){var Z=this,P={db:null};if(O)for(var ee in O)P[ee]=O[ee];var te=g[P.name];te||(te=H(),g[P.name]=te),te.forages.push(Z),Z._initReady||(Z._initReady=Z.ready,Z.ready=re);var J=[];function de(){return d.resolve()}for(var ve=0;ve<te.forages.length;ve++){var we=te.forages[ve];we!==Z&&J.push(we._initReady().catch(de))}var Ee=te.forages.slice(0);return d.all(J).then(function(){return P.db=te.db,M(P)}).then(function(Ce){return P.db=Ce,V(P,Z._defaultConfig.version)?x(P):Ce}).then(function(Ce){P.db=te.db=Ce,Z._dbInfo=P;for(var Be=0;Be<Ee.length;Be++){var Ze=Ee[Be];Ze!==Z&&(Ze._dbInfo.db=P.db,Ze._dbInfo.version=P.version)}})}function fe(O,Z){var P=this;O=E(O);var ee=new d(function(te,J){P.ready().then(function(){W(P._dbInfo,D,function(de,ve){if(de)return J(de);try{var we=ve.objectStore(P._dbInfo.storeName),Ee=we.get(O);Ee.onsuccess=function(){var Ce=Ee.result;Ce===void 0&&(Ce=null),ae(Ce)&&(Ce=$(Ce)),te(Ce)},Ee.onerror=function(){J(Ee.error)}}catch(Ce){J(Ce)}})}).catch(J)});return y(ee,Z),ee}function pe(O,Z){var P=this,ee=new d(function(te,J){P.ready().then(function(){W(P._dbInfo,D,function(de,ve){if(de)return J(de);try{var we=ve.objectStore(P._dbInfo.storeName),Ee=we.openCursor(),Ce=1;Ee.onsuccess=function(){var Be=Ee.result;if(Be){var Ze=Be.value;ae(Ze)&&(Ze=$(Ze));var Ke=O(Ze,Be.key,Ce++);Ke!==void 0?te(Ke):Be.continue()}else te()},Ee.onerror=function(){J(Ee.error)}}catch(Be){J(Be)}})}).catch(J)});return y(ee,Z),ee}function ze(O,Z,P){var ee=this;O=E(O);var te=new d(function(J,de){var ve;ee.ready().then(function(){return ve=ee._dbInfo,_.call(Z)==="[object Blob]"?R(ve.db).then(function(we){return we?Z:ce(Z)}):Z}).then(function(we){W(ee._dbInfo,b,function(Ee,Ce){if(Ee)return de(Ee);try{var Be=Ce.objectStore(ee._dbInfo.storeName);we===null&&(we=void 0);var Ze=Be.put(we,O);Ce.oncomplete=function(){we===void 0&&(we=null),J(we)},Ce.onabort=Ce.onerror=function(){var Ke=Ze.error?Ze.error:Ze.transaction.error;de(Ke)}}catch(Ke){de(Ke)}})}).catch(de)});return y(te,P),te}function Pe(O,Z){var P=this;O=E(O);var ee=new d(function(te,J){P.ready().then(function(){W(P._dbInfo,b,function(de,ve){if(de)return J(de);try{var we=ve.objectStore(P._dbInfo.storeName),Ee=we.delete(O);ve.oncomplete=function(){te()},ve.onerror=function(){J(Ee.error)},ve.onabort=function(){var Ce=Ee.error?Ee.error:Ee.transaction.error;J(Ce)}}catch(Ce){J(Ce)}})}).catch(J)});return y(ee,Z),ee}function xe(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){W(Z._dbInfo,b,function(J,de){if(J)return te(J);try{var ve=de.objectStore(Z._dbInfo.storeName),we=ve.clear();de.oncomplete=function(){ee()},de.onabort=de.onerror=function(){var Ee=we.error?we.error:we.transaction.error;te(Ee)}}catch(Ee){te(Ee)}})}).catch(te)});return y(P,O),P}function Oe(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){W(Z._dbInfo,D,function(J,de){if(J)return te(J);try{var ve=de.objectStore(Z._dbInfo.storeName),we=ve.count();we.onsuccess=function(){ee(we.result)},we.onerror=function(){te(we.error)}}catch(Ee){te(Ee)}})}).catch(te)});return y(P,O),P}function Ue(O,Z){var P=this,ee=new d(function(te,J){if(O<0){te(null);return}P.ready().then(function(){W(P._dbInfo,D,function(de,ve){if(de)return J(de);try{var we=ve.objectStore(P._dbInfo.storeName),Ee=!1,Ce=we.openKeyCursor();Ce.onsuccess=function(){var Be=Ce.result;if(!Be){te(null);return}O===0||Ee?te(Be.key):(Ee=!0,Be.advance(O))},Ce.onerror=function(){J(Ce.error)}}catch(Be){J(Be)}})}).catch(J)});return y(ee,Z),ee}function Ne(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){W(Z._dbInfo,D,function(J,de){if(J)return te(J);try{var ve=de.objectStore(Z._dbInfo.storeName),we=ve.openKeyCursor(),Ee=[];we.onsuccess=function(){var Ce=we.result;if(!Ce){ee(Ee);return}Ee.push(Ce.key),Ce.continue()},we.onerror=function(){te(we.error)}}catch(Ce){te(Ce)}})}).catch(te)});return y(P,O),P}function Fe(O,Z){Z=v.apply(this,arguments);var P=this.config();O=typeof O!="function"&&O||{},O.name||(O.name=O.name||P.name,O.storeName=O.storeName||P.storeName);var ee=this,te;if(!O.name)te=d.reject("Invalid arguments");else{var J=O.name===P.name&&ee._dbInfo.db,de=J?d.resolve(ee._dbInfo.db):M(O).then(function(ve){var we=g[O.name],Ee=we.forages;we.db=ve;for(var Ce=0;Ce<Ee.length;Ce++)Ee[Ce]._dbInfo.db=ve;return ve});O.storeName?te=de.then(function(ve){if(ve.objectStoreNames.contains(O.storeName)){var we=ve.version+1;C(O);var Ee=g[O.name],Ce=Ee.forages;ve.close();for(var Be=0;Be<Ce.length;Be++){var Ze=Ce[Be];Ze._dbInfo.db=null,Ze._dbInfo.version=we}var Ke=new d(function(Je,ut){var ot=o.open(O.name,we);ot.onerror=function(yt){var Vt=ot.result;Vt.close(),ut(yt)},ot.onupgradeneeded=function(){var yt=ot.result;yt.deleteObjectStore(O.storeName)},ot.onsuccess=function(){var yt=ot.result;yt.close(),Je(yt)}});return Ke.then(function(Je){Ee.db=Je;for(var ut=0;ut<Ce.length;ut++){var ot=Ce[ut];ot._dbInfo.db=Je,B(ot._dbInfo)}}).catch(function(Je){throw(Y(O,Je)||d.resolve()).catch(function(){}),Je})}}):te=de.then(function(ve){C(O);var we=g[O.name],Ee=we.forages;ve.close();for(var Ce=0;Ce<Ee.length;Ce++){var Be=Ee[Ce];Be._dbInfo.db=null}var Ze=new d(function(Ke,Je){var ut=o.deleteDatabase(O.name);ut.onerror=function(){var ot=ut.result;ot&&ot.close(),Je(ut.error)},ut.onblocked=function(){console.warn('dropInstance blocked for database "'+O.name+'" until all open connections are closed')},ut.onsuccess=function(){var ot=ut.result;ot&&ot.close(),Ke(ot)}});return Ze.then(function(Ke){we.db=Ke;for(var Je=0;Je<Ee.length;Je++){var ut=Ee[Je];B(ut._dbInfo)}}).catch(function(Ke){throw(Y(O,Ke)||d.resolve()).catch(function(){}),Ke})})}return y(te,Z),te}var Le={_driver:"asyncStorage",_initStorage:_e,_support:f(),iterate:pe,getItem:fe,setItem:ze,removeItem:Pe,clear:xe,length:Oe,key:Ue,keys:Ne,dropInstance:Fe};function w(){return typeof openDatabase=="function"}var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ie="~~local_forage_type~",F=/^~~local_forage_type~([^~]+)~/,z="__lfsc__:",X=z.length,he="arbf",se="blob",K="si08",ue="ui08",Ae="uic8",ye="si16",Re="si32",Me="ur16",qe="ui32",$e="fl32",rt="fl64",tt=X+he.length,at=Object.prototype.toString;function We(O){var Z=O.length*.75,P=O.length,ee,te=0,J,de,ve,we;O[O.length-1]==="="&&(Z--,O[O.length-2]==="="&&Z--);var Ee=new ArrayBuffer(Z),Ce=new Uint8Array(Ee);for(ee=0;ee<P;ee+=4)J=oe.indexOf(O[ee]),de=oe.indexOf(O[ee+1]),ve=oe.indexOf(O[ee+2]),we=oe.indexOf(O[ee+3]),Ce[te++]=J<<2|de>>4,Ce[te++]=(de&15)<<4|ve>>2,Ce[te++]=(ve&3)<<6|we&63;return Ee}function it(O){var Z=new Uint8Array(O),P="",ee;for(ee=0;ee<Z.length;ee+=3)P+=oe[Z[ee]>>2],P+=oe[(Z[ee]&3)<<4|Z[ee+1]>>4],P+=oe[(Z[ee+1]&15)<<2|Z[ee+2]>>6],P+=oe[Z[ee+2]&63];return Z.length%3===2?P=P.substring(0,P.length-1)+"=":Z.length%3===1&&(P=P.substring(0,P.length-2)+"=="),P}function pt(O,Z){var P="";if(O&&(P=at.call(O)),O&&(P==="[object ArrayBuffer]"||O.buffer&&at.call(O.buffer)==="[object ArrayBuffer]")){var ee,te=z;O instanceof ArrayBuffer?(ee=O,te+=he):(ee=O.buffer,P==="[object Int8Array]"?te+=K:P==="[object Uint8Array]"?te+=ue:P==="[object Uint8ClampedArray]"?te+=Ae:P==="[object Int16Array]"?te+=ye:P==="[object Uint16Array]"?te+=Me:P==="[object Int32Array]"?te+=Re:P==="[object Uint32Array]"?te+=qe:P==="[object Float32Array]"?te+=$e:P==="[object Float64Array]"?te+=rt:Z(new Error("Failed to get type for BinaryArray"))),Z(te+it(ee))}else if(P==="[object Blob]"){var J=new FileReader;J.onload=function(){var de=ie+O.type+"~"+it(this.result);Z(z+se+de)},J.readAsArrayBuffer(O)}else try{Z(JSON.stringify(O))}catch(de){console.error("Couldn't convert value into a JSON string: ",O),Z(null,de)}}function L(O){if(O.substring(0,X)!==z)return JSON.parse(O);var Z=O.substring(tt),P=O.substring(X,tt),ee;if(P===se&&F.test(Z)){var te=Z.match(F);ee=te[1],Z=Z.substring(te[0].length)}var J=We(Z);switch(P){case he:return J;case se:return m([J],{type:ee});case K:return new Int8Array(J);case ue:return new Uint8Array(J);case Ae:return new Uint8ClampedArray(J);case ye:return new Int16Array(J);case Me:return new Uint16Array(J);case Re:return new Int32Array(J);case qe:return new Uint32Array(J);case $e:return new Float32Array(J);case rt:return new Float64Array(J);default:throw new Error("Unkown type: "+P)}}var me={serialize:pt,deserialize:L,stringToBuffer:We,bufferToString:it};function ge(O,Z,P,ee){O.executeSql("CREATE TABLE IF NOT EXISTS "+Z.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],P,ee)}function Te(O){var Z=this,P={db:null};if(O)for(var ee in O)P[ee]=typeof O[ee]!="string"?O[ee].toString():O[ee];var te=new d(function(J,de){try{P.db=openDatabase(P.name,String(P.version),P.description,P.size)}catch(ve){return de(ve)}P.db.transaction(function(ve){ge(ve,P,function(){Z._dbInfo=P,J()},function(we,Ee){de(Ee)})},de)});return P.serializer=me,te}function G(O,Z,P,ee,te,J){O.executeSql(P,ee,te,function(de,ve){ve.code===ve.SYNTAX_ERR?de.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Z.storeName],function(we,Ee){Ee.rows.length?J(we,ve):ge(we,Z,function(){we.executeSql(P,ee,te,J)},J)},J):J(de,ve)},J)}function le(O,Z){var P=this;O=E(O);var ee=new d(function(te,J){P.ready().then(function(){var de=P._dbInfo;de.db.transaction(function(ve){G(ve,de,"SELECT * FROM "+de.storeName+" WHERE key = ? LIMIT 1",[O],function(we,Ee){var Ce=Ee.rows.length?Ee.rows.item(0).value:null;Ce&&(Ce=de.serializer.deserialize(Ce)),te(Ce)},function(we,Ee){J(Ee)})})}).catch(J)});return y(ee,Z),ee}function l(O,Z){var P=this,ee=new d(function(te,J){P.ready().then(function(){var de=P._dbInfo;de.db.transaction(function(ve){G(ve,de,"SELECT * FROM "+de.storeName,[],function(we,Ee){for(var Ce=Ee.rows,Be=Ce.length,Ze=0;Ze<Be;Ze++){var Ke=Ce.item(Ze),Je=Ke.value;if(Je&&(Je=de.serializer.deserialize(Je)),Je=O(Je,Ke.key,Ze+1),Je!==void 0){te(Je);return}}te()},function(we,Ee){J(Ee)})})}).catch(J)});return y(ee,Z),ee}function A(O,Z,P,ee){var te=this;O=E(O);var J=new d(function(de,ve){te.ready().then(function(){Z===void 0&&(Z=null);var we=Z,Ee=te._dbInfo;Ee.serializer.serialize(Z,function(Ce,Be){Be?ve(Be):Ee.db.transaction(function(Ze){G(Ze,Ee,"INSERT OR REPLACE INTO "+Ee.storeName+" (key, value) VALUES (?, ?)",[O,Ce],function(){de(we)},function(Ke,Je){ve(Je)})},function(Ze){if(Ze.code===Ze.QUOTA_ERR){if(ee>0){de(A.apply(te,[O,we,P,ee-1]));return}ve(Ze)}})})}).catch(ve)});return y(J,P),J}function U(O,Z,P){return A.apply(this,[O,Z,P,1])}function h(O,Z){var P=this;O=E(O);var ee=new d(function(te,J){P.ready().then(function(){var de=P._dbInfo;de.db.transaction(function(ve){G(ve,de,"DELETE FROM "+de.storeName+" WHERE key = ?",[O],function(){te()},function(we,Ee){J(Ee)})})}).catch(J)});return y(ee,Z),ee}function q(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){var J=Z._dbInfo;J.db.transaction(function(de){G(de,J,"DELETE FROM "+J.storeName,[],function(){ee()},function(ve,we){te(we)})})}).catch(te)});return y(P,O),P}function Q(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){var J=Z._dbInfo;J.db.transaction(function(de){G(de,J,"SELECT COUNT(key) as c FROM "+J.storeName,[],function(ve,we){var Ee=we.rows.item(0).c;ee(Ee)},function(ve,we){te(we)})})}).catch(te)});return y(P,O),P}function T(O,Z){var P=this,ee=new d(function(te,J){P.ready().then(function(){var de=P._dbInfo;de.db.transaction(function(ve){G(ve,de,"SELECT key FROM "+de.storeName+" WHERE id = ? LIMIT 1",[O+1],function(we,Ee){var Ce=Ee.rows.length?Ee.rows.item(0).key:null;te(Ce)},function(we,Ee){J(Ee)})})}).catch(J)});return y(ee,Z),ee}function j(O){var Z=this,P=new d(function(ee,te){Z.ready().then(function(){var J=Z._dbInfo;J.db.transaction(function(de){G(de,J,"SELECT key FROM "+J.storeName,[],function(ve,we){for(var Ee=[],Ce=0;Ce<we.rows.length;Ce++)Ee.push(we.rows.item(Ce).key);ee(Ee)},function(ve,we){te(we)})})}).catch(te)});return y(P,O),P}function ne(O){return new d(function(Z,P){O.transaction(function(ee){ee.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(te,J){for(var de=[],ve=0;ve<J.rows.length;ve++)de.push(J.rows.item(ve).name);Z({db:O,storeNames:de})},function(te,J){P(J)})},function(ee){P(ee)})})}function Ie(O,Z){Z=v.apply(this,arguments);var P=this.config();O=typeof O!="function"&&O||{},O.name||(O.name=O.name||P.name,O.storeName=O.storeName||P.storeName);var ee=this,te;return O.name?te=new d(function(J){var de;O.name===P.name?de=ee._dbInfo.db:de=openDatabase(O.name,"","",0),O.storeName?J({db:de,storeNames:[O.storeName]}):J(ne(de))}).then(function(J){return new d(function(de,ve){J.db.transaction(function(we){function Ee(Ke){return new d(function(Je,ut){we.executeSql("DROP TABLE IF EXISTS "+Ke,[],function(){Je()},function(ot,yt){ut(yt)})})}for(var Ce=[],Be=0,Ze=J.storeNames.length;Be<Ze;Be++)Ce.push(Ee(J.storeNames[Be]));d.all(Ce).then(function(){de()}).catch(function(Ke){ve(Ke)})},function(we){ve(we)})})}):te=d.reject("Invalid arguments"),y(te,Z),te}var De={_driver:"webSQLStorage",_initStorage:Te,_support:w(),iterate:l,getItem:le,setItem:U,removeItem:h,clear:q,length:Q,key:T,keys:j,dropInstance:Ie};function ke(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function je(O,Z){var P=O.name+"/";return O.storeName!==Z.storeName&&(P+=O.storeName+"/"),P}function lt(){var O="_localforage_support_test";try{return localStorage.setItem(O,!0),localStorage.removeItem(O),!1}catch{return!0}}function Ve(){return!lt()||localStorage.length>0}function He(O){var Z=this,P={};if(O)for(var ee in O)P[ee]=O[ee];return P.keyPrefix=je(O,Z._defaultConfig),Ve()?(Z._dbInfo=P,P.serializer=me,d.resolve()):d.reject()}function Qe(O){var Z=this,P=Z.ready().then(function(){for(var ee=Z._dbInfo.keyPrefix,te=localStorage.length-1;te>=0;te--){var J=localStorage.key(te);J.indexOf(ee)===0&&localStorage.removeItem(J)}});return y(P,O),P}function Ge(O,Z){var P=this;O=E(O);var ee=P.ready().then(function(){var te=P._dbInfo,J=localStorage.getItem(te.keyPrefix+O);return J&&(J=te.serializer.deserialize(J)),J});return y(ee,Z),ee}function ht(O,Z){var P=this,ee=P.ready().then(function(){for(var te=P._dbInfo,J=te.keyPrefix,de=J.length,ve=localStorage.length,we=1,Ee=0;Ee<ve;Ee++){var Ce=localStorage.key(Ee);if(Ce.indexOf(J)===0){var Be=localStorage.getItem(Ce);if(Be&&(Be=te.serializer.deserialize(Be)),Be=O(Be,Ce.substring(de),we++),Be!==void 0)return Be}}});return y(ee,Z),ee}function gt(O,Z){var P=this,ee=P.ready().then(function(){var te=P._dbInfo,J;try{J=localStorage.key(O)}catch{J=null}return J&&(J=J.substring(te.keyPrefix.length)),J});return y(ee,Z),ee}function St(O){var Z=this,P=Z.ready().then(function(){for(var ee=Z._dbInfo,te=localStorage.length,J=[],de=0;de<te;de++){var ve=localStorage.key(de);ve.indexOf(ee.keyPrefix)===0&&J.push(ve.substring(ee.keyPrefix.length))}return J});return y(P,O),P}function nt(O){var Z=this,P=Z.keys().then(function(ee){return ee.length});return y(P,O),P}function mt(O,Z){var P=this;O=E(O);var ee=P.ready().then(function(){var te=P._dbInfo;localStorage.removeItem(te.keyPrefix+O)});return y(ee,Z),ee}function ft(O,Z,P){var ee=this;O=E(O);var te=ee.ready().then(function(){Z===void 0&&(Z=null);var J=Z;return new d(function(de,ve){var we=ee._dbInfo;we.serializer.serialize(Z,function(Ee,Ce){if(Ce)ve(Ce);else try{localStorage.setItem(we.keyPrefix+O,Ee),de(J)}catch(Be){(Be.name==="QuotaExceededError"||Be.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ve(Be),ve(Be)}})})});return y(te,P),te}function wt(O,Z){if(Z=v.apply(this,arguments),O=typeof O!="function"&&O||{},!O.name){var P=this.config();O.name=O.name||P.name,O.storeName=O.storeName||P.storeName}var ee=this,te;return O.name?te=new d(function(J){O.storeName?J(je(O,ee._defaultConfig)):J(O.name+"/")}).then(function(J){for(var de=localStorage.length-1;de>=0;de--){var ve=localStorage.key(de);ve.indexOf(J)===0&&localStorage.removeItem(ve)}}):te=d.reject("Invalid arguments"),y(te,Z),te}var vt={_driver:"localStorageWrapper",_initStorage:He,_support:ke(),iterate:ht,getItem:Ge,setItem:ft,removeItem:mt,clear:Qe,length:nt,key:gt,keys:St,dropInstance:wt},$t=function(Z,P){return Z===P||typeof Z=="number"&&typeof P=="number"&&isNaN(Z)&&isNaN(P)},$n=function(Z,P){for(var ee=Z.length,te=0;te<ee;){if($t(Z[te],P))return!0;te++}return!1},xi=Array.isArray||function(O){return Object.prototype.toString.call(O)==="[object Array]"},Zt={},Ai={},Lt={INDEXEDDB:Le,WEBSQL:De,LOCALSTORAGE:vt},Qn=[Lt.INDEXEDDB._driver,Lt.WEBSQL._driver,Lt.LOCALSTORAGE._driver],Qt=["dropInstance"],gr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qt),es={description:"",driver:Qn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ts(O,Z){O[Z]=function(){var P=arguments;return O.ready().then(function(){return O[Z].apply(O,P)})}}function vr(){for(var O=1;O<arguments.length;O++){var Z=arguments[O];if(Z)for(var P in Z)Z.hasOwnProperty(P)&&(xi(Z[P])?arguments[0][P]=Z[P].slice():arguments[0][P]=Z[P])}return arguments[0]}var rs=(function(){function O(Z){s(this,O);for(var P in Lt)if(Lt.hasOwnProperty(P)){var ee=Lt[P],te=ee._driver;this[P]=te,Zt[te]||this.defineDriver(ee)}this._defaultConfig=vr({},es),this._config=vr({},this._defaultConfig,Z),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return O.prototype.config=function(P){if((typeof P>"u"?"undefined":n(P))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ee in P){if(ee==="storeName"&&(P[ee]=P[ee].replace(/\W/g,"_")),ee==="version"&&typeof P[ee]!="number")return new Error("Database version must be a number.");this._config[ee]=P[ee]}return"driver"in P&&P.driver?this.setDriver(this._config.driver):!0}else return typeof P=="string"?this._config[P]:this._config},O.prototype.defineDriver=function(P,ee,te){var J=new d(function(de,ve){try{var we=P._driver,Ee=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!P._driver){ve(Ee);return}for(var Ce=gr.concat("_initStorage"),Be=0,Ze=Ce.length;Be<Ze;Be++){var Ke=Ce[Be],Je=!$n(Qt,Ke);if((Je||P[Ke])&&typeof P[Ke]!="function"){ve(Ee);return}}var ut=function(){for(var Vt=function(ss){return function(){var as=new Error("Method "+ss+" is not implemented by the current driver"),Di=d.reject(as);return y(Di,arguments[arguments.length-1]),Di}},yr=0,ns=Qt.length;yr<ns;yr++){var br=Qt[yr];P[br]||(P[br]=Vt(br))}};ut();var ot=function(Vt){Zt[we]&&console.info("Redefining LocalForage driver: "+we),Zt[we]=P,Ai[we]=Vt,de()};"_support"in P?P._support&&typeof P._support=="function"?P._support().then(ot,ve):ot(!!P._support):ot(!0)}catch(yt){ve(yt)}});return p(J,ee,te),J},O.prototype.driver=function(){return this._driver||null},O.prototype.getDriver=function(P,ee,te){var J=Zt[P]?d.resolve(Zt[P]):d.reject(new Error("Driver not found."));return p(J,ee,te),J},O.prototype.getSerializer=function(P){var ee=d.resolve(me);return p(ee,P),ee},O.prototype.ready=function(P){var ee=this,te=ee._driverSet.then(function(){return ee._ready===null&&(ee._ready=ee._initDriver()),ee._ready});return p(te,P,P),te},O.prototype.setDriver=function(P,ee,te){var J=this;xi(P)||(P=[P]);var de=this._getSupportedDrivers(P);function ve(){J._config.driver=J.driver()}function we(Be){return J._extend(Be),ve(),J._ready=J._initStorage(J._config),J._ready}function Ee(Be){return function(){var Ze=0;function Ke(){for(;Ze<Be.length;){var Je=Be[Ze];return Ze++,J._dbInfo=null,J._ready=null,J.getDriver(Je).then(we).catch(Ke)}ve();var ut=new Error("No available storage method found.");return J._driverSet=d.reject(ut),J._driverSet}return Ke()}}var Ce=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=Ce.then(function(){var Be=de[0];return J._dbInfo=null,J._ready=null,J.getDriver(Be).then(function(Ze){J._driver=Ze._driver,ve(),J._wrapLibraryMethodsWithReady(),J._initDriver=Ee(de)})}).catch(function(){ve();var Be=new Error("No available storage method found.");return J._driverSet=d.reject(Be),J._driverSet}),p(this._driverSet,ee,te),this._driverSet},O.prototype.supports=function(P){return!!Ai[P]},O.prototype._extend=function(P){vr(this,P)},O.prototype._getSupportedDrivers=function(P){for(var ee=[],te=0,J=P.length;te<J;te++){var de=P[te];this.supports(de)&&ee.push(de)}return ee},O.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,ee=gr.length;P<ee;P++)ts(this,gr[P])},O.prototype.createInstance=function(P){return new O(P)},O})(),is=new rs;r.exports=is},{3:3}]},{},[4])(4)})})(oi)),oi.exports}var Oa=Na();const Dn=Ot(Oa);class Kn{constructor(e,t,r){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||Jt,this.resolver=r,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof Dn>"u"&&(e=Dn),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let r=e.resources.map(i=>{let{href:n}=i,s=this.resolver(n),a=window.encodeURIComponent(s);return this.storage.getItem(a).then(o=>!o||t?this.requester(s,"binary").then(f=>this.storage.setItem(a,f)):o)});return Promise.all(r)}put(e,t,r){let i=window.encodeURIComponent(e);return this.storage.getItem(i).then(n=>n||this.requester(e,"binary",t,r).then(s=>this.storage.setItem(i,s)))}request(e,t,r,i){return this.online?this.requester(e,t,r,i).then(n=>(this.put(e),n)):this.retrieve(e,t)}retrieve(e,t){new Ye;var r,i=new Rt(e);return t||(t=i.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r.then(n=>{var s=new Ye,a;return n?(a=this.handleResponse(n,t),s.resolve(a)):s.reject({message:"File not found in storage: "+e,stack:new Error().stack}),s.promise})}handleResponse(e,t){var r;return t=="json"?r=JSON.parse(e):Kt(t)?r=Ct(e,"text/xml"):t=="xhtml"?r=Ct(e,"application/xhtml+xml"):t=="html"||t=="htm"?r=Ct(e,"text/html"):r=e,r}getBlob(e,t){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(function(i){if(i)return t=t||Wt.lookup(e),new Blob([i],{type:t})})}getText(e,t){let r=window.encodeURIComponent(e);return t=t||Wt.lookup(e),this.storage.getItem(r).then(function(i){var n=new Ye,s=new FileReader,a;if(i)return a=new Blob([i],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsText(a,t),n.promise})}getBase64(e,t){let r=window.encodeURIComponent(e);return t=t||Wt.lookup(e),this.storage.getItem(r).then(i=>{var n=new Ye,s=new FileReader,a;if(i)return a=new Blob([i],{type:t}),s.addEventListener("loadend",()=>{n.resolve(s.result)}),s.readAsDataURL(a,t),n.promise})}createUrl(e,t){var r=new Ye,i=window.URL||window.webkitURL||window.mozURL,n,s,a=t&&t.base64;return e in this.urlCache?(r.resolve(this.urlCache[e]),r.promise):(a?(s=this.getBase64(e),s&&s.then((function(o){this.urlCache[e]=o,r.resolve(o)}).bind(this))):(s=this.getBlob(e),s&&s.then((function(o){n=i.createObjectURL(o),this.urlCache[e]=n,r.resolve(n)}).bind(this))),s||r.reject({message:"File not found in storage: "+e,stack:new Error().stack}),r.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,r=this.urlCache[e];r&&t.revokeObjectURL(r)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}kt(Kn.prototype);class ui{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=et(e,"display_options");return t?(It(t,"option").forEach(i=>{let n="";switch(i.childNodes.length&&(n=i.childNodes[0].nodeValue),i.attributes.name.value){case"interactive":this.interactive=n;break;case"fixed-layout":this.fixedLayout=n;break;case"open-to-spread":this.openToSpread=n;break;case"orientation-lock":this.orientationLock=n;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const Cn="META-INF/container.xml",Ba="META-INF/com.apple.ibooks.display-options.xml",xt={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class Ei{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=ct(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),ct(this.settings,t),this.opening=new Ye,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Ye,spine:new Ye,metadata:new Ye,cover:new Ye,navigation:new Ye,pageList:new Ye,resources:new Ye,displayOptions:new Ye},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||Jt,this.spine=new Ys,this.locations=new jn(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(r=>{var i=new Error("Cannot load book at "+e);this.emit(Se.BOOK.OPEN_FAILED,i)})}open(e,t){var r,i=t||this.determineType(e);return i===xt.BINARY?(this.archived=!0,this.url=new At("/",""),r=this.openEpub(e)):i===xt.BASE64?(this.archived=!0,this.url=new At("/",""),r=this.openEpub(e,i)):i===xt.EPUB?(this.archived=!0,this.url=new At("/",""),r=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):i==xt.OPF?(this.url=new At(e),r=this.openPackaging(this.url.Path.toString())):i==xt.MANIFEST?(this.url=new At(e),r=this.openManifest(this.url.Path.toString())):(this.url=new At(e),r=this.openContainer(Cn).then(this.openPackaging.bind(this))),r}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(Cn)).then(r=>this.openPackaging(r))}openContainer(e){return this.load(e).then(t=>(this.container=new Xs(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Rt(e),this.load(e).then(t=>(this.packaging=new rn(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new Rt(e),this.load(e).then(t=>(this.packaging=new rn,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(e){var r=e,i=e.indexOf("://")>-1;return i?e:(this.path&&(r=this.path.resolve(e)),t!=!1&&this.url&&(r=this.url.resolve(r)),r)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,r,i;if(this.settings.encoding==="base64")return xt.BASE64;if(typeof e!="string")return xt.BINARY;if(t=new At(e),r=t.path(),i=r.extension,i&&(i=i.replace(/\?.*$/,"")),!i)return xt.DIRECTORY;if(i==="epub")return xt.EPUB;if(i==="opf")return xt.OPF;if(i==="json")return xt.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(Ba)).then(t=>{this.displayOptions=new ui(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new ui,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new ui,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new Qs(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,r=e.toc;return r?new Promise((i,n)=>{this.navigation=new Wr(r),e.pageList&&(this.pageList=new Hr(e.pageList)),i(this.navigation)}):t?this.load(t,"xml").then(i=>(this.navigation=new Wr(i),this.pageList=new Hr(i),this.navigation)):new Promise((i,n)=>{this.navigation=new Wr,this.pageList=new Hr,i(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new wi(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new Ra,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",r=this.url,i=this.settings.requestMethod||Jt.bind(this);return this.storage=new Kn(e,i,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let n=(s,a)=>{a.output=this.resources.substitute(s,a.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new At("/",""),this.spine.hooks.serialize.register(n)}),this.storage.on("online",()=>{this.url=r,this.spine.hooks.serialize.deregister(n)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new Xe(e),r=this.spine.get(t.spinePos),i=this.load.bind(this);return r?r.load(i).then(function(n){var s=t.toRange(r.document);return s}):new Promise((n,s)=>{s("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${mr}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}kt(Ei.prototype);function Bt(N,e){return new Ei(N,e)}Bt.VERSION=mr;typeof global<"u"&&(global.EPUBJS_VERSION=mr);Bt.Book=Ei;Bt.Rendition=wi;Bt.Contents=bi;Bt.CFI=Xe;Bt.utils=Ms;class La{book=null;rendition=null;container;constructor(e){this.container=e,this.init()}async init(){const e=new URL(window.location.href).searchParams,t=e.get("url")||"/test.epub",r=e.get("cfi")||void 0;console.log("Initializing Vanilla TS Reader with:",t),this.renderUI();try{this.book=Bt(t);const i=document.getElementById("viewer");if(!i){console.error("Viewer element not found!");return}console.log("Found viewer element:",i,"isConnected:",i.isConnected),this.rendition=this.book.renderTo("viewer",{method:"default",flow:"paginated",width:"100%",height:"100%",allowScriptedContent:!0,resizeOnOrientationChange:!0}),this.rendition.themes.default({body:{"font-family":"Inter, system-ui, sans-serif","font-size":"18px","line-height":"1.6",color:"#333"},p:{"margin-bottom":"1em"}}),this.rendition.hooks.render.register(o=>{console.log("Rendition triggered 'render' hook for view:",o)}),this.rendition.on("rendered",(o,f)=>{console.log("Rendition 'rendered' event fired:",f)}),console.log("Starting display with location:",r),await this.book.ready,console.log("Book is ready"),await(r?this.rendition.display(r):this.rendition.display()),console.log("Display resolved successfully");const s=document.getElementById("viewer");if(!s||s.childNodes.length===0){console.error("CRITICAL: content rendered but viewer is empty!");const o=document.getElementById("error"),f=document.getElementById("error-msg");o&&f&&(f.textContent="Rendering failed: Content not visible.",o.classList.remove("hidden")),document.getElementById("loader")?.classList.add("hidden");return}const a=document.getElementById("loader");a&&(a.classList.add("opacity-0"),setTimeout(()=>a.classList.add("hidden"),300)),this.resize(),window.Android&&window.Android.log("Book displayed"),this.setupEventListeners(),this.loadMetadata()}catch(i){console.error("Reader initialization failed:",i),this.showError(i.message||String(i))}}renderUI(){this.container.innerHTML=`
            <div id="viewer" class="w-full h-full" style="background-color: white;"></div>
            
            <!-- Loading Overlay -->
            <div id="loader" class="absolute inset-0 bg-stone-900 flex flex-col items-center justify-center z-50 transition-opacity duration-300">
                <div class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"></div>
                <p class="mt-4 text-stone-400 text-sm font-medium animate-pulse">Loading Book...</p>
            </div>

            <!-- Error Overlay -->
            <div id="error" class="hidden absolute inset-0 bg-red-900/95 flex-col items-center justify-center p-8 text-center z-[60]">
                <h3 class="text-xl font-bold text-red-100 mb-2">Error</h3>
                <p id="error-msg" class="text-red-200 font-mono text-sm"></p>
            </div>

            <!-- Navigation Zones -->
            <div id="prev-zone" class="absolute inset-y-0 left-0 w-16 z-20 cursor-pointer"></div>
            <div id="next-zone" class="absolute inset-y-0 right-0 w-16 z-20 cursor-pointer"></div>
            
            <!-- Header (Hidden by default) -->
            <header id="header" class="fixed top-0 left-0 right-0 h-16 bg-stone-800/90 backdrop-blur transform -translate-y-full transition-transform duration-300 z-40 flex items-center px-4 justify-between border-b border-stone-700">
                <div class="text-stone-100 font-medium truncate flex-1 text-center" id="book-title"></div>
            </header>

            <!-- Touch Overlay for Menu -->
             <div id="menu-zone" class="absolute inset-x-0 top-0 h-20 z-30"></div>
        `,document.getElementById("prev-zone").addEventListener("click",()=>this.rendition?.prev()),document.getElementById("next-zone").addEventListener("click",()=>this.rendition?.next()),document.getElementById("menu-zone").addEventListener("click",()=>this.toggleMenu())}setupEventListeners(){!this.rendition||!this.book||(this.rendition.on("relocated",e=>{const t=e.start.cfi,r=e.start.percentage;if(window.Android&&window.Android.onLocationChanged(t,r),this.book.locations.length()>0){const i=this.book.locations.locationFromCfi(t),n=this.book.locations.length();window.Android&&window.Android.onPageChanged(i+1,n)}}),this.rendition.on("selected",e=>{this.book.getRange(e).then(t=>{const r=t.toString();r&&window.Android&&window.Android.onSelection(r,e)})}))}async loadMetadata(){if(!this.book)return;const e=await this.book.loaded.metadata,t=document.getElementById("book-title");t&&(t.textContent=e.title),window.Android&&window.Android.onMetadata(JSON.stringify(e)),this.book.ready.then(()=>this.book.locations.generate(1024))}hideLoader(){const e=document.getElementById("loader");e&&(e.style.opacity="0",e.style.pointerEvents="none",setTimeout(()=>e.remove(),300))}showError(e){const t=document.getElementById("error"),r=document.getElementById("error-msg");t&&r&&(t.classList.remove("hidden"),t.classList.add("flex"),r.textContent=e),this.hideLoader()}toggleMenu(){const e=document.getElementById("header");e&&(e.classList.contains("-translate-y-full")?e.classList.remove("-translate-y-full"):e.classList.add("-translate-y-full")),window.Android&&window.Android.onToggleMenu()}resize(){if(this.rendition&&this.container){const{width:e,height:t}=this.container.getBoundingClientRect();this.rendition.resize(e,t)}}destroy(){this.book&&(this.book.destroy(),this.book=null)}}window.JSZip=ls;const za=document.querySelector("#app"),Jn=new La(za);window.addEventListener("resize",()=>{Jn.resize()});window.addEventListener("unload",()=>{Jn.destroy()});
